// This file is @generated by decision-gate-sdk-gen. DO NOT EDIT.
// Source: Docs/generated/decision-gate/tooling.json
// fmt: off

export type JsonPrimitive = string | number | boolean | null;
export type JsonValue = JsonPrimitive | JsonValue[] | { [key: string]: JsonValue };

export const TOOL_NAMES = [
  "scenario_define",
  "scenario_start",
  "scenario_status",
  "scenario_next",
  "scenario_submit",
  "scenario_trigger",
  "evidence_query",
  "runpack_export",
  "runpack_verify",
  "providers_list",
  "provider_contract_get",
  "provider_check_schema_get",
  "schemas_register",
  "schemas_list",
  "schemas_get",
  "scenarios_list",
  "precheck",
  "decision_gate_docs_search",
] as const;

export const TOOL_DESCRIPTIONS: Record<string, string> = {
  "scenario_define": "Register a ScenarioSpec, validate it, and return the canonical hash used for integrity checks.",
  "scenario_start": "Create a new run state for a scenario and optionally emit entry packets.",
  "scenario_status": "Fetch a read-only run snapshot and safe summary without changing state.",
  "scenario_next": "Evaluate gates in response to an agent-driven next request.",
  "scenario_submit": "Submit external artifacts into run state for audit and later evaluation.",
  "scenario_trigger": "Submit a trigger event (scheduler/external) and evaluate the run.",
  "evidence_query": "Query an evidence provider with full run context and disclosure policy.",
  "runpack_export": "Export deterministic runpack artifacts for offline verification.",
  "runpack_verify": "Verify a runpack manifest and artifacts offline.",
  "providers_list": "List registered evidence providers and capabilities summary.",
  "provider_contract_get": "Fetch the canonical provider contract JSON and hash for a provider.",
  "provider_check_schema_get": "Fetch check schema details (params/result/comparators) for a provider.",
  "schemas_register": "Register a data shape schema for a tenant and namespace.",
  "schemas_list": "List registered data shapes for a tenant and namespace.",
  "schemas_get": "Fetch a specific data shape by identifier and version.",
  "scenarios_list": "List registered scenarios for a tenant and namespace.",
  "precheck": "Evaluate a scenario against asserted data without mutating state.",
  "decision_gate_docs_search": "Search Decision Gate documentation for runtime guidance.",
};

export const TOOL_NOTES: Record<string, string[]> = {
  "scenario_define": [
    "Use before starting runs; scenario_id becomes the stable handle for later calls.",
    "Validates stage/gate/condition IDs, RET trees, and condition references.",
    "Spec hash is deterministic; store it for audit and runpack integrity.",
    "Fails closed on invalid specs or duplicate scenario IDs.",
  ],
  "scenario_start": [
    "Requires RunConfig (tenant_id, run_id, scenario_id, dispatch_targets).",
    "Use started_at to record the caller-supplied start timestamp.",
    "If issue_entry_packets is true, entry packets are disclosed immediately.",
    "Fails closed if run_id already exists or scenario_id is unknown.",
  ],
  "scenario_status": [
    "Use for polling or UI state; does not evaluate gates.",
    "Safe summaries omit evidence values and may include retry hints.",
    "Returns issued packet IDs to help track disclosures.",
  ],
  "scenario_next": [
    "Idempotent by trigger_id; repeated calls return the same decision.",
    "Records decision, evidence, and packet disclosures in run state.",
    "Requires an active run; completed or failed runs do not advance.",
    "Optional feedback can include gate trace or evidence when permitted by server feedback policy.",
  ],
  "scenario_submit": [
    "Payload is hashed and stored as a submission record.",
    "Payload is persisted in run state/runpack logs; do not send raw secrets.",
    "Does not advance the run by itself.",
    "Use for artifacts the model or operator supplies.",
  ],
  "scenario_trigger": [
    "Trigger time is supplied by the caller; no wall-clock reads.",
    "Records the trigger event and resulting decision.",
    "Payload is persisted in run state/runpack logs; do not send raw secrets.",
    "Use for time-based or external system triggers.",
  ],
  "evidence_query": [
    "Disclosure policy may redact raw values; hashes/anchors still returned.",
    "Use for diagnostics or preflight checks; runtime uses the same provider logic.",
    "Requires provider_id, check_id, and full EvidenceContext.",
  ],
  "runpack_export": [
    "Writes manifest and logs to output_dir; generated_at is recorded in the manifest.",
    "include_verification adds a verification report artifact.",
    "Export-time report.checked_files excludes verifier_report.json; offline runpack_verify checked_files includes it (+1 for the same runpack).",
    "Use after runs complete or for audit snapshots.",
  ],
  "runpack_verify": [
    "Validates hashes, integrity root, and decision log structure.",
    "Fails closed on missing or tampered files.",
    "Use in CI or offline audit pipelines.",
  ],
  "providers_list": [
    "Returns provider identifiers and transport metadata.",
    "Results are scoped by auth policy.",
  ],
  "provider_contract_get": [
    "Returns the provider contract as loaded by the MCP server.",
    "Includes a canonical hash for audit and reproducibility.",
    "Subject to provider disclosure policy and authz.",
  ],
  "provider_check_schema_get": [
    "Returns compiled schema metadata for a single check.",
    "Includes comparator allow-lists and check examples.",
    "Subject to provider disclosure policy and authz.",
  ],
  "schemas_register": [
    "Schemas are immutable; registering the same version twice fails.",
    "Provide created_at to record when the schema was authored.",
  ],
  "schemas_list": [
    "Requires tenant_id and namespace_id.",
    "Supports pagination via cursor + limit.",
  ],
  "schemas_get": [
    "Requires tenant_id, namespace_id, schema_id, and version.",
    "Fails closed when schema is missing.",
  ],
  "scenarios_list": [
    "Requires tenant_id and namespace_id.",
    "Returns scenario identifiers and hashes.",
  ],
  "precheck": [
    "Validates asserted data against a registered shape.",
    "Does not mutate run state; intended for simulation.",
  ],
  "decision_gate_docs_search": [
    "Use for quick lookups on evidence flow, comparators, and provider semantics.",
    "Returns ranked sections with role tags and suggested follow-ups.",
    "Search is deterministic and scoped to the configured doc catalog.",
  ],
};

export interface ScenarioDefineRequest {
  /** Scenario specification to register. */
  "spec": JsonValue;
}

export interface ScenarioDefineResponse {
  /** Scenario identifier. */
  "scenario_id": string;
  "spec_hash": Record<string, JsonValue>;
}

export const ScenarioDefine_INPUT_SCHEMA = {
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "additionalProperties": false,
  "properties": {
    "spec": {
      "$ref": "decision-gate://contract/schemas/scenario.schema.json",
      "description": "Scenario specification to register."
    }
  },
  "required": [
    "spec"
  ],
  "type": "object"
} as const;

export const ScenarioDefine_OUTPUT_SCHEMA = {
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "additionalProperties": false,
  "properties": {
    "scenario_id": {
      "description": "Scenario identifier.",
      "type": "string"
    },
    "spec_hash": {
      "additionalProperties": false,
      "properties": {
        "algorithm": {
          "enum": [
            "sha256"
          ],
          "type": "string"
        },
        "value": {
          "description": "Lowercase hex digest.",
          "type": "string"
        }
      },
      "required": [
        "algorithm",
        "value"
      ],
      "type": "object"
    }
  },
  "required": [
    "scenario_id",
    "spec_hash"
  ],
  "type": "object"
} as const;

export interface ScenarioStartRequest {
  /** Issue entry packets immediately. */
  "issue_entry_packets": boolean;
  /** Run configuration and dispatch targets. */
  "run_config": Record<string, JsonValue>;
  /** Scenario identifier. */
  "scenario_id": string;
  /** Caller-supplied run start timestamp. */
  "started_at": Record<string, JsonValue>;
}

export interface ScenarioStartResponse {
  /** Current stage identifier. */
  "current_stage_id": string;
  "decisions": Array<Record<string, JsonValue>>;
  "dispatch_targets": Array<Record<string, JsonValue>>;
  "gate_evals": Array<Record<string, JsonValue>>;
  /** Namespace identifier. Constraints: Minimum: 1. */
  "namespace_id": number;
  "packets": Array<Record<string, JsonValue>>;
  /** Run identifier. */
  "run_id": string;
  /** Scenario identifier. */
  "scenario_id": string;
  "spec_hash": Record<string, JsonValue>;
  "stage_entered_at": Record<string, JsonValue>;
  /** Constraints: Allowed values: "active", "completed", "failed". */
  "status": "active" | "completed" | "failed";
  "submissions": Array<Record<string, JsonValue>>;
  /** Tenant identifier. Constraints: Minimum: 1. */
  "tenant_id": number;
  "tool_calls": Array<Record<string, JsonValue>>;
  "triggers": Array<Record<string, JsonValue>>;
}

export const ScenarioStart_INPUT_SCHEMA = {
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "additionalProperties": false,
  "properties": {
    "issue_entry_packets": {
      "description": "Issue entry packets immediately.",
      "type": "boolean"
    },
    "run_config": {
      "additionalProperties": false,
      "description": "Run configuration and dispatch targets.",
      "properties": {
        "dispatch_targets": {
          "items": {
            "oneOf": [
              {
                "additionalProperties": false,
                "properties": {
                  "agent_id": {
                    "description": "Agent identifier.",
                    "type": "string"
                  },
                  "kind": {
                    "const": "agent"
                  }
                },
                "required": [
                  "kind",
                  "agent_id"
                ],
                "type": "object"
              },
              {
                "additionalProperties": false,
                "properties": {
                  "kind": {
                    "const": "session"
                  },
                  "session_id": {
                    "description": "Session identifier.",
                    "type": "string"
                  }
                },
                "required": [
                  "kind",
                  "session_id"
                ],
                "type": "object"
              },
              {
                "additionalProperties": false,
                "properties": {
                  "kind": {
                    "const": "external"
                  },
                  "system": {
                    "description": "External system name.",
                    "type": "string"
                  },
                  "target": {
                    "description": "External system target.",
                    "type": "string"
                  }
                },
                "required": [
                  "kind",
                  "system",
                  "target"
                ],
                "type": "object"
              },
              {
                "additionalProperties": false,
                "properties": {
                  "channel": {
                    "description": "Broadcast channel identifier.",
                    "type": "string"
                  },
                  "kind": {
                    "const": "channel"
                  }
                },
                "required": [
                  "kind",
                  "channel"
                ],
                "type": "object"
              }
            ]
          },
          "type": "array"
        },
        "namespace_id": {
          "description": "Namespace identifier.",
          "minimum": 1,
          "type": "integer"
        },
        "policy_tags": {
          "description": "Policy tags applied to the run.",
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "run_id": {
          "description": "Run identifier.",
          "type": "string"
        },
        "scenario_id": {
          "description": "Scenario identifier.",
          "type": "string"
        },
        "tenant_id": {
          "description": "Tenant identifier.",
          "minimum": 1,
          "type": "integer"
        }
      },
      "required": [
        "tenant_id",
        "run_id",
        "scenario_id",
        "dispatch_targets",
        "policy_tags"
      ],
      "type": "object"
    },
    "scenario_id": {
      "description": "Scenario identifier.",
      "type": "string"
    },
    "started_at": {
      "description": "Caller-supplied run start timestamp.",
      "oneOf": [
        {
          "additionalProperties": false,
          "properties": {
            "kind": {
              "const": "unix_millis"
            },
            "value": {
              "type": "integer"
            }
          },
          "required": [
            "kind",
            "value"
          ],
          "type": "object"
        },
        {
          "additionalProperties": false,
          "properties": {
            "kind": {
              "const": "logical"
            },
            "value": {
              "minimum": 0,
              "type": "integer"
            }
          },
          "required": [
            "kind",
            "value"
          ],
          "type": "object"
        }
      ]
    }
  },
  "required": [
    "scenario_id",
    "run_config",
    "started_at",
    "issue_entry_packets"
  ],
  "type": "object"
} as const;

export const ScenarioStart_OUTPUT_SCHEMA = {
  "additionalProperties": false,
  "properties": {
    "current_stage_id": {
      "description": "Current stage identifier.",
      "type": "string"
    },
    "decisions": {
      "items": {
        "additionalProperties": false,
        "properties": {
          "correlation_id": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "description": "Correlation identifier.",
                "type": "string"
              }
            ]
          },
          "decided_at": {
            "oneOf": [
              {
                "additionalProperties": false,
                "properties": {
                  "kind": {
                    "const": "unix_millis"
                  },
                  "value": {
                    "type": "integer"
                  }
                },
                "required": [
                  "kind",
                  "value"
                ],
                "type": "object"
              },
              {
                "additionalProperties": false,
                "properties": {
                  "kind": {
                    "const": "logical"
                  },
                  "value": {
                    "minimum": 0,
                    "type": "integer"
                  }
                },
                "required": [
                  "kind",
                  "value"
                ],
                "type": "object"
              }
            ]
          },
          "decision_id": {
            "description": "Decision identifier.",
            "type": "string"
          },
          "outcome": {
            "oneOf": [
              {
                "additionalProperties": false,
                "properties": {
                  "kind": {
                    "const": "start"
                  },
                  "stage_id": {
                    "description": "Initial stage identifier.",
                    "type": "string"
                  }
                },
                "required": [
                  "kind",
                  "stage_id"
                ],
                "type": "object"
              },
              {
                "additionalProperties": false,
                "properties": {
                  "kind": {
                    "const": "complete"
                  },
                  "stage_id": {
                    "description": "Terminal stage identifier.",
                    "type": "string"
                  }
                },
                "required": [
                  "kind",
                  "stage_id"
                ],
                "type": "object"
              },
              {
                "additionalProperties": false,
                "properties": {
                  "from_stage": {
                    "description": "Previous stage identifier.",
                    "type": "string"
                  },
                  "kind": {
                    "const": "advance"
                  },
                  "timeout": {
                    "type": "boolean"
                  },
                  "to_stage": {
                    "description": "Next stage identifier.",
                    "type": "string"
                  }
                },
                "required": [
                  "kind",
                  "from_stage",
                  "to_stage",
                  "timeout"
                ],
                "type": "object"
              },
              {
                "additionalProperties": false,
                "properties": {
                  "kind": {
                    "const": "hold"
                  },
                  "summary": {
                    "additionalProperties": false,
                    "properties": {
                      "policy_tags": {
                        "description": "Policy tags applied to the summary.",
                        "items": {
                          "type": "string"
                        },
                        "type": "array"
                      },
                      "retry_hint": {
                        "oneOf": [
                          {
                            "type": "null"
                          },
                          {
                            "description": "Optional retry hint.",
                            "type": "string"
                          }
                        ]
                      },
                      "status": {
                        "description": "Summary status.",
                        "type": "string"
                      },
                      "unmet_gates": {
                        "items": {
                          "description": "Gate identifier.",
                          "type": "string"
                        },
                        "type": "array"
                      }
                    },
                    "required": [
                      "status",
                      "unmet_gates",
                      "retry_hint",
                      "policy_tags"
                    ],
                    "type": "object"
                  }
                },
                "required": [
                  "kind",
                  "summary"
                ],
                "type": "object"
              },
              {
                "additionalProperties": false,
                "properties": {
                  "kind": {
                    "const": "fail"
                  },
                  "reason": {
                    "description": "Failure reason.",
                    "type": "string"
                  }
                },
                "required": [
                  "kind",
                  "reason"
                ],
                "type": "object"
              }
            ]
          },
          "seq": {
            "minimum": 0,
            "type": "integer"
          },
          "stage_id": {
            "description": "Stage identifier.",
            "type": "string"
          },
          "trigger_id": {
            "description": "Trigger identifier.",
            "type": "string"
          }
        },
        "required": [
          "decision_id",
          "seq",
          "trigger_id",
          "stage_id",
          "decided_at",
          "outcome",
          "correlation_id"
        ],
        "type": "object"
      },
      "type": "array"
    },
    "dispatch_targets": {
      "items": {
        "oneOf": [
          {
            "additionalProperties": false,
            "properties": {
              "agent_id": {
                "description": "Agent identifier.",
                "type": "string"
              },
              "kind": {
                "const": "agent"
              }
            },
            "required": [
              "kind",
              "agent_id"
            ],
            "type": "object"
          },
          {
            "additionalProperties": false,
            "properties": {
              "kind": {
                "const": "session"
              },
              "session_id": {
                "description": "Session identifier.",
                "type": "string"
              }
            },
            "required": [
              "kind",
              "session_id"
            ],
            "type": "object"
          },
          {
            "additionalProperties": false,
            "properties": {
              "kind": {
                "const": "external"
              },
              "system": {
                "description": "External system name.",
                "type": "string"
              },
              "target": {
                "description": "External system target.",
                "type": "string"
              }
            },
            "required": [
              "kind",
              "system",
              "target"
            ],
            "type": "object"
          },
          {
            "additionalProperties": false,
            "properties": {
              "channel": {
                "description": "Broadcast channel identifier.",
                "type": "string"
              },
              "kind": {
                "const": "channel"
              }
            },
            "required": [
              "kind",
              "channel"
            ],
            "type": "object"
          }
        ]
      },
      "type": "array"
    },
    "gate_evals": {
      "items": {
        "additionalProperties": false,
        "properties": {
          "evaluation": {
            "additionalProperties": false,
            "properties": {
              "gate_id": {
                "description": "Gate identifier.",
                "type": "string"
              },
              "status": {
                "description": "Tri-state evaluation result.",
                "enum": [
                  "True",
                  "False",
                  "Unknown"
                ],
                "type": "string"
              },
              "trace": {
                "items": {
                  "additionalProperties": false,
                  "properties": {
                    "condition_id": {
                      "description": "Condition identifier.",
                      "type": "string"
                    },
                    "status": {
                      "description": "Tri-state evaluation result.",
                      "enum": [
                        "True",
                        "False",
                        "Unknown"
                      ],
                      "type": "string"
                    }
                  },
                  "required": [
                    "condition_id",
                    "status"
                  ],
                  "type": "object"
                },
                "type": "array"
              }
            },
            "required": [
              "gate_id",
              "status",
              "trace"
            ],
            "type": "object"
          },
          "evidence": {
            "items": {
              "additionalProperties": false,
              "properties": {
                "condition_id": {
                  "description": "Condition identifier.",
                  "type": "string"
                },
                "result": {
                  "additionalProperties": false,
                  "properties": {
                    "content_type": {
                      "oneOf": [
                        {
                          "type": "null"
                        },
                        {
                          "description": "Evidence content type.",
                          "type": "string"
                        }
                      ]
                    },
                    "error": {
                      "oneOf": [
                        {
                          "type": "null"
                        },
                        {
                          "additionalProperties": false,
                          "properties": {
                            "code": {
                              "description": "Stable error code.",
                              "type": "string"
                            },
                            "details": {
                              "oneOf": [
                                {
                                  "type": "null"
                                },
                                {
                                  "description": "Optional structured error details.",
                                  "type": [
                                    "null",
                                    "boolean",
                                    "number",
                                    "string",
                                    "array",
                                    "object"
                                  ]
                                }
                              ]
                            },
                            "message": {
                              "description": "Error message.",
                              "type": "string"
                            }
                          },
                          "required": [
                            "code",
                            "message",
                            "details"
                          ],
                          "type": "object"
                        }
                      ]
                    },
                    "evidence_anchor": {
                      "oneOf": [
                        {
                          "type": "null"
                        },
                        {
                          "additionalProperties": false,
                          "properties": {
                            "anchor_type": {
                              "description": "Anchor type identifier.",
                              "type": "string"
                            },
                            "anchor_value": {
                              "description": "Anchor value.",
                              "type": "string"
                            }
                          },
                          "required": [
                            "anchor_type",
                            "anchor_value"
                          ],
                          "type": "object"
                        }
                      ]
                    },
                    "evidence_hash": {
                      "oneOf": [
                        {
                          "type": "null"
                        },
                        {
                          "additionalProperties": false,
                          "properties": {
                            "algorithm": {
                              "enum": [
                                "sha256"
                              ],
                              "type": "string"
                            },
                            "value": {
                              "description": "Lowercase hex digest.",
                              "type": "string"
                            }
                          },
                          "required": [
                            "algorithm",
                            "value"
                          ],
                          "type": "object"
                        }
                      ]
                    },
                    "evidence_ref": {
                      "oneOf": [
                        {
                          "type": "null"
                        },
                        {
                          "additionalProperties": false,
                          "properties": {
                            "uri": {
                              "description": "Evidence reference URI.",
                              "type": "string"
                            }
                          },
                          "required": [
                            "uri"
                          ],
                          "type": "object"
                        }
                      ]
                    },
                    "lane": {
                      "description": "Trust lane classification for evidence.",
                      "enum": [
                        "verified",
                        "asserted"
                      ],
                      "type": "string"
                    },
                    "signature": {
                      "oneOf": [
                        {
                          "type": "null"
                        },
                        {
                          "additionalProperties": false,
                          "properties": {
                            "key_id": {
                              "description": "Signing key identifier.",
                              "type": "string"
                            },
                            "scheme": {
                              "description": "Signature scheme identifier.",
                              "type": "string"
                            },
                            "signature": {
                              "items": {
                                "maximum": 255,
                                "minimum": 0,
                                "type": "integer"
                              },
                              "type": "array"
                            }
                          },
                          "required": [
                            "scheme",
                            "key_id",
                            "signature"
                          ],
                          "type": "object"
                        }
                      ]
                    },
                    "value": {
                      "oneOf": [
                        {
                          "type": "null"
                        },
                        {
                          "oneOf": [
                            {
                              "additionalProperties": false,
                              "properties": {
                                "kind": {
                                  "const": "json"
                                },
                                "value": {
                                  "description": "Evidence JSON value.",
                                  "type": [
                                    "null",
                                    "boolean",
                                    "number",
                                    "string",
                                    "array",
                                    "object"
                                  ]
                                }
                              },
                              "required": [
                                "kind",
                                "value"
                              ],
                              "type": "object"
                            },
                            {
                              "additionalProperties": false,
                              "properties": {
                                "kind": {
                                  "const": "bytes"
                                },
                                "value": {
                                  "items": {
                                    "maximum": 255,
                                    "minimum": 0,
                                    "type": "integer"
                                  },
                                  "type": "array"
                                }
                              },
                              "required": [
                                "kind",
                                "value"
                              ],
                              "type": "object"
                            }
                          ]
                        }
                      ]
                    }
                  },
                  "required": [
                    "value",
                    "lane",
                    "error",
                    "evidence_hash",
                    "evidence_ref",
                    "evidence_anchor",
                    "signature",
                    "content_type"
                  ],
                  "type": "object"
                },
                "status": {
                  "description": "Tri-state evaluation result.",
                  "enum": [
                    "True",
                    "False",
                    "Unknown"
                  ],
                  "type": "string"
                }
              },
              "required": [
                "condition_id",
                "status",
                "result"
              ],
              "type": "object"
            },
            "type": "array"
          },
          "stage_id": {
            "description": "Stage identifier.",
            "type": "string"
          },
          "trigger_id": {
            "description": "Trigger identifier.",
            "type": "string"
          }
        },
        "required": [
          "trigger_id",
          "stage_id",
          "evaluation",
          "evidence"
        ],
        "type": "object"
      },
      "type": "array"
    },
    "namespace_id": {
      "description": "Namespace identifier.",
      "minimum": 1,
      "type": "integer"
    },
    "packets": {
      "items": {
        "additionalProperties": false,
        "properties": {
          "decision_id": {
            "description": "Decision identifier.",
            "type": "string"
          },
          "envelope": {
            "additionalProperties": false,
            "properties": {
              "content_hash": {
                "additionalProperties": false,
                "properties": {
                  "algorithm": {
                    "enum": [
                      "sha256"
                    ],
                    "type": "string"
                  },
                  "value": {
                    "description": "Lowercase hex digest.",
                    "type": "string"
                  }
                },
                "required": [
                  "algorithm",
                  "value"
                ],
                "type": "object"
              },
              "content_type": {
                "description": "Packet content type.",
                "type": "string"
              },
              "correlation_id": {
                "oneOf": [
                  {
                    "type": "null"
                  },
                  {
                    "description": "Correlation identifier.",
                    "type": "string"
                  }
                ]
              },
              "expiry": {
                "oneOf": [
                  {
                    "type": "null"
                  },
                  {
                    "oneOf": [
                      {
                        "additionalProperties": false,
                        "properties": {
                          "kind": {
                            "const": "unix_millis"
                          },
                          "value": {
                            "type": "integer"
                          }
                        },
                        "required": [
                          "kind",
                          "value"
                        ],
                        "type": "object"
                      },
                      {
                        "additionalProperties": false,
                        "properties": {
                          "kind": {
                            "const": "logical"
                          },
                          "value": {
                            "minimum": 0,
                            "type": "integer"
                          }
                        },
                        "required": [
                          "kind",
                          "value"
                        ],
                        "type": "object"
                      }
                    ]
                  }
                ]
              },
              "issued_at": {
                "oneOf": [
                  {
                    "additionalProperties": false,
                    "properties": {
                      "kind": {
                        "const": "unix_millis"
                      },
                      "value": {
                        "type": "integer"
                      }
                    },
                    "required": [
                      "kind",
                      "value"
                    ],
                    "type": "object"
                  },
                  {
                    "additionalProperties": false,
                    "properties": {
                      "kind": {
                        "const": "logical"
                      },
                      "value": {
                        "minimum": 0,
                        "type": "integer"
                      }
                    },
                    "required": [
                      "kind",
                      "value"
                    ],
                    "type": "object"
                  }
                ]
              },
              "packet_id": {
                "description": "Packet identifier.",
                "type": "string"
              },
              "run_id": {
                "description": "Run identifier.",
                "type": "string"
              },
              "scenario_id": {
                "description": "Scenario identifier.",
                "type": "string"
              },
              "schema_id": {
                "description": "Schema identifier.",
                "type": "string"
              },
              "stage_id": {
                "description": "Stage identifier.",
                "type": "string"
              },
              "visibility": {
                "additionalProperties": false,
                "properties": {
                  "labels": {
                    "description": "Visibility labels.",
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  },
                  "policy_tags": {
                    "description": "Policy tags.",
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                },
                "required": [
                  "labels",
                  "policy_tags"
                ],
                "type": "object"
              }
            },
            "required": [
              "scenario_id",
              "run_id",
              "stage_id",
              "packet_id",
              "schema_id",
              "content_type",
              "content_hash",
              "visibility",
              "expiry",
              "correlation_id",
              "issued_at"
            ],
            "type": "object"
          },
          "payload": {
            "oneOf": [
              {
                "additionalProperties": false,
                "properties": {
                  "kind": {
                    "const": "json"
                  },
                  "value": {
                    "description": "Inline JSON payload.",
                    "type": [
                      "null",
                      "boolean",
                      "number",
                      "string",
                      "array",
                      "object"
                    ]
                  }
                },
                "required": [
                  "kind",
                  "value"
                ],
                "type": "object"
              },
              {
                "additionalProperties": false,
                "properties": {
                  "bytes": {
                    "items": {
                      "maximum": 255,
                      "minimum": 0,
                      "type": "integer"
                    },
                    "type": "array"
                  },
                  "kind": {
                    "const": "bytes"
                  }
                },
                "required": [
                  "kind",
                  "bytes"
                ],
                "type": "object"
              },
              {
                "additionalProperties": false,
                "properties": {
                  "content_ref": {
                    "additionalProperties": false,
                    "properties": {
                      "content_hash": {
                        "additionalProperties": false,
                        "properties": {
                          "algorithm": {
                            "enum": [
                              "sha256"
                            ],
                            "type": "string"
                          },
                          "value": {
                            "description": "Lowercase hex digest.",
                            "type": "string"
                          }
                        },
                        "required": [
                          "algorithm",
                          "value"
                        ],
                        "type": "object"
                      },
                      "encryption": {
                        "oneOf": [
                          {
                            "type": "null"
                          },
                          {
                            "description": "Encryption metadata.",
                            "type": "string"
                          }
                        ]
                      },
                      "uri": {
                        "description": "Content URI.",
                        "type": "string"
                      }
                    },
                    "required": [
                      "uri",
                      "content_hash",
                      "encryption"
                    ],
                    "type": "object"
                  },
                  "kind": {
                    "const": "external"
                  }
                },
                "required": [
                  "kind",
                  "content_ref"
                ],
                "type": "object"
              }
            ]
          },
          "receipts": {
            "items": {
              "additionalProperties": false,
              "properties": {
                "dispatch_id": {
                  "description": "Dispatch identifier.",
                  "type": "string"
                },
                "dispatched_at": {
                  "oneOf": [
                    {
                      "additionalProperties": false,
                      "properties": {
                        "kind": {
                          "const": "unix_millis"
                        },
                        "value": {
                          "type": "integer"
                        }
                      },
                      "required": [
                        "kind",
                        "value"
                      ],
                      "type": "object"
                    },
                    {
                      "additionalProperties": false,
                      "properties": {
                        "kind": {
                          "const": "logical"
                        },
                        "value": {
                          "minimum": 0,
                          "type": "integer"
                        }
                      },
                      "required": [
                        "kind",
                        "value"
                      ],
                      "type": "object"
                    }
                  ]
                },
                "dispatcher": {
                  "description": "Dispatcher identifier.",
                  "type": "string"
                },
                "receipt_hash": {
                  "additionalProperties": false,
                  "properties": {
                    "algorithm": {
                      "enum": [
                        "sha256"
                      ],
                      "type": "string"
                    },
                    "value": {
                      "description": "Lowercase hex digest.",
                      "type": "string"
                    }
                  },
                  "required": [
                    "algorithm",
                    "value"
                  ],
                  "type": "object"
                },
                "target": {
                  "oneOf": [
                    {
                      "additionalProperties": false,
                      "properties": {
                        "agent_id": {
                          "description": "Agent identifier.",
                          "type": "string"
                        },
                        "kind": {
                          "const": "agent"
                        }
                      },
                      "required": [
                        "kind",
                        "agent_id"
                      ],
                      "type": "object"
                    },
                    {
                      "additionalProperties": false,
                      "properties": {
                        "kind": {
                          "const": "session"
                        },
                        "session_id": {
                          "description": "Session identifier.",
                          "type": "string"
                        }
                      },
                      "required": [
                        "kind",
                        "session_id"
                      ],
                      "type": "object"
                    },
                    {
                      "additionalProperties": false,
                      "properties": {
                        "kind": {
                          "const": "external"
                        },
                        "system": {
                          "description": "External system name.",
                          "type": "string"
                        },
                        "target": {
                          "description": "External system target.",
                          "type": "string"
                        }
                      },
                      "required": [
                        "kind",
                        "system",
                        "target"
                      ],
                      "type": "object"
                    },
                    {
                      "additionalProperties": false,
                      "properties": {
                        "channel": {
                          "description": "Broadcast channel identifier.",
                          "type": "string"
                        },
                        "kind": {
                          "const": "channel"
                        }
                      },
                      "required": [
                        "kind",
                        "channel"
                      ],
                      "type": "object"
                    }
                  ]
                }
              },
              "required": [
                "dispatch_id",
                "target",
                "receipt_hash",
                "dispatched_at",
                "dispatcher"
              ],
              "type": "object"
            },
            "type": "array"
          }
        },
        "required": [
          "envelope",
          "payload",
          "receipts",
          "decision_id"
        ],
        "type": "object"
      },
      "type": "array"
    },
    "run_id": {
      "description": "Run identifier.",
      "type": "string"
    },
    "scenario_id": {
      "description": "Scenario identifier.",
      "type": "string"
    },
    "spec_hash": {
      "additionalProperties": false,
      "properties": {
        "algorithm": {
          "enum": [
            "sha256"
          ],
          "type": "string"
        },
        "value": {
          "description": "Lowercase hex digest.",
          "type": "string"
        }
      },
      "required": [
        "algorithm",
        "value"
      ],
      "type": "object"
    },
    "stage_entered_at": {
      "oneOf": [
        {
          "additionalProperties": false,
          "properties": {
            "kind": {
              "const": "unix_millis"
            },
            "value": {
              "type": "integer"
            }
          },
          "required": [
            "kind",
            "value"
          ],
          "type": "object"
        },
        {
          "additionalProperties": false,
          "properties": {
            "kind": {
              "const": "logical"
            },
            "value": {
              "minimum": 0,
              "type": "integer"
            }
          },
          "required": [
            "kind",
            "value"
          ],
          "type": "object"
        }
      ]
    },
    "status": {
      "enum": [
        "active",
        "completed",
        "failed"
      ],
      "type": "string"
    },
    "submissions": {
      "items": {
        "additionalProperties": false,
        "properties": {
          "content_hash": {
            "additionalProperties": false,
            "properties": {
              "algorithm": {
                "enum": [
                  "sha256"
                ],
                "type": "string"
              },
              "value": {
                "description": "Lowercase hex digest.",
                "type": "string"
              }
            },
            "required": [
              "algorithm",
              "value"
            ],
            "type": "object"
          },
          "content_type": {
            "description": "Submission content type.",
            "type": "string"
          },
          "correlation_id": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "description": "Correlation identifier.",
                "type": "string"
              }
            ]
          },
          "payload": {
            "oneOf": [
              {
                "additionalProperties": false,
                "properties": {
                  "kind": {
                    "const": "json"
                  },
                  "value": {
                    "description": "Inline JSON payload.",
                    "type": [
                      "null",
                      "boolean",
                      "number",
                      "string",
                      "array",
                      "object"
                    ]
                  }
                },
                "required": [
                  "kind",
                  "value"
                ],
                "type": "object"
              },
              {
                "additionalProperties": false,
                "properties": {
                  "bytes": {
                    "items": {
                      "maximum": 255,
                      "minimum": 0,
                      "type": "integer"
                    },
                    "type": "array"
                  },
                  "kind": {
                    "const": "bytes"
                  }
                },
                "required": [
                  "kind",
                  "bytes"
                ],
                "type": "object"
              },
              {
                "additionalProperties": false,
                "properties": {
                  "content_ref": {
                    "additionalProperties": false,
                    "properties": {
                      "content_hash": {
                        "additionalProperties": false,
                        "properties": {
                          "algorithm": {
                            "enum": [
                              "sha256"
                            ],
                            "type": "string"
                          },
                          "value": {
                            "description": "Lowercase hex digest.",
                            "type": "string"
                          }
                        },
                        "required": [
                          "algorithm",
                          "value"
                        ],
                        "type": "object"
                      },
                      "encryption": {
                        "oneOf": [
                          {
                            "type": "null"
                          },
                          {
                            "description": "Encryption metadata.",
                            "type": "string"
                          }
                        ]
                      },
                      "uri": {
                        "description": "Content URI.",
                        "type": "string"
                      }
                    },
                    "required": [
                      "uri",
                      "content_hash",
                      "encryption"
                    ],
                    "type": "object"
                  },
                  "kind": {
                    "const": "external"
                  }
                },
                "required": [
                  "kind",
                  "content_ref"
                ],
                "type": "object"
              }
            ]
          },
          "run_id": {
            "description": "Run identifier.",
            "type": "string"
          },
          "submission_id": {
            "description": "Submission identifier.",
            "type": "string"
          },
          "submitted_at": {
            "oneOf": [
              {
                "additionalProperties": false,
                "properties": {
                  "kind": {
                    "const": "unix_millis"
                  },
                  "value": {
                    "type": "integer"
                  }
                },
                "required": [
                  "kind",
                  "value"
                ],
                "type": "object"
              },
              {
                "additionalProperties": false,
                "properties": {
                  "kind": {
                    "const": "logical"
                  },
                  "value": {
                    "minimum": 0,
                    "type": "integer"
                  }
                },
                "required": [
                  "kind",
                  "value"
                ],
                "type": "object"
              }
            ]
          }
        },
        "required": [
          "submission_id",
          "run_id",
          "payload",
          "content_type",
          "content_hash",
          "submitted_at",
          "correlation_id"
        ],
        "type": "object"
      },
      "type": "array"
    },
    "tenant_id": {
      "description": "Tenant identifier.",
      "minimum": 1,
      "type": "integer"
    },
    "tool_calls": {
      "items": {
        "additionalProperties": false,
        "properties": {
          "call_id": {
            "description": "Tool-call identifier.",
            "type": "string"
          },
          "called_at": {
            "oneOf": [
              {
                "additionalProperties": false,
                "properties": {
                  "kind": {
                    "const": "unix_millis"
                  },
                  "value": {
                    "type": "integer"
                  }
                },
                "required": [
                  "kind",
                  "value"
                ],
                "type": "object"
              },
              {
                "additionalProperties": false,
                "properties": {
                  "kind": {
                    "const": "logical"
                  },
                  "value": {
                    "minimum": 0,
                    "type": "integer"
                  }
                },
                "required": [
                  "kind",
                  "value"
                ],
                "type": "object"
              }
            ]
          },
          "correlation_id": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "description": "Correlation identifier.",
                "type": "string"
              }
            ]
          },
          "error": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "additionalProperties": false,
                "properties": {
                  "code": {
                    "description": "Stable error code.",
                    "type": "string"
                  },
                  "details": {
                    "oneOf": [
                      {
                        "type": "null"
                      },
                      {
                        "oneOf": [
                          {
                            "additionalProperties": false,
                            "properties": {
                              "blocked_by_policy": {
                                "type": "boolean"
                              },
                              "kind": {
                                "const": "provider_missing"
                              },
                              "missing_providers": {
                                "description": "Missing provider identifiers.",
                                "items": {
                                  "type": "string"
                                },
                                "type": "array"
                              },
                              "required_capabilities": {
                                "description": "Required capabilities.",
                                "items": {
                                  "type": "string"
                                },
                                "type": "array"
                              }
                            },
                            "required": [
                              "kind",
                              "missing_providers",
                              "required_capabilities",
                              "blocked_by_policy"
                            ],
                            "type": "object"
                          },
                          {
                            "additionalProperties": false,
                            "properties": {
                              "info": {
                                "description": "Additional error details.",
                                "type": "string"
                              },
                              "kind": {
                                "const": "message"
                              }
                            },
                            "required": [
                              "kind",
                              "info"
                            ],
                            "type": "object"
                          }
                        ]
                      }
                    ]
                  },
                  "message": {
                    "description": "Error message.",
                    "type": "string"
                  }
                },
                "required": [
                  "code",
                  "message",
                  "details"
                ],
                "type": "object"
              }
            ]
          },
          "method": {
            "description": "Tool method name.",
            "type": "string"
          },
          "request_hash": {
            "additionalProperties": false,
            "properties": {
              "algorithm": {
                "enum": [
                  "sha256"
                ],
                "type": "string"
              },
              "value": {
                "description": "Lowercase hex digest.",
                "type": "string"
              }
            },
            "required": [
              "algorithm",
              "value"
            ],
            "type": "object"
          },
          "response_hash": {
            "additionalProperties": false,
            "properties": {
              "algorithm": {
                "enum": [
                  "sha256"
                ],
                "type": "string"
              },
              "value": {
                "description": "Lowercase hex digest.",
                "type": "string"
              }
            },
            "required": [
              "algorithm",
              "value"
            ],
            "type": "object"
          }
        },
        "required": [
          "call_id",
          "method",
          "request_hash",
          "response_hash",
          "called_at",
          "correlation_id",
          "error"
        ],
        "type": "object"
      },
      "type": "array"
    },
    "triggers": {
      "items": {
        "additionalProperties": false,
        "properties": {
          "event": {
            "additionalProperties": false,
            "properties": {
              "correlation_id": {
                "oneOf": [
                  {
                    "type": "null"
                  },
                  {
                    "description": "Correlation identifier.",
                    "type": "string"
                  }
                ]
              },
              "kind": {
                "enum": [
                  "agent_request_next",
                  "tick",
                  "external_event",
                  "backend_event"
                ],
                "type": "string"
              },
              "namespace_id": {
                "description": "Namespace identifier.",
                "minimum": 1,
                "type": "integer"
              },
              "payload": {
                "oneOf": [
                  {
                    "type": "null"
                  },
                  {
                    "oneOf": [
                      {
                        "additionalProperties": false,
                        "properties": {
                          "kind": {
                            "const": "json"
                          },
                          "value": {
                            "description": "Inline JSON payload.",
                            "type": [
                              "null",
                              "boolean",
                              "number",
                              "string",
                              "array",
                              "object"
                            ]
                          }
                        },
                        "required": [
                          "kind",
                          "value"
                        ],
                        "type": "object"
                      },
                      {
                        "additionalProperties": false,
                        "properties": {
                          "bytes": {
                            "items": {
                              "maximum": 255,
                              "minimum": 0,
                              "type": "integer"
                            },
                            "type": "array"
                          },
                          "kind": {
                            "const": "bytes"
                          }
                        },
                        "required": [
                          "kind",
                          "bytes"
                        ],
                        "type": "object"
                      },
                      {
                        "additionalProperties": false,
                        "properties": {
                          "content_ref": {
                            "additionalProperties": false,
                            "properties": {
                              "content_hash": {
                                "additionalProperties": false,
                                "properties": {
                                  "algorithm": {
                                    "enum": [
                                      "sha256"
                                    ],
                                    "type": "string"
                                  },
                                  "value": {
                                    "description": "Lowercase hex digest.",
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "algorithm",
                                  "value"
                                ],
                                "type": "object"
                              },
                              "encryption": {
                                "oneOf": [
                                  {
                                    "type": "null"
                                  },
                                  {
                                    "description": "Encryption metadata.",
                                    "type": "string"
                                  }
                                ]
                              },
                              "uri": {
                                "description": "Content URI.",
                                "type": "string"
                              }
                            },
                            "required": [
                              "uri",
                              "content_hash",
                              "encryption"
                            ],
                            "type": "object"
                          },
                          "kind": {
                            "const": "external"
                          }
                        },
                        "required": [
                          "kind",
                          "content_ref"
                        ],
                        "type": "object"
                      }
                    ]
                  }
                ]
              },
              "run_id": {
                "description": "Run identifier.",
                "type": "string"
              },
              "source_id": {
                "description": "Trigger source identifier.",
                "type": "string"
              },
              "tenant_id": {
                "description": "Tenant identifier.",
                "minimum": 1,
                "type": "integer"
              },
              "time": {
                "oneOf": [
                  {
                    "additionalProperties": false,
                    "properties": {
                      "kind": {
                        "const": "unix_millis"
                      },
                      "value": {
                        "type": "integer"
                      }
                    },
                    "required": [
                      "kind",
                      "value"
                    ],
                    "type": "object"
                  },
                  {
                    "additionalProperties": false,
                    "properties": {
                      "kind": {
                        "const": "logical"
                      },
                      "value": {
                        "minimum": 0,
                        "type": "integer"
                      }
                    },
                    "required": [
                      "kind",
                      "value"
                    ],
                    "type": "object"
                  }
                ]
              },
              "trigger_id": {
                "description": "Trigger identifier.",
                "type": "string"
              }
            },
            "required": [
              "trigger_id",
              "tenant_id",
              "namespace_id",
              "run_id",
              "kind",
              "time",
              "source_id"
            ],
            "type": "object"
          },
          "seq": {
            "minimum": 0,
            "type": "integer"
          }
        },
        "required": [
          "seq",
          "event"
        ],
        "type": "object"
      },
      "type": "array"
    }
  },
  "required": [
    "tenant_id",
    "namespace_id",
    "run_id",
    "scenario_id",
    "spec_hash",
    "current_stage_id",
    "stage_entered_at",
    "status",
    "dispatch_targets",
    "triggers",
    "gate_evals",
    "decisions",
    "packets",
    "submissions",
    "tool_calls"
  ],
  "type": "object"
} as const;

export interface ScenarioStatusRequest {
  /** Status request payload. */
  "request": Record<string, JsonValue>;
  /** Scenario identifier. */
  "scenario_id": string;
}

export interface ScenarioStatusResponse {
  /** Current stage identifier. */
  "current_stage_id": string;
  "issued_packet_ids": Array<string>;
  "last_decision": Record<string, JsonValue> | null;
  /** Namespace identifier. Constraints: Minimum: 1. */
  "namespace_id"?: number;
  /** Run identifier. */
  "run_id": string;
  "safe_summary": Record<string, JsonValue> | null;
  /** Scenario identifier. */
  "scenario_id": string;
  /** Constraints: Allowed values: "active", "completed", "failed". */
  "status": "active" | "completed" | "failed";
}

export const ScenarioStatus_INPUT_SCHEMA = {
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "additionalProperties": false,
  "properties": {
    "request": {
      "additionalProperties": false,
      "description": "Status request payload.",
      "properties": {
        "correlation_id": {
          "oneOf": [
            {
              "type": "null"
            },
            {
              "description": "Correlation identifier.",
              "type": "string"
            }
          ]
        },
        "namespace_id": {
          "description": "Namespace identifier.",
          "minimum": 1,
          "type": "integer"
        },
        "requested_at": {
          "oneOf": [
            {
              "additionalProperties": false,
              "properties": {
                "kind": {
                  "const": "unix_millis"
                },
                "value": {
                  "type": "integer"
                }
              },
              "required": [
                "kind",
                "value"
              ],
              "type": "object"
            },
            {
              "additionalProperties": false,
              "properties": {
                "kind": {
                  "const": "logical"
                },
                "value": {
                  "minimum": 0,
                  "type": "integer"
                }
              },
              "required": [
                "kind",
                "value"
              ],
              "type": "object"
            }
          ]
        },
        "run_id": {
          "description": "Run identifier.",
          "type": "string"
        },
        "tenant_id": {
          "description": "Tenant identifier.",
          "minimum": 1,
          "type": "integer"
        }
      },
      "required": [
        "tenant_id",
        "namespace_id",
        "run_id",
        "requested_at"
      ],
      "type": "object"
    },
    "scenario_id": {
      "description": "Scenario identifier.",
      "type": "string"
    }
  },
  "required": [
    "scenario_id",
    "request"
  ],
  "type": "object"
} as const;

export const ScenarioStatus_OUTPUT_SCHEMA = {
  "additionalProperties": false,
  "properties": {
    "current_stage_id": {
      "description": "Current stage identifier.",
      "type": "string"
    },
    "issued_packet_ids": {
      "items": {
        "description": "Packet identifier.",
        "type": "string"
      },
      "type": "array"
    },
    "last_decision": {
      "oneOf": [
        {
          "type": "null"
        },
        {
          "additionalProperties": false,
          "properties": {
            "correlation_id": {
              "oneOf": [
                {
                  "type": "null"
                },
                {
                  "description": "Correlation identifier.",
                  "type": "string"
                }
              ]
            },
            "decided_at": {
              "oneOf": [
                {
                  "additionalProperties": false,
                  "properties": {
                    "kind": {
                      "const": "unix_millis"
                    },
                    "value": {
                      "type": "integer"
                    }
                  },
                  "required": [
                    "kind",
                    "value"
                  ],
                  "type": "object"
                },
                {
                  "additionalProperties": false,
                  "properties": {
                    "kind": {
                      "const": "logical"
                    },
                    "value": {
                      "minimum": 0,
                      "type": "integer"
                    }
                  },
                  "required": [
                    "kind",
                    "value"
                  ],
                  "type": "object"
                }
              ]
            },
            "decision_id": {
              "description": "Decision identifier.",
              "type": "string"
            },
            "outcome": {
              "oneOf": [
                {
                  "additionalProperties": false,
                  "properties": {
                    "kind": {
                      "const": "start"
                    },
                    "stage_id": {
                      "description": "Initial stage identifier.",
                      "type": "string"
                    }
                  },
                  "required": [
                    "kind",
                    "stage_id"
                  ],
                  "type": "object"
                },
                {
                  "additionalProperties": false,
                  "properties": {
                    "kind": {
                      "const": "complete"
                    },
                    "stage_id": {
                      "description": "Terminal stage identifier.",
                      "type": "string"
                    }
                  },
                  "required": [
                    "kind",
                    "stage_id"
                  ],
                  "type": "object"
                },
                {
                  "additionalProperties": false,
                  "properties": {
                    "from_stage": {
                      "description": "Previous stage identifier.",
                      "type": "string"
                    },
                    "kind": {
                      "const": "advance"
                    },
                    "timeout": {
                      "type": "boolean"
                    },
                    "to_stage": {
                      "description": "Next stage identifier.",
                      "type": "string"
                    }
                  },
                  "required": [
                    "kind",
                    "from_stage",
                    "to_stage",
                    "timeout"
                  ],
                  "type": "object"
                },
                {
                  "additionalProperties": false,
                  "properties": {
                    "kind": {
                      "const": "hold"
                    },
                    "summary": {
                      "additionalProperties": false,
                      "properties": {
                        "policy_tags": {
                          "description": "Policy tags applied to the summary.",
                          "items": {
                            "type": "string"
                          },
                          "type": "array"
                        },
                        "retry_hint": {
                          "oneOf": [
                            {
                              "type": "null"
                            },
                            {
                              "description": "Optional retry hint.",
                              "type": "string"
                            }
                          ]
                        },
                        "status": {
                          "description": "Summary status.",
                          "type": "string"
                        },
                        "unmet_gates": {
                          "items": {
                            "description": "Gate identifier.",
                            "type": "string"
                          },
                          "type": "array"
                        }
                      },
                      "required": [
                        "status",
                        "unmet_gates",
                        "retry_hint",
                        "policy_tags"
                      ],
                      "type": "object"
                    }
                  },
                  "required": [
                    "kind",
                    "summary"
                  ],
                  "type": "object"
                },
                {
                  "additionalProperties": false,
                  "properties": {
                    "kind": {
                      "const": "fail"
                    },
                    "reason": {
                      "description": "Failure reason.",
                      "type": "string"
                    }
                  },
                  "required": [
                    "kind",
                    "reason"
                  ],
                  "type": "object"
                }
              ]
            },
            "seq": {
              "minimum": 0,
              "type": "integer"
            },
            "stage_id": {
              "description": "Stage identifier.",
              "type": "string"
            },
            "trigger_id": {
              "description": "Trigger identifier.",
              "type": "string"
            }
          },
          "required": [
            "decision_id",
            "seq",
            "trigger_id",
            "stage_id",
            "decided_at",
            "outcome",
            "correlation_id"
          ],
          "type": "object"
        }
      ]
    },
    "namespace_id": {
      "description": "Namespace identifier.",
      "minimum": 1,
      "type": "integer"
    },
    "run_id": {
      "description": "Run identifier.",
      "type": "string"
    },
    "safe_summary": {
      "oneOf": [
        {
          "type": "null"
        },
        {
          "additionalProperties": false,
          "properties": {
            "policy_tags": {
              "description": "Policy tags applied to the summary.",
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            "retry_hint": {
              "oneOf": [
                {
                  "type": "null"
                },
                {
                  "description": "Optional retry hint.",
                  "type": "string"
                }
              ]
            },
            "status": {
              "description": "Summary status.",
              "type": "string"
            },
            "unmet_gates": {
              "items": {
                "description": "Gate identifier.",
                "type": "string"
              },
              "type": "array"
            }
          },
          "required": [
            "status",
            "unmet_gates",
            "retry_hint",
            "policy_tags"
          ],
          "type": "object"
        }
      ]
    },
    "scenario_id": {
      "description": "Scenario identifier.",
      "type": "string"
    },
    "status": {
      "enum": [
        "active",
        "completed",
        "failed"
      ],
      "type": "string"
    }
  },
  "required": [
    "run_id",
    "scenario_id",
    "current_stage_id",
    "status",
    "last_decision",
    "issued_packet_ids",
    "safe_summary"
  ],
  "type": "object"
} as const;

export interface ScenarioNextRequest {
  /** Optional feedback level override for scenario_next. */
  "feedback"?: "summary" | "trace" | "evidence" | null;
  /** Next request payload from an agent. */
  "request": Record<string, JsonValue>;
  /** Scenario identifier. */
  "scenario_id": string;
}

export interface ScenarioNextResponse {
  "decision": Record<string, JsonValue>;
  "feedback"?: Record<string, JsonValue> | null;
  "packets": Array<Record<string, JsonValue>>;
  /** Constraints: Allowed values: "active", "completed", "failed". */
  "status": "active" | "completed" | "failed";
}

export const ScenarioNext_INPUT_SCHEMA = {
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "additionalProperties": false,
  "properties": {
    "feedback": {
      "description": "Optional feedback level override for scenario_next.",
      "oneOf": [
        {
          "type": "null"
        },
        {
          "description": "Feedback disclosure level.",
          "enum": [
            "summary",
            "trace",
            "evidence"
          ],
          "type": "string"
        }
      ]
    },
    "request": {
      "additionalProperties": false,
      "description": "Next request payload from an agent.",
      "properties": {
        "agent_id": {
          "description": "Agent identifier.",
          "type": "string"
        },
        "correlation_id": {
          "oneOf": [
            {
              "type": "null"
            },
            {
              "description": "Correlation identifier.",
              "type": "string"
            }
          ]
        },
        "namespace_id": {
          "description": "Namespace identifier.",
          "minimum": 1,
          "type": "integer"
        },
        "run_id": {
          "description": "Run identifier.",
          "type": "string"
        },
        "tenant_id": {
          "description": "Tenant identifier.",
          "minimum": 1,
          "type": "integer"
        },
        "time": {
          "oneOf": [
            {
              "additionalProperties": false,
              "properties": {
                "kind": {
                  "const": "unix_millis"
                },
                "value": {
                  "type": "integer"
                }
              },
              "required": [
                "kind",
                "value"
              ],
              "type": "object"
            },
            {
              "additionalProperties": false,
              "properties": {
                "kind": {
                  "const": "logical"
                },
                "value": {
                  "minimum": 0,
                  "type": "integer"
                }
              },
              "required": [
                "kind",
                "value"
              ],
              "type": "object"
            }
          ]
        },
        "trigger_id": {
          "description": "Trigger identifier.",
          "type": "string"
        }
      },
      "required": [
        "tenant_id",
        "namespace_id",
        "run_id",
        "trigger_id",
        "agent_id",
        "time"
      ],
      "type": "object"
    },
    "scenario_id": {
      "description": "Scenario identifier.",
      "type": "string"
    }
  },
  "required": [
    "scenario_id",
    "request"
  ],
  "type": "object"
} as const;

export const ScenarioNext_OUTPUT_SCHEMA = {
  "additionalProperties": false,
  "properties": {
    "decision": {
      "additionalProperties": false,
      "properties": {
        "correlation_id": {
          "oneOf": [
            {
              "type": "null"
            },
            {
              "description": "Correlation identifier.",
              "type": "string"
            }
          ]
        },
        "decided_at": {
          "oneOf": [
            {
              "additionalProperties": false,
              "properties": {
                "kind": {
                  "const": "unix_millis"
                },
                "value": {
                  "type": "integer"
                }
              },
              "required": [
                "kind",
                "value"
              ],
              "type": "object"
            },
            {
              "additionalProperties": false,
              "properties": {
                "kind": {
                  "const": "logical"
                },
                "value": {
                  "minimum": 0,
                  "type": "integer"
                }
              },
              "required": [
                "kind",
                "value"
              ],
              "type": "object"
            }
          ]
        },
        "decision_id": {
          "description": "Decision identifier.",
          "type": "string"
        },
        "outcome": {
          "oneOf": [
            {
              "additionalProperties": false,
              "properties": {
                "kind": {
                  "const": "start"
                },
                "stage_id": {
                  "description": "Initial stage identifier.",
                  "type": "string"
                }
              },
              "required": [
                "kind",
                "stage_id"
              ],
              "type": "object"
            },
            {
              "additionalProperties": false,
              "properties": {
                "kind": {
                  "const": "complete"
                },
                "stage_id": {
                  "description": "Terminal stage identifier.",
                  "type": "string"
                }
              },
              "required": [
                "kind",
                "stage_id"
              ],
              "type": "object"
            },
            {
              "additionalProperties": false,
              "properties": {
                "from_stage": {
                  "description": "Previous stage identifier.",
                  "type": "string"
                },
                "kind": {
                  "const": "advance"
                },
                "timeout": {
                  "type": "boolean"
                },
                "to_stage": {
                  "description": "Next stage identifier.",
                  "type": "string"
                }
              },
              "required": [
                "kind",
                "from_stage",
                "to_stage",
                "timeout"
              ],
              "type": "object"
            },
            {
              "additionalProperties": false,
              "properties": {
                "kind": {
                  "const": "hold"
                },
                "summary": {
                  "additionalProperties": false,
                  "properties": {
                    "policy_tags": {
                      "description": "Policy tags applied to the summary.",
                      "items": {
                        "type": "string"
                      },
                      "type": "array"
                    },
                    "retry_hint": {
                      "oneOf": [
                        {
                          "type": "null"
                        },
                        {
                          "description": "Optional retry hint.",
                          "type": "string"
                        }
                      ]
                    },
                    "status": {
                      "description": "Summary status.",
                      "type": "string"
                    },
                    "unmet_gates": {
                      "items": {
                        "description": "Gate identifier.",
                        "type": "string"
                      },
                      "type": "array"
                    }
                  },
                  "required": [
                    "status",
                    "unmet_gates",
                    "retry_hint",
                    "policy_tags"
                  ],
                  "type": "object"
                }
              },
              "required": [
                "kind",
                "summary"
              ],
              "type": "object"
            },
            {
              "additionalProperties": false,
              "properties": {
                "kind": {
                  "const": "fail"
                },
                "reason": {
                  "description": "Failure reason.",
                  "type": "string"
                }
              },
              "required": [
                "kind",
                "reason"
              ],
              "type": "object"
            }
          ]
        },
        "seq": {
          "minimum": 0,
          "type": "integer"
        },
        "stage_id": {
          "description": "Stage identifier.",
          "type": "string"
        },
        "trigger_id": {
          "description": "Trigger identifier.",
          "type": "string"
        }
      },
      "required": [
        "decision_id",
        "seq",
        "trigger_id",
        "stage_id",
        "decided_at",
        "outcome",
        "correlation_id"
      ],
      "type": "object"
    },
    "feedback": {
      "oneOf": [
        {
          "type": "null"
        },
        {
          "additionalProperties": false,
          "properties": {
            "denied_reason": {
              "oneOf": [
                {
                  "type": "null"
                },
                {
                  "description": "Optional denial reason for requested feedback.",
                  "type": "string"
                }
              ]
            },
            "gate_evaluations": {
              "oneOf": [
                {
                  "type": "null"
                },
                {
                  "items": {
                    "additionalProperties": false,
                    "properties": {
                      "gate_id": {
                        "description": "Gate identifier.",
                        "type": "string"
                      },
                      "status": {
                        "description": "Tri-state evaluation result.",
                        "enum": [
                          "True",
                          "False",
                          "Unknown"
                        ],
                        "type": "string"
                      },
                      "trace": {
                        "items": {
                          "additionalProperties": false,
                          "properties": {
                            "condition_id": {
                              "description": "Condition identifier.",
                              "type": "string"
                            },
                            "status": {
                              "description": "Tri-state evaluation result.",
                              "enum": [
                                "True",
                                "False",
                                "Unknown"
                              ],
                              "type": "string"
                            }
                          },
                          "required": [
                            "condition_id",
                            "status"
                          ],
                          "type": "object"
                        },
                        "type": "array"
                      }
                    },
                    "required": [
                      "gate_id",
                      "status",
                      "trace"
                    ],
                    "type": "object"
                  },
                  "type": "array"
                }
              ]
            },
            "gate_records": {
              "oneOf": [
                {
                  "type": "null"
                },
                {
                  "items": {
                    "additionalProperties": false,
                    "properties": {
                      "evaluation": {
                        "additionalProperties": false,
                        "properties": {
                          "gate_id": {
                            "description": "Gate identifier.",
                            "type": "string"
                          },
                          "status": {
                            "description": "Tri-state evaluation result.",
                            "enum": [
                              "True",
                              "False",
                              "Unknown"
                            ],
                            "type": "string"
                          },
                          "trace": {
                            "items": {
                              "additionalProperties": false,
                              "properties": {
                                "condition_id": {
                                  "description": "Condition identifier.",
                                  "type": "string"
                                },
                                "status": {
                                  "description": "Tri-state evaluation result.",
                                  "enum": [
                                    "True",
                                    "False",
                                    "Unknown"
                                  ],
                                  "type": "string"
                                }
                              },
                              "required": [
                                "condition_id",
                                "status"
                              ],
                              "type": "object"
                            },
                            "type": "array"
                          }
                        },
                        "required": [
                          "gate_id",
                          "status",
                          "trace"
                        ],
                        "type": "object"
                      },
                      "evidence": {
                        "items": {
                          "additionalProperties": false,
                          "properties": {
                            "condition_id": {
                              "description": "Condition identifier.",
                              "type": "string"
                            },
                            "result": {
                              "additionalProperties": false,
                              "properties": {
                                "content_type": {
                                  "oneOf": [
                                    {
                                      "type": "null"
                                    },
                                    {
                                      "description": "Evidence content type.",
                                      "type": "string"
                                    }
                                  ]
                                },
                                "error": {
                                  "oneOf": [
                                    {
                                      "type": "null"
                                    },
                                    {
                                      "additionalProperties": false,
                                      "properties": {
                                        "code": {
                                          "description": "Stable error code.",
                                          "type": "string"
                                        },
                                        "details": {
                                          "oneOf": [
                                            {
                                              "type": "null"
                                            },
                                            {
                                              "description": "Optional structured error details.",
                                              "type": [
                                                "null",
                                                "boolean",
                                                "number",
                                                "string",
                                                "array",
                                                "object"
                                              ]
                                            }
                                          ]
                                        },
                                        "message": {
                                          "description": "Error message.",
                                          "type": "string"
                                        }
                                      },
                                      "required": [
                                        "code",
                                        "message",
                                        "details"
                                      ],
                                      "type": "object"
                                    }
                                  ]
                                },
                                "evidence_anchor": {
                                  "oneOf": [
                                    {
                                      "type": "null"
                                    },
                                    {
                                      "additionalProperties": false,
                                      "properties": {
                                        "anchor_type": {
                                          "description": "Anchor type identifier.",
                                          "type": "string"
                                        },
                                        "anchor_value": {
                                          "description": "Anchor value.",
                                          "type": "string"
                                        }
                                      },
                                      "required": [
                                        "anchor_type",
                                        "anchor_value"
                                      ],
                                      "type": "object"
                                    }
                                  ]
                                },
                                "evidence_hash": {
                                  "oneOf": [
                                    {
                                      "type": "null"
                                    },
                                    {
                                      "additionalProperties": false,
                                      "properties": {
                                        "algorithm": {
                                          "enum": [
                                            "sha256"
                                          ],
                                          "type": "string"
                                        },
                                        "value": {
                                          "description": "Lowercase hex digest.",
                                          "type": "string"
                                        }
                                      },
                                      "required": [
                                        "algorithm",
                                        "value"
                                      ],
                                      "type": "object"
                                    }
                                  ]
                                },
                                "evidence_ref": {
                                  "oneOf": [
                                    {
                                      "type": "null"
                                    },
                                    {
                                      "additionalProperties": false,
                                      "properties": {
                                        "uri": {
                                          "description": "Evidence reference URI.",
                                          "type": "string"
                                        }
                                      },
                                      "required": [
                                        "uri"
                                      ],
                                      "type": "object"
                                    }
                                  ]
                                },
                                "lane": {
                                  "description": "Trust lane classification for evidence.",
                                  "enum": [
                                    "verified",
                                    "asserted"
                                  ],
                                  "type": "string"
                                },
                                "signature": {
                                  "oneOf": [
                                    {
                                      "type": "null"
                                    },
                                    {
                                      "additionalProperties": false,
                                      "properties": {
                                        "key_id": {
                                          "description": "Signing key identifier.",
                                          "type": "string"
                                        },
                                        "scheme": {
                                          "description": "Signature scheme identifier.",
                                          "type": "string"
                                        },
                                        "signature": {
                                          "items": {
                                            "maximum": 255,
                                            "minimum": 0,
                                            "type": "integer"
                                          },
                                          "type": "array"
                                        }
                                      },
                                      "required": [
                                        "scheme",
                                        "key_id",
                                        "signature"
                                      ],
                                      "type": "object"
                                    }
                                  ]
                                },
                                "value": {
                                  "oneOf": [
                                    {
                                      "type": "null"
                                    },
                                    {
                                      "oneOf": [
                                        {
                                          "additionalProperties": false,
                                          "properties": {
                                            "kind": {
                                              "const": "json"
                                            },
                                            "value": {
                                              "description": "Evidence JSON value.",
                                              "type": [
                                                "null",
                                                "boolean",
                                                "number",
                                                "string",
                                                "array",
                                                "object"
                                              ]
                                            }
                                          },
                                          "required": [
                                            "kind",
                                            "value"
                                          ],
                                          "type": "object"
                                        },
                                        {
                                          "additionalProperties": false,
                                          "properties": {
                                            "kind": {
                                              "const": "bytes"
                                            },
                                            "value": {
                                              "items": {
                                                "maximum": 255,
                                                "minimum": 0,
                                                "type": "integer"
                                              },
                                              "type": "array"
                                            }
                                          },
                                          "required": [
                                            "kind",
                                            "value"
                                          ],
                                          "type": "object"
                                        }
                                      ]
                                    }
                                  ]
                                }
                              },
                              "required": [
                                "value",
                                "lane",
                                "error",
                                "evidence_hash",
                                "evidence_ref",
                                "evidence_anchor",
                                "signature",
                                "content_type"
                              ],
                              "type": "object"
                            },
                            "status": {
                              "description": "Tri-state evaluation result.",
                              "enum": [
                                "True",
                                "False",
                                "Unknown"
                              ],
                              "type": "string"
                            }
                          },
                          "required": [
                            "condition_id",
                            "status",
                            "result"
                          ],
                          "type": "object"
                        },
                        "type": "array"
                      },
                      "stage_id": {
                        "description": "Stage identifier.",
                        "type": "string"
                      },
                      "trigger_id": {
                        "description": "Trigger identifier.",
                        "type": "string"
                      }
                    },
                    "required": [
                      "trigger_id",
                      "stage_id",
                      "evaluation",
                      "evidence"
                    ],
                    "type": "object"
                  },
                  "type": "array"
                }
              ]
            },
            "level": {
              "description": "Feedback disclosure level.",
              "enum": [
                "summary",
                "trace",
                "evidence"
              ],
              "type": "string"
            }
          },
          "required": [
            "level"
          ],
          "type": "object"
        }
      ]
    },
    "packets": {
      "items": {
        "additionalProperties": false,
        "properties": {
          "decision_id": {
            "description": "Decision identifier.",
            "type": "string"
          },
          "envelope": {
            "additionalProperties": false,
            "properties": {
              "content_hash": {
                "additionalProperties": false,
                "properties": {
                  "algorithm": {
                    "enum": [
                      "sha256"
                    ],
                    "type": "string"
                  },
                  "value": {
                    "description": "Lowercase hex digest.",
                    "type": "string"
                  }
                },
                "required": [
                  "algorithm",
                  "value"
                ],
                "type": "object"
              },
              "content_type": {
                "description": "Packet content type.",
                "type": "string"
              },
              "correlation_id": {
                "oneOf": [
                  {
                    "type": "null"
                  },
                  {
                    "description": "Correlation identifier.",
                    "type": "string"
                  }
                ]
              },
              "expiry": {
                "oneOf": [
                  {
                    "type": "null"
                  },
                  {
                    "oneOf": [
                      {
                        "additionalProperties": false,
                        "properties": {
                          "kind": {
                            "const": "unix_millis"
                          },
                          "value": {
                            "type": "integer"
                          }
                        },
                        "required": [
                          "kind",
                          "value"
                        ],
                        "type": "object"
                      },
                      {
                        "additionalProperties": false,
                        "properties": {
                          "kind": {
                            "const": "logical"
                          },
                          "value": {
                            "minimum": 0,
                            "type": "integer"
                          }
                        },
                        "required": [
                          "kind",
                          "value"
                        ],
                        "type": "object"
                      }
                    ]
                  }
                ]
              },
              "issued_at": {
                "oneOf": [
                  {
                    "additionalProperties": false,
                    "properties": {
                      "kind": {
                        "const": "unix_millis"
                      },
                      "value": {
                        "type": "integer"
                      }
                    },
                    "required": [
                      "kind",
                      "value"
                    ],
                    "type": "object"
                  },
                  {
                    "additionalProperties": false,
                    "properties": {
                      "kind": {
                        "const": "logical"
                      },
                      "value": {
                        "minimum": 0,
                        "type": "integer"
                      }
                    },
                    "required": [
                      "kind",
                      "value"
                    ],
                    "type": "object"
                  }
                ]
              },
              "packet_id": {
                "description": "Packet identifier.",
                "type": "string"
              },
              "run_id": {
                "description": "Run identifier.",
                "type": "string"
              },
              "scenario_id": {
                "description": "Scenario identifier.",
                "type": "string"
              },
              "schema_id": {
                "description": "Schema identifier.",
                "type": "string"
              },
              "stage_id": {
                "description": "Stage identifier.",
                "type": "string"
              },
              "visibility": {
                "additionalProperties": false,
                "properties": {
                  "labels": {
                    "description": "Visibility labels.",
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  },
                  "policy_tags": {
                    "description": "Policy tags.",
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                },
                "required": [
                  "labels",
                  "policy_tags"
                ],
                "type": "object"
              }
            },
            "required": [
              "scenario_id",
              "run_id",
              "stage_id",
              "packet_id",
              "schema_id",
              "content_type",
              "content_hash",
              "visibility",
              "expiry",
              "correlation_id",
              "issued_at"
            ],
            "type": "object"
          },
          "payload": {
            "oneOf": [
              {
                "additionalProperties": false,
                "properties": {
                  "kind": {
                    "const": "json"
                  },
                  "value": {
                    "description": "Inline JSON payload.",
                    "type": [
                      "null",
                      "boolean",
                      "number",
                      "string",
                      "array",
                      "object"
                    ]
                  }
                },
                "required": [
                  "kind",
                  "value"
                ],
                "type": "object"
              },
              {
                "additionalProperties": false,
                "properties": {
                  "bytes": {
                    "items": {
                      "maximum": 255,
                      "minimum": 0,
                      "type": "integer"
                    },
                    "type": "array"
                  },
                  "kind": {
                    "const": "bytes"
                  }
                },
                "required": [
                  "kind",
                  "bytes"
                ],
                "type": "object"
              },
              {
                "additionalProperties": false,
                "properties": {
                  "content_ref": {
                    "additionalProperties": false,
                    "properties": {
                      "content_hash": {
                        "additionalProperties": false,
                        "properties": {
                          "algorithm": {
                            "enum": [
                              "sha256"
                            ],
                            "type": "string"
                          },
                          "value": {
                            "description": "Lowercase hex digest.",
                            "type": "string"
                          }
                        },
                        "required": [
                          "algorithm",
                          "value"
                        ],
                        "type": "object"
                      },
                      "encryption": {
                        "oneOf": [
                          {
                            "type": "null"
                          },
                          {
                            "description": "Encryption metadata.",
                            "type": "string"
                          }
                        ]
                      },
                      "uri": {
                        "description": "Content URI.",
                        "type": "string"
                      }
                    },
                    "required": [
                      "uri",
                      "content_hash",
                      "encryption"
                    ],
                    "type": "object"
                  },
                  "kind": {
                    "const": "external"
                  }
                },
                "required": [
                  "kind",
                  "content_ref"
                ],
                "type": "object"
              }
            ]
          },
          "receipts": {
            "items": {
              "additionalProperties": false,
              "properties": {
                "dispatch_id": {
                  "description": "Dispatch identifier.",
                  "type": "string"
                },
                "dispatched_at": {
                  "oneOf": [
                    {
                      "additionalProperties": false,
                      "properties": {
                        "kind": {
                          "const": "unix_millis"
                        },
                        "value": {
                          "type": "integer"
                        }
                      },
                      "required": [
                        "kind",
                        "value"
                      ],
                      "type": "object"
                    },
                    {
                      "additionalProperties": false,
                      "properties": {
                        "kind": {
                          "const": "logical"
                        },
                        "value": {
                          "minimum": 0,
                          "type": "integer"
                        }
                      },
                      "required": [
                        "kind",
                        "value"
                      ],
                      "type": "object"
                    }
                  ]
                },
                "dispatcher": {
                  "description": "Dispatcher identifier.",
                  "type": "string"
                },
                "receipt_hash": {
                  "additionalProperties": false,
                  "properties": {
                    "algorithm": {
                      "enum": [
                        "sha256"
                      ],
                      "type": "string"
                    },
                    "value": {
                      "description": "Lowercase hex digest.",
                      "type": "string"
                    }
                  },
                  "required": [
                    "algorithm",
                    "value"
                  ],
                  "type": "object"
                },
                "target": {
                  "oneOf": [
                    {
                      "additionalProperties": false,
                      "properties": {
                        "agent_id": {
                          "description": "Agent identifier.",
                          "type": "string"
                        },
                        "kind": {
                          "const": "agent"
                        }
                      },
                      "required": [
                        "kind",
                        "agent_id"
                      ],
                      "type": "object"
                    },
                    {
                      "additionalProperties": false,
                      "properties": {
                        "kind": {
                          "const": "session"
                        },
                        "session_id": {
                          "description": "Session identifier.",
                          "type": "string"
                        }
                      },
                      "required": [
                        "kind",
                        "session_id"
                      ],
                      "type": "object"
                    },
                    {
                      "additionalProperties": false,
                      "properties": {
                        "kind": {
                          "const": "external"
                        },
                        "system": {
                          "description": "External system name.",
                          "type": "string"
                        },
                        "target": {
                          "description": "External system target.",
                          "type": "string"
                        }
                      },
                      "required": [
                        "kind",
                        "system",
                        "target"
                      ],
                      "type": "object"
                    },
                    {
                      "additionalProperties": false,
                      "properties": {
                        "channel": {
                          "description": "Broadcast channel identifier.",
                          "type": "string"
                        },
                        "kind": {
                          "const": "channel"
                        }
                      },
                      "required": [
                        "kind",
                        "channel"
                      ],
                      "type": "object"
                    }
                  ]
                }
              },
              "required": [
                "dispatch_id",
                "target",
                "receipt_hash",
                "dispatched_at",
                "dispatcher"
              ],
              "type": "object"
            },
            "type": "array"
          }
        },
        "required": [
          "envelope",
          "payload",
          "receipts",
          "decision_id"
        ],
        "type": "object"
      },
      "type": "array"
    },
    "status": {
      "enum": [
        "active",
        "completed",
        "failed"
      ],
      "type": "string"
    }
  },
  "required": [
    "decision",
    "packets",
    "status"
  ],
  "type": "object"
} as const;

export interface ScenarioSubmitRequest {
  /** Submission payload and metadata. */
  "request": Record<string, JsonValue>;
  /** Scenario identifier. */
  "scenario_id": string;
}

export interface ScenarioSubmitResponse {
  "record": Record<string, JsonValue>;
}

export const ScenarioSubmit_INPUT_SCHEMA = {
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "additionalProperties": false,
  "properties": {
    "request": {
      "additionalProperties": false,
      "description": "Submission payload and metadata.",
      "properties": {
        "content_type": {
          "description": "Submission content type.",
          "type": "string"
        },
        "correlation_id": {
          "oneOf": [
            {
              "type": "null"
            },
            {
              "description": "Correlation identifier.",
              "type": "string"
            }
          ]
        },
        "namespace_id": {
          "description": "Namespace identifier.",
          "minimum": 1,
          "type": "integer"
        },
        "payload": {
          "oneOf": [
            {
              "additionalProperties": false,
              "properties": {
                "kind": {
                  "const": "json"
                },
                "value": {
                  "description": "Inline JSON payload.",
                  "type": [
                    "null",
                    "boolean",
                    "number",
                    "string",
                    "array",
                    "object"
                  ]
                }
              },
              "required": [
                "kind",
                "value"
              ],
              "type": "object"
            },
            {
              "additionalProperties": false,
              "properties": {
                "bytes": {
                  "items": {
                    "maximum": 255,
                    "minimum": 0,
                    "type": "integer"
                  },
                  "type": "array"
                },
                "kind": {
                  "const": "bytes"
                }
              },
              "required": [
                "kind",
                "bytes"
              ],
              "type": "object"
            },
            {
              "additionalProperties": false,
              "properties": {
                "content_ref": {
                  "additionalProperties": false,
                  "properties": {
                    "content_hash": {
                      "additionalProperties": false,
                      "properties": {
                        "algorithm": {
                          "enum": [
                            "sha256"
                          ],
                          "type": "string"
                        },
                        "value": {
                          "description": "Lowercase hex digest.",
                          "type": "string"
                        }
                      },
                      "required": [
                        "algorithm",
                        "value"
                      ],
                      "type": "object"
                    },
                    "encryption": {
                      "oneOf": [
                        {
                          "type": "null"
                        },
                        {
                          "description": "Encryption metadata.",
                          "type": "string"
                        }
                      ]
                    },
                    "uri": {
                      "description": "Content URI.",
                      "type": "string"
                    }
                  },
                  "required": [
                    "uri",
                    "content_hash",
                    "encryption"
                  ],
                  "type": "object"
                },
                "kind": {
                  "const": "external"
                }
              },
              "required": [
                "kind",
                "content_ref"
              ],
              "type": "object"
            }
          ]
        },
        "run_id": {
          "description": "Run identifier.",
          "type": "string"
        },
        "submission_id": {
          "description": "Submission identifier.",
          "type": "string"
        },
        "submitted_at": {
          "oneOf": [
            {
              "additionalProperties": false,
              "properties": {
                "kind": {
                  "const": "unix_millis"
                },
                "value": {
                  "type": "integer"
                }
              },
              "required": [
                "kind",
                "value"
              ],
              "type": "object"
            },
            {
              "additionalProperties": false,
              "properties": {
                "kind": {
                  "const": "logical"
                },
                "value": {
                  "minimum": 0,
                  "type": "integer"
                }
              },
              "required": [
                "kind",
                "value"
              ],
              "type": "object"
            }
          ]
        },
        "tenant_id": {
          "description": "Tenant identifier.",
          "minimum": 1,
          "type": "integer"
        }
      },
      "required": [
        "tenant_id",
        "namespace_id",
        "run_id",
        "submission_id",
        "payload",
        "content_type",
        "submitted_at"
      ],
      "type": "object"
    },
    "scenario_id": {
      "description": "Scenario identifier.",
      "type": "string"
    }
  },
  "required": [
    "scenario_id",
    "request"
  ],
  "type": "object"
} as const;

export const ScenarioSubmit_OUTPUT_SCHEMA = {
  "additionalProperties": false,
  "properties": {
    "record": {
      "additionalProperties": false,
      "properties": {
        "content_hash": {
          "additionalProperties": false,
          "properties": {
            "algorithm": {
              "enum": [
                "sha256"
              ],
              "type": "string"
            },
            "value": {
              "description": "Lowercase hex digest.",
              "type": "string"
            }
          },
          "required": [
            "algorithm",
            "value"
          ],
          "type": "object"
        },
        "content_type": {
          "description": "Submission content type.",
          "type": "string"
        },
        "correlation_id": {
          "oneOf": [
            {
              "type": "null"
            },
            {
              "description": "Correlation identifier.",
              "type": "string"
            }
          ]
        },
        "payload": {
          "oneOf": [
            {
              "additionalProperties": false,
              "properties": {
                "kind": {
                  "const": "json"
                },
                "value": {
                  "description": "Inline JSON payload.",
                  "type": [
                    "null",
                    "boolean",
                    "number",
                    "string",
                    "array",
                    "object"
                  ]
                }
              },
              "required": [
                "kind",
                "value"
              ],
              "type": "object"
            },
            {
              "additionalProperties": false,
              "properties": {
                "bytes": {
                  "items": {
                    "maximum": 255,
                    "minimum": 0,
                    "type": "integer"
                  },
                  "type": "array"
                },
                "kind": {
                  "const": "bytes"
                }
              },
              "required": [
                "kind",
                "bytes"
              ],
              "type": "object"
            },
            {
              "additionalProperties": false,
              "properties": {
                "content_ref": {
                  "additionalProperties": false,
                  "properties": {
                    "content_hash": {
                      "additionalProperties": false,
                      "properties": {
                        "algorithm": {
                          "enum": [
                            "sha256"
                          ],
                          "type": "string"
                        },
                        "value": {
                          "description": "Lowercase hex digest.",
                          "type": "string"
                        }
                      },
                      "required": [
                        "algorithm",
                        "value"
                      ],
                      "type": "object"
                    },
                    "encryption": {
                      "oneOf": [
                        {
                          "type": "null"
                        },
                        {
                          "description": "Encryption metadata.",
                          "type": "string"
                        }
                      ]
                    },
                    "uri": {
                      "description": "Content URI.",
                      "type": "string"
                    }
                  },
                  "required": [
                    "uri",
                    "content_hash",
                    "encryption"
                  ],
                  "type": "object"
                },
                "kind": {
                  "const": "external"
                }
              },
              "required": [
                "kind",
                "content_ref"
              ],
              "type": "object"
            }
          ]
        },
        "run_id": {
          "description": "Run identifier.",
          "type": "string"
        },
        "submission_id": {
          "description": "Submission identifier.",
          "type": "string"
        },
        "submitted_at": {
          "oneOf": [
            {
              "additionalProperties": false,
              "properties": {
                "kind": {
                  "const": "unix_millis"
                },
                "value": {
                  "type": "integer"
                }
              },
              "required": [
                "kind",
                "value"
              ],
              "type": "object"
            },
            {
              "additionalProperties": false,
              "properties": {
                "kind": {
                  "const": "logical"
                },
                "value": {
                  "minimum": 0,
                  "type": "integer"
                }
              },
              "required": [
                "kind",
                "value"
              ],
              "type": "object"
            }
          ]
        }
      },
      "required": [
        "submission_id",
        "run_id",
        "payload",
        "content_type",
        "content_hash",
        "submitted_at",
        "correlation_id"
      ],
      "type": "object"
    }
  },
  "required": [
    "record"
  ],
  "type": "object"
} as const;

export interface ScenarioTriggerRequest {
  /** Scenario identifier. */
  "scenario_id": string;
  /** Trigger event payload. */
  "trigger": Record<string, JsonValue>;
}

export interface ScenarioTriggerResponse {
  "decision": Record<string, JsonValue>;
  "packets": Array<Record<string, JsonValue>>;
  /** Constraints: Allowed values: "active", "completed", "failed". */
  "status": "active" | "completed" | "failed";
}

export const ScenarioTrigger_INPUT_SCHEMA = {
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "additionalProperties": false,
  "properties": {
    "scenario_id": {
      "description": "Scenario identifier.",
      "type": "string"
    },
    "trigger": {
      "additionalProperties": false,
      "description": "Trigger event payload.",
      "properties": {
        "correlation_id": {
          "oneOf": [
            {
              "type": "null"
            },
            {
              "description": "Correlation identifier.",
              "type": "string"
            }
          ]
        },
        "kind": {
          "enum": [
            "agent_request_next",
            "tick",
            "external_event",
            "backend_event"
          ],
          "type": "string"
        },
        "namespace_id": {
          "description": "Namespace identifier.",
          "minimum": 1,
          "type": "integer"
        },
        "payload": {
          "oneOf": [
            {
              "type": "null"
            },
            {
              "oneOf": [
                {
                  "additionalProperties": false,
                  "properties": {
                    "kind": {
                      "const": "json"
                    },
                    "value": {
                      "description": "Inline JSON payload.",
                      "type": [
                        "null",
                        "boolean",
                        "number",
                        "string",
                        "array",
                        "object"
                      ]
                    }
                  },
                  "required": [
                    "kind",
                    "value"
                  ],
                  "type": "object"
                },
                {
                  "additionalProperties": false,
                  "properties": {
                    "bytes": {
                      "items": {
                        "maximum": 255,
                        "minimum": 0,
                        "type": "integer"
                      },
                      "type": "array"
                    },
                    "kind": {
                      "const": "bytes"
                    }
                  },
                  "required": [
                    "kind",
                    "bytes"
                  ],
                  "type": "object"
                },
                {
                  "additionalProperties": false,
                  "properties": {
                    "content_ref": {
                      "additionalProperties": false,
                      "properties": {
                        "content_hash": {
                          "additionalProperties": false,
                          "properties": {
                            "algorithm": {
                              "enum": [
                                "sha256"
                              ],
                              "type": "string"
                            },
                            "value": {
                              "description": "Lowercase hex digest.",
                              "type": "string"
                            }
                          },
                          "required": [
                            "algorithm",
                            "value"
                          ],
                          "type": "object"
                        },
                        "encryption": {
                          "oneOf": [
                            {
                              "type": "null"
                            },
                            {
                              "description": "Encryption metadata.",
                              "type": "string"
                            }
                          ]
                        },
                        "uri": {
                          "description": "Content URI.",
                          "type": "string"
                        }
                      },
                      "required": [
                        "uri",
                        "content_hash",
                        "encryption"
                      ],
                      "type": "object"
                    },
                    "kind": {
                      "const": "external"
                    }
                  },
                  "required": [
                    "kind",
                    "content_ref"
                  ],
                  "type": "object"
                }
              ]
            }
          ]
        },
        "run_id": {
          "description": "Run identifier.",
          "type": "string"
        },
        "source_id": {
          "description": "Trigger source identifier.",
          "type": "string"
        },
        "tenant_id": {
          "description": "Tenant identifier.",
          "minimum": 1,
          "type": "integer"
        },
        "time": {
          "oneOf": [
            {
              "additionalProperties": false,
              "properties": {
                "kind": {
                  "const": "unix_millis"
                },
                "value": {
                  "type": "integer"
                }
              },
              "required": [
                "kind",
                "value"
              ],
              "type": "object"
            },
            {
              "additionalProperties": false,
              "properties": {
                "kind": {
                  "const": "logical"
                },
                "value": {
                  "minimum": 0,
                  "type": "integer"
                }
              },
              "required": [
                "kind",
                "value"
              ],
              "type": "object"
            }
          ]
        },
        "trigger_id": {
          "description": "Trigger identifier.",
          "type": "string"
        }
      },
      "required": [
        "trigger_id",
        "tenant_id",
        "namespace_id",
        "run_id",
        "kind",
        "time",
        "source_id"
      ],
      "type": "object"
    }
  },
  "required": [
    "scenario_id",
    "trigger"
  ],
  "type": "object"
} as const;

export const ScenarioTrigger_OUTPUT_SCHEMA = {
  "additionalProperties": false,
  "properties": {
    "decision": {
      "additionalProperties": false,
      "properties": {
        "correlation_id": {
          "oneOf": [
            {
              "type": "null"
            },
            {
              "description": "Correlation identifier.",
              "type": "string"
            }
          ]
        },
        "decided_at": {
          "oneOf": [
            {
              "additionalProperties": false,
              "properties": {
                "kind": {
                  "const": "unix_millis"
                },
                "value": {
                  "type": "integer"
                }
              },
              "required": [
                "kind",
                "value"
              ],
              "type": "object"
            },
            {
              "additionalProperties": false,
              "properties": {
                "kind": {
                  "const": "logical"
                },
                "value": {
                  "minimum": 0,
                  "type": "integer"
                }
              },
              "required": [
                "kind",
                "value"
              ],
              "type": "object"
            }
          ]
        },
        "decision_id": {
          "description": "Decision identifier.",
          "type": "string"
        },
        "outcome": {
          "oneOf": [
            {
              "additionalProperties": false,
              "properties": {
                "kind": {
                  "const": "start"
                },
                "stage_id": {
                  "description": "Initial stage identifier.",
                  "type": "string"
                }
              },
              "required": [
                "kind",
                "stage_id"
              ],
              "type": "object"
            },
            {
              "additionalProperties": false,
              "properties": {
                "kind": {
                  "const": "complete"
                },
                "stage_id": {
                  "description": "Terminal stage identifier.",
                  "type": "string"
                }
              },
              "required": [
                "kind",
                "stage_id"
              ],
              "type": "object"
            },
            {
              "additionalProperties": false,
              "properties": {
                "from_stage": {
                  "description": "Previous stage identifier.",
                  "type": "string"
                },
                "kind": {
                  "const": "advance"
                },
                "timeout": {
                  "type": "boolean"
                },
                "to_stage": {
                  "description": "Next stage identifier.",
                  "type": "string"
                }
              },
              "required": [
                "kind",
                "from_stage",
                "to_stage",
                "timeout"
              ],
              "type": "object"
            },
            {
              "additionalProperties": false,
              "properties": {
                "kind": {
                  "const": "hold"
                },
                "summary": {
                  "additionalProperties": false,
                  "properties": {
                    "policy_tags": {
                      "description": "Policy tags applied to the summary.",
                      "items": {
                        "type": "string"
                      },
                      "type": "array"
                    },
                    "retry_hint": {
                      "oneOf": [
                        {
                          "type": "null"
                        },
                        {
                          "description": "Optional retry hint.",
                          "type": "string"
                        }
                      ]
                    },
                    "status": {
                      "description": "Summary status.",
                      "type": "string"
                    },
                    "unmet_gates": {
                      "items": {
                        "description": "Gate identifier.",
                        "type": "string"
                      },
                      "type": "array"
                    }
                  },
                  "required": [
                    "status",
                    "unmet_gates",
                    "retry_hint",
                    "policy_tags"
                  ],
                  "type": "object"
                }
              },
              "required": [
                "kind",
                "summary"
              ],
              "type": "object"
            },
            {
              "additionalProperties": false,
              "properties": {
                "kind": {
                  "const": "fail"
                },
                "reason": {
                  "description": "Failure reason.",
                  "type": "string"
                }
              },
              "required": [
                "kind",
                "reason"
              ],
              "type": "object"
            }
          ]
        },
        "seq": {
          "minimum": 0,
          "type": "integer"
        },
        "stage_id": {
          "description": "Stage identifier.",
          "type": "string"
        },
        "trigger_id": {
          "description": "Trigger identifier.",
          "type": "string"
        }
      },
      "required": [
        "decision_id",
        "seq",
        "trigger_id",
        "stage_id",
        "decided_at",
        "outcome",
        "correlation_id"
      ],
      "type": "object"
    },
    "packets": {
      "items": {
        "additionalProperties": false,
        "properties": {
          "decision_id": {
            "description": "Decision identifier.",
            "type": "string"
          },
          "envelope": {
            "additionalProperties": false,
            "properties": {
              "content_hash": {
                "additionalProperties": false,
                "properties": {
                  "algorithm": {
                    "enum": [
                      "sha256"
                    ],
                    "type": "string"
                  },
                  "value": {
                    "description": "Lowercase hex digest.",
                    "type": "string"
                  }
                },
                "required": [
                  "algorithm",
                  "value"
                ],
                "type": "object"
              },
              "content_type": {
                "description": "Packet content type.",
                "type": "string"
              },
              "correlation_id": {
                "oneOf": [
                  {
                    "type": "null"
                  },
                  {
                    "description": "Correlation identifier.",
                    "type": "string"
                  }
                ]
              },
              "expiry": {
                "oneOf": [
                  {
                    "type": "null"
                  },
                  {
                    "oneOf": [
                      {
                        "additionalProperties": false,
                        "properties": {
                          "kind": {
                            "const": "unix_millis"
                          },
                          "value": {
                            "type": "integer"
                          }
                        },
                        "required": [
                          "kind",
                          "value"
                        ],
                        "type": "object"
                      },
                      {
                        "additionalProperties": false,
                        "properties": {
                          "kind": {
                            "const": "logical"
                          },
                          "value": {
                            "minimum": 0,
                            "type": "integer"
                          }
                        },
                        "required": [
                          "kind",
                          "value"
                        ],
                        "type": "object"
                      }
                    ]
                  }
                ]
              },
              "issued_at": {
                "oneOf": [
                  {
                    "additionalProperties": false,
                    "properties": {
                      "kind": {
                        "const": "unix_millis"
                      },
                      "value": {
                        "type": "integer"
                      }
                    },
                    "required": [
                      "kind",
                      "value"
                    ],
                    "type": "object"
                  },
                  {
                    "additionalProperties": false,
                    "properties": {
                      "kind": {
                        "const": "logical"
                      },
                      "value": {
                        "minimum": 0,
                        "type": "integer"
                      }
                    },
                    "required": [
                      "kind",
                      "value"
                    ],
                    "type": "object"
                  }
                ]
              },
              "packet_id": {
                "description": "Packet identifier.",
                "type": "string"
              },
              "run_id": {
                "description": "Run identifier.",
                "type": "string"
              },
              "scenario_id": {
                "description": "Scenario identifier.",
                "type": "string"
              },
              "schema_id": {
                "description": "Schema identifier.",
                "type": "string"
              },
              "stage_id": {
                "description": "Stage identifier.",
                "type": "string"
              },
              "visibility": {
                "additionalProperties": false,
                "properties": {
                  "labels": {
                    "description": "Visibility labels.",
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  },
                  "policy_tags": {
                    "description": "Policy tags.",
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                },
                "required": [
                  "labels",
                  "policy_tags"
                ],
                "type": "object"
              }
            },
            "required": [
              "scenario_id",
              "run_id",
              "stage_id",
              "packet_id",
              "schema_id",
              "content_type",
              "content_hash",
              "visibility",
              "expiry",
              "correlation_id",
              "issued_at"
            ],
            "type": "object"
          },
          "payload": {
            "oneOf": [
              {
                "additionalProperties": false,
                "properties": {
                  "kind": {
                    "const": "json"
                  },
                  "value": {
                    "description": "Inline JSON payload.",
                    "type": [
                      "null",
                      "boolean",
                      "number",
                      "string",
                      "array",
                      "object"
                    ]
                  }
                },
                "required": [
                  "kind",
                  "value"
                ],
                "type": "object"
              },
              {
                "additionalProperties": false,
                "properties": {
                  "bytes": {
                    "items": {
                      "maximum": 255,
                      "minimum": 0,
                      "type": "integer"
                    },
                    "type": "array"
                  },
                  "kind": {
                    "const": "bytes"
                  }
                },
                "required": [
                  "kind",
                  "bytes"
                ],
                "type": "object"
              },
              {
                "additionalProperties": false,
                "properties": {
                  "content_ref": {
                    "additionalProperties": false,
                    "properties": {
                      "content_hash": {
                        "additionalProperties": false,
                        "properties": {
                          "algorithm": {
                            "enum": [
                              "sha256"
                            ],
                            "type": "string"
                          },
                          "value": {
                            "description": "Lowercase hex digest.",
                            "type": "string"
                          }
                        },
                        "required": [
                          "algorithm",
                          "value"
                        ],
                        "type": "object"
                      },
                      "encryption": {
                        "oneOf": [
                          {
                            "type": "null"
                          },
                          {
                            "description": "Encryption metadata.",
                            "type": "string"
                          }
                        ]
                      },
                      "uri": {
                        "description": "Content URI.",
                        "type": "string"
                      }
                    },
                    "required": [
                      "uri",
                      "content_hash",
                      "encryption"
                    ],
                    "type": "object"
                  },
                  "kind": {
                    "const": "external"
                  }
                },
                "required": [
                  "kind",
                  "content_ref"
                ],
                "type": "object"
              }
            ]
          },
          "receipts": {
            "items": {
              "additionalProperties": false,
              "properties": {
                "dispatch_id": {
                  "description": "Dispatch identifier.",
                  "type": "string"
                },
                "dispatched_at": {
                  "oneOf": [
                    {
                      "additionalProperties": false,
                      "properties": {
                        "kind": {
                          "const": "unix_millis"
                        },
                        "value": {
                          "type": "integer"
                        }
                      },
                      "required": [
                        "kind",
                        "value"
                      ],
                      "type": "object"
                    },
                    {
                      "additionalProperties": false,
                      "properties": {
                        "kind": {
                          "const": "logical"
                        },
                        "value": {
                          "minimum": 0,
                          "type": "integer"
                        }
                      },
                      "required": [
                        "kind",
                        "value"
                      ],
                      "type": "object"
                    }
                  ]
                },
                "dispatcher": {
                  "description": "Dispatcher identifier.",
                  "type": "string"
                },
                "receipt_hash": {
                  "additionalProperties": false,
                  "properties": {
                    "algorithm": {
                      "enum": [
                        "sha256"
                      ],
                      "type": "string"
                    },
                    "value": {
                      "description": "Lowercase hex digest.",
                      "type": "string"
                    }
                  },
                  "required": [
                    "algorithm",
                    "value"
                  ],
                  "type": "object"
                },
                "target": {
                  "oneOf": [
                    {
                      "additionalProperties": false,
                      "properties": {
                        "agent_id": {
                          "description": "Agent identifier.",
                          "type": "string"
                        },
                        "kind": {
                          "const": "agent"
                        }
                      },
                      "required": [
                        "kind",
                        "agent_id"
                      ],
                      "type": "object"
                    },
                    {
                      "additionalProperties": false,
                      "properties": {
                        "kind": {
                          "const": "session"
                        },
                        "session_id": {
                          "description": "Session identifier.",
                          "type": "string"
                        }
                      },
                      "required": [
                        "kind",
                        "session_id"
                      ],
                      "type": "object"
                    },
                    {
                      "additionalProperties": false,
                      "properties": {
                        "kind": {
                          "const": "external"
                        },
                        "system": {
                          "description": "External system name.",
                          "type": "string"
                        },
                        "target": {
                          "description": "External system target.",
                          "type": "string"
                        }
                      },
                      "required": [
                        "kind",
                        "system",
                        "target"
                      ],
                      "type": "object"
                    },
                    {
                      "additionalProperties": false,
                      "properties": {
                        "channel": {
                          "description": "Broadcast channel identifier.",
                          "type": "string"
                        },
                        "kind": {
                          "const": "channel"
                        }
                      },
                      "required": [
                        "kind",
                        "channel"
                      ],
                      "type": "object"
                    }
                  ]
                }
              },
              "required": [
                "dispatch_id",
                "target",
                "receipt_hash",
                "dispatched_at",
                "dispatcher"
              ],
              "type": "object"
            },
            "type": "array"
          }
        },
        "required": [
          "envelope",
          "payload",
          "receipts",
          "decision_id"
        ],
        "type": "object"
      },
      "type": "array"
    },
    "status": {
      "enum": [
        "active",
        "completed",
        "failed"
      ],
      "type": "string"
    }
  },
  "required": [
    "decision",
    "packets",
    "status"
  ],
  "type": "object"
} as const;

export interface EvidenceQueryRequest {
  /** Evidence context used for evaluation. */
  "context": Record<string, JsonValue>;
  /** Evidence query payload. */
  "query": Record<string, JsonValue>;
}

export interface EvidenceQueryResponse {
  "result": Record<string, JsonValue>;
}

export const EvidenceQuery_INPUT_SCHEMA = {
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "additionalProperties": false,
  "properties": {
    "context": {
      "additionalProperties": false,
      "description": "Evidence context used for evaluation.",
      "properties": {
        "correlation_id": {
          "oneOf": [
            {
              "type": "null"
            },
            {
              "description": "Correlation identifier.",
              "type": "string"
            }
          ]
        },
        "namespace_id": {
          "description": "Namespace identifier.",
          "minimum": 1,
          "type": "integer"
        },
        "run_id": {
          "description": "Run identifier.",
          "type": "string"
        },
        "scenario_id": {
          "description": "Scenario identifier.",
          "type": "string"
        },
        "stage_id": {
          "description": "Stage identifier.",
          "type": "string"
        },
        "tenant_id": {
          "description": "Tenant identifier.",
          "minimum": 1,
          "type": "integer"
        },
        "trigger_id": {
          "description": "Trigger identifier.",
          "type": "string"
        },
        "trigger_time": {
          "oneOf": [
            {
              "additionalProperties": false,
              "properties": {
                "kind": {
                  "const": "unix_millis"
                },
                "value": {
                  "type": "integer"
                }
              },
              "required": [
                "kind",
                "value"
              ],
              "type": "object"
            },
            {
              "additionalProperties": false,
              "properties": {
                "kind": {
                  "const": "logical"
                },
                "value": {
                  "minimum": 0,
                  "type": "integer"
                }
              },
              "required": [
                "kind",
                "value"
              ],
              "type": "object"
            }
          ]
        }
      },
      "required": [
        "tenant_id",
        "namespace_id",
        "run_id",
        "scenario_id",
        "stage_id",
        "trigger_id",
        "trigger_time"
      ],
      "type": "object"
    },
    "query": {
      "additionalProperties": false,
      "description": "Evidence query payload.",
      "properties": {
        "check_id": {
          "description": "Provider check identifier.",
          "type": "string"
        },
        "params": {
          "description": "Provider-specific parameter payload.",
          "type": [
            "null",
            "boolean",
            "number",
            "string",
            "array",
            "object"
          ]
        },
        "provider_id": {
          "description": "Evidence provider identifier.",
          "type": "string"
        }
      },
      "required": [
        "provider_id",
        "check_id"
      ],
      "type": "object"
    }
  },
  "required": [
    "query",
    "context"
  ],
  "type": "object"
} as const;

export const EvidenceQuery_OUTPUT_SCHEMA = {
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "additionalProperties": false,
  "properties": {
    "result": {
      "additionalProperties": false,
      "properties": {
        "content_type": {
          "oneOf": [
            {
              "type": "null"
            },
            {
              "description": "Evidence content type.",
              "type": "string"
            }
          ]
        },
        "error": {
          "oneOf": [
            {
              "type": "null"
            },
            {
              "additionalProperties": false,
              "properties": {
                "code": {
                  "description": "Stable error code.",
                  "type": "string"
                },
                "details": {
                  "oneOf": [
                    {
                      "type": "null"
                    },
                    {
                      "description": "Optional structured error details.",
                      "type": [
                        "null",
                        "boolean",
                        "number",
                        "string",
                        "array",
                        "object"
                      ]
                    }
                  ]
                },
                "message": {
                  "description": "Error message.",
                  "type": "string"
                }
              },
              "required": [
                "code",
                "message",
                "details"
              ],
              "type": "object"
            }
          ]
        },
        "evidence_anchor": {
          "oneOf": [
            {
              "type": "null"
            },
            {
              "additionalProperties": false,
              "properties": {
                "anchor_type": {
                  "description": "Anchor type identifier.",
                  "type": "string"
                },
                "anchor_value": {
                  "description": "Anchor value.",
                  "type": "string"
                }
              },
              "required": [
                "anchor_type",
                "anchor_value"
              ],
              "type": "object"
            }
          ]
        },
        "evidence_hash": {
          "oneOf": [
            {
              "type": "null"
            },
            {
              "additionalProperties": false,
              "properties": {
                "algorithm": {
                  "enum": [
                    "sha256"
                  ],
                  "type": "string"
                },
                "value": {
                  "description": "Lowercase hex digest.",
                  "type": "string"
                }
              },
              "required": [
                "algorithm",
                "value"
              ],
              "type": "object"
            }
          ]
        },
        "evidence_ref": {
          "oneOf": [
            {
              "type": "null"
            },
            {
              "additionalProperties": false,
              "properties": {
                "uri": {
                  "description": "Evidence reference URI.",
                  "type": "string"
                }
              },
              "required": [
                "uri"
              ],
              "type": "object"
            }
          ]
        },
        "lane": {
          "description": "Trust lane classification for evidence.",
          "enum": [
            "verified",
            "asserted"
          ],
          "type": "string"
        },
        "signature": {
          "oneOf": [
            {
              "type": "null"
            },
            {
              "additionalProperties": false,
              "properties": {
                "key_id": {
                  "description": "Signing key identifier.",
                  "type": "string"
                },
                "scheme": {
                  "description": "Signature scheme identifier.",
                  "type": "string"
                },
                "signature": {
                  "items": {
                    "maximum": 255,
                    "minimum": 0,
                    "type": "integer"
                  },
                  "type": "array"
                }
              },
              "required": [
                "scheme",
                "key_id",
                "signature"
              ],
              "type": "object"
            }
          ]
        },
        "value": {
          "oneOf": [
            {
              "type": "null"
            },
            {
              "oneOf": [
                {
                  "additionalProperties": false,
                  "properties": {
                    "kind": {
                      "const": "json"
                    },
                    "value": {
                      "description": "Evidence JSON value.",
                      "type": [
                        "null",
                        "boolean",
                        "number",
                        "string",
                        "array",
                        "object"
                      ]
                    }
                  },
                  "required": [
                    "kind",
                    "value"
                  ],
                  "type": "object"
                },
                {
                  "additionalProperties": false,
                  "properties": {
                    "kind": {
                      "const": "bytes"
                    },
                    "value": {
                      "items": {
                        "maximum": 255,
                        "minimum": 0,
                        "type": "integer"
                      },
                      "type": "array"
                    }
                  },
                  "required": [
                    "kind",
                    "value"
                  ],
                  "type": "object"
                }
              ]
            }
          ]
        }
      },
      "required": [
        "value",
        "lane",
        "error",
        "evidence_hash",
        "evidence_ref",
        "evidence_anchor",
        "signature",
        "content_type"
      ],
      "type": "object"
    }
  },
  "required": [
    "result"
  ],
  "type": "object"
} as const;

export interface RunpackExportRequest {
  /** Timestamp recorded in the manifest. */
  "generated_at": Record<string, JsonValue>;
  /** Generate a verification report artifact. */
  "include_verification": boolean;
  /** Optional override for the manifest file name. */
  "manifest_name"?: null | string;
  /** Namespace identifier. Constraints: Minimum: 1. */
  "namespace_id": number;
  /** Optional output directory (required for filesystem export). */
  "output_dir"?: null | string;
  /** Run identifier. */
  "run_id": string;
  /** Scenario identifier. */
  "scenario_id": string;
  /** Tenant identifier. Constraints: Minimum: 1. */
  "tenant_id": number;
}

export interface RunpackExportResponse {
  "manifest": Record<string, JsonValue>;
  "report": Record<string, JsonValue> | null;
  /** Optional storage URI for managed runpack storage backends. */
  "storage_uri"?: null | string;
}

export const RunpackExport_INPUT_SCHEMA = {
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "additionalProperties": false,
  "properties": {
    "generated_at": {
      "description": "Timestamp recorded in the manifest.",
      "oneOf": [
        {
          "additionalProperties": false,
          "properties": {
            "kind": {
              "const": "unix_millis"
            },
            "value": {
              "type": "integer"
            }
          },
          "required": [
            "kind",
            "value"
          ],
          "type": "object"
        },
        {
          "additionalProperties": false,
          "properties": {
            "kind": {
              "const": "logical"
            },
            "value": {
              "minimum": 0,
              "type": "integer"
            }
          },
          "required": [
            "kind",
            "value"
          ],
          "type": "object"
        }
      ]
    },
    "include_verification": {
      "description": "Generate a verification report artifact.",
      "type": "boolean"
    },
    "manifest_name": {
      "description": "Optional override for the manifest file name.",
      "oneOf": [
        {
          "type": "null"
        },
        {
          "description": "Manifest file name.",
          "type": "string"
        }
      ]
    },
    "namespace_id": {
      "description": "Namespace identifier.",
      "minimum": 1,
      "type": "integer"
    },
    "output_dir": {
      "description": "Optional output directory (required for filesystem export).",
      "oneOf": [
        {
          "type": "null"
        },
        {
          "description": "Output directory path.",
          "type": "string"
        }
      ]
    },
    "run_id": {
      "description": "Run identifier.",
      "type": "string"
    },
    "scenario_id": {
      "description": "Scenario identifier.",
      "type": "string"
    },
    "tenant_id": {
      "description": "Tenant identifier.",
      "minimum": 1,
      "type": "integer"
    }
  },
  "required": [
    "scenario_id",
    "tenant_id",
    "namespace_id",
    "run_id",
    "generated_at",
    "include_verification"
  ],
  "type": "object"
} as const;

export const RunpackExport_OUTPUT_SCHEMA = {
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "additionalProperties": false,
  "properties": {
    "manifest": {
      "additionalProperties": false,
      "properties": {
        "artifacts": {
          "items": {
            "additionalProperties": false,
            "properties": {
              "artifact_id": {
                "description": "Artifact identifier.",
                "type": "string"
              },
              "content_type": {
                "oneOf": [
                  {
                    "type": "null"
                  },
                  {
                    "description": "Artifact content type.",
                    "type": "string"
                  }
                ]
              },
              "hash": {
                "additionalProperties": false,
                "properties": {
                  "algorithm": {
                    "enum": [
                      "sha256"
                    ],
                    "type": "string"
                  },
                  "value": {
                    "description": "Lowercase hex digest.",
                    "type": "string"
                  }
                },
                "required": [
                  "algorithm",
                  "value"
                ],
                "type": "object"
              },
              "kind": {
                "enum": [
                  "scenario_spec",
                  "trigger_log",
                  "gate_eval_log",
                  "decision_log",
                  "packet_log",
                  "dispatch_log",
                  "evidence_log",
                  "submission_log",
                  "tool_transcript",
                  "verifier_report",
                  "custom"
                ],
                "type": "string"
              },
              "path": {
                "description": "Runpack-relative artifact path.",
                "type": "string"
              },
              "required": {
                "type": "boolean"
              }
            },
            "required": [
              "artifact_id",
              "kind",
              "path",
              "content_type",
              "hash",
              "required"
            ],
            "type": "object"
          },
          "type": "array"
        },
        "generated_at": {
          "oneOf": [
            {
              "additionalProperties": false,
              "properties": {
                "kind": {
                  "const": "unix_millis"
                },
                "value": {
                  "type": "integer"
                }
              },
              "required": [
                "kind",
                "value"
              ],
              "type": "object"
            },
            {
              "additionalProperties": false,
              "properties": {
                "kind": {
                  "const": "logical"
                },
                "value": {
                  "minimum": 0,
                  "type": "integer"
                }
              },
              "required": [
                "kind",
                "value"
              ],
              "type": "object"
            }
          ]
        },
        "hash_algorithm": {
          "enum": [
            "sha256"
          ],
          "type": "string"
        },
        "integrity": {
          "additionalProperties": false,
          "properties": {
            "file_hashes": {
              "items": {
                "additionalProperties": false,
                "properties": {
                  "hash": {
                    "additionalProperties": false,
                    "properties": {
                      "algorithm": {
                        "enum": [
                          "sha256"
                        ],
                        "type": "string"
                      },
                      "value": {
                        "description": "Lowercase hex digest.",
                        "type": "string"
                      }
                    },
                    "required": [
                      "algorithm",
                      "value"
                    ],
                    "type": "object"
                  },
                  "path": {
                    "description": "Runpack-relative artifact path.",
                    "type": "string"
                  }
                },
                "required": [
                  "path",
                  "hash"
                ],
                "type": "object"
              },
              "type": "array"
            },
            "root_hash": {
              "additionalProperties": false,
              "properties": {
                "algorithm": {
                  "enum": [
                    "sha256"
                  ],
                  "type": "string"
                },
                "value": {
                  "description": "Lowercase hex digest.",
                  "type": "string"
                }
              },
              "required": [
                "algorithm",
                "value"
              ],
              "type": "object"
            }
          },
          "required": [
            "file_hashes",
            "root_hash"
          ],
          "type": "object"
        },
        "manifest_version": {
          "description": "Runpack manifest version.",
          "type": "string"
        },
        "namespace_id": {
          "description": "Namespace identifier.",
          "minimum": 1,
          "type": "integer"
        },
        "run_id": {
          "description": "Run identifier.",
          "type": "string"
        },
        "scenario_id": {
          "description": "Scenario identifier.",
          "type": "string"
        },
        "security": {
          "additionalProperties": false,
          "properties": {
            "dev_permissive": {
              "type": "boolean"
            },
            "namespace_authority": {
              "description": "Namespace authority mode label.",
              "type": "string"
            }
          },
          "required": [
            "dev_permissive",
            "namespace_authority"
          ],
          "type": "object"
        },
        "spec_hash": {
          "additionalProperties": false,
          "properties": {
            "algorithm": {
              "enum": [
                "sha256"
              ],
              "type": "string"
            },
            "value": {
              "description": "Lowercase hex digest.",
              "type": "string"
            }
          },
          "required": [
            "algorithm",
            "value"
          ],
          "type": "object"
        },
        "tenant_id": {
          "description": "Tenant identifier.",
          "minimum": 1,
          "type": "integer"
        },
        "verifier_mode": {
          "enum": [
            "offline_strict",
            "offline_with_fetch"
          ],
          "type": "string"
        }
      },
      "required": [
        "manifest_version",
        "generated_at",
        "tenant_id",
        "namespace_id",
        "scenario_id",
        "run_id",
        "spec_hash",
        "hash_algorithm",
        "verifier_mode",
        "integrity",
        "artifacts"
      ],
      "type": "object"
    },
    "report": {
      "oneOf": [
        {
          "type": "null"
        },
        {
          "additionalProperties": false,
          "properties": {
            "checked_files": {
              "minimum": 0,
              "type": "integer"
            },
            "errors": {
              "description": "Verification error messages.",
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            "status": {
              "description": "Runpack verification status.",
              "enum": [
                "pass",
                "fail"
              ],
              "type": "string"
            }
          },
          "required": [
            "status",
            "checked_files",
            "errors"
          ],
          "type": "object"
        }
      ]
    },
    "storage_uri": {
      "description": "Optional storage URI for managed runpack storage backends.",
      "oneOf": [
        {
          "type": "null"
        },
        {
          "type": "string"
        }
      ]
    }
  },
  "required": [
    "manifest",
    "report"
  ],
  "type": "object"
} as const;

export interface RunpackVerifyRequest {
  /** Manifest path relative to runpack root. */
  "manifest_path": string;
  /** Runpack root directory. */
  "runpack_dir": string;
}

export interface RunpackVerifyResponse {
  "report": Record<string, JsonValue>;
  /** Runpack verification status. Constraints: Allowed values: "pass", "fail". */
  "status": "pass" | "fail";
}

export const RunpackVerify_INPUT_SCHEMA = {
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "additionalProperties": false,
  "properties": {
    "manifest_path": {
      "description": "Manifest path relative to runpack root.",
      "type": "string"
    },
    "runpack_dir": {
      "description": "Runpack root directory.",
      "type": "string"
    }
  },
  "required": [
    "runpack_dir",
    "manifest_path"
  ],
  "type": "object"
} as const;

export const RunpackVerify_OUTPUT_SCHEMA = {
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "additionalProperties": false,
  "properties": {
    "report": {
      "additionalProperties": false,
      "properties": {
        "checked_files": {
          "minimum": 0,
          "type": "integer"
        },
        "errors": {
          "description": "Verification error messages.",
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "status": {
          "description": "Runpack verification status.",
          "enum": [
            "pass",
            "fail"
          ],
          "type": "string"
        }
      },
      "required": [
        "status",
        "checked_files",
        "errors"
      ],
      "type": "object"
    },
    "status": {
      "description": "Runpack verification status.",
      "enum": [
        "pass",
        "fail"
      ],
      "type": "string"
    }
  },
  "required": [
    "report",
    "status"
  ],
  "type": "object"
} as const;

export interface ProvidersListRequest {
  [key: string]: never;
}

export interface ProvidersListResponse {
  "providers": Array<Record<string, JsonValue>>;
}

export const ProvidersList_INPUT_SCHEMA = {
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "additionalProperties": false,
  "properties": {},
  "required": [],
  "type": "object"
} as const;

export const ProvidersList_OUTPUT_SCHEMA = {
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "additionalProperties": false,
  "properties": {
    "providers": {
      "items": {
        "additionalProperties": false,
        "properties": {
          "checks": {
            "items": {
              "description": "Check identifier.",
              "type": "string"
            },
            "type": "array"
          },
          "provider_id": {
            "description": "Provider identifier.",
            "type": "string"
          },
          "transport": {
            "description": "Provider transport type.",
            "enum": [
              "builtin",
              "mcp"
            ],
            "type": "string"
          }
        },
        "required": [
          "provider_id",
          "transport",
          "checks"
        ],
        "type": "object"
      },
      "type": "array"
    }
  },
  "required": [
    "providers"
  ],
  "type": "object"
} as const;

export interface ProviderContractGetRequest {
  /** Provider identifier. */
  "provider_id": string;
}

export interface ProviderContractGetResponse {
  "contract": Record<string, JsonValue>;
  "contract_hash": Record<string, JsonValue>;
  /** Provider identifier. */
  "provider_id": string;
  /** Contract source origin. Constraints: Allowed values: "builtin", "file". */
  "source": "builtin" | "file";
  /** Optional contract version label. */
  "version": null | string;
}

export const ProviderContractGet_INPUT_SCHEMA = {
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "additionalProperties": false,
  "properties": {
    "provider_id": {
      "description": "Provider identifier.",
      "type": "string"
    }
  },
  "required": [
    "provider_id"
  ],
  "type": "object"
} as const;

export const ProviderContractGet_OUTPUT_SCHEMA = {
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "additionalProperties": false,
  "properties": {
    "contract": {
      "additionalProperties": false,
      "properties": {
        "checks": {
          "items": {
            "additionalProperties": false,
            "properties": {
              "allowed_comparators": {
                "description": "Comparator allow-list for this check.",
                "items": {
                  "description": "Comparator applied to evidence values.",
                  "enum": [
                    "equals",
                    "not_equals",
                    "greater_than",
                    "greater_than_or_equal",
                    "less_than",
                    "less_than_or_equal",
                    "lex_greater_than",
                    "lex_greater_than_or_equal",
                    "lex_less_than",
                    "lex_less_than_or_equal",
                    "contains",
                    "in_set",
                    "deep_equals",
                    "deep_not_equals",
                    "exists",
                    "not_exists"
                  ],
                  "type": "string"
                },
                "type": "array"
              },
              "anchor_types": {
                "description": "Anchor types emitted by this check.",
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              "check_id": {
                "description": "Check identifier.",
                "type": "string"
              },
              "content_types": {
                "description": "Content types for check output.",
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              "description": {
                "description": "Check description.",
                "type": "string"
              },
              "determinism": {
                "description": "Determinism classification for provider checks.",
                "enum": [
                  "deterministic",
                  "time_dependent",
                  "external"
                ],
                "type": "string"
              },
              "examples": {
                "items": {
                  "additionalProperties": false,
                  "properties": {
                    "description": {
                      "description": "Short example description.",
                      "type": "string"
                    },
                    "params": {
                      "description": "Example params payload.",
                      "type": [
                        "null",
                        "boolean",
                        "number",
                        "string",
                        "array",
                        "object"
                      ]
                    },
                    "result": {
                      "description": "Example result value.",
                      "type": [
                        "null",
                        "boolean",
                        "number",
                        "string",
                        "array",
                        "object"
                      ]
                    }
                  },
                  "required": [
                    "description",
                    "params",
                    "result"
                  ],
                  "type": "object"
                },
                "type": "array"
              },
              "params_required": {
                "description": "Whether params are required for this check.",
                "type": "boolean"
              },
              "params_schema": {
                "description": "JSON schema for check params.",
                "type": [
                  "null",
                  "boolean",
                  "number",
                  "string",
                  "array",
                  "object"
                ]
              },
              "result_schema": {
                "description": "JSON schema for check result values.",
                "type": [
                  "null",
                  "boolean",
                  "number",
                  "string",
                  "array",
                  "object"
                ]
              }
            },
            "required": [
              "check_id",
              "description",
              "determinism",
              "params_required",
              "params_schema",
              "result_schema",
              "allowed_comparators",
              "anchor_types",
              "content_types",
              "examples"
            ],
            "type": "object"
          },
          "type": "array"
        },
        "config_schema": {
          "description": "Provider configuration schema.",
          "type": [
            "null",
            "boolean",
            "number",
            "string",
            "array",
            "object"
          ]
        },
        "description": {
          "description": "Provider description.",
          "type": "string"
        },
        "name": {
          "description": "Provider display name.",
          "type": "string"
        },
        "notes": {
          "description": "Provider notes and guidance.",
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "provider_id": {
          "description": "Provider identifier.",
          "type": "string"
        },
        "transport": {
          "description": "Provider transport kind.",
          "enum": [
            "builtin",
            "mcp"
          ],
          "type": "string"
        }
      },
      "required": [
        "provider_id",
        "name",
        "description",
        "transport",
        "config_schema",
        "checks",
        "notes"
      ],
      "type": "object"
    },
    "contract_hash": {
      "additionalProperties": false,
      "properties": {
        "algorithm": {
          "enum": [
            "sha256"
          ],
          "type": "string"
        },
        "value": {
          "description": "Lowercase hex digest.",
          "type": "string"
        }
      },
      "required": [
        "algorithm",
        "value"
      ],
      "type": "object"
    },
    "provider_id": {
      "description": "Provider identifier.",
      "type": "string"
    },
    "source": {
      "description": "Contract source origin.",
      "enum": [
        "builtin",
        "file"
      ],
      "type": "string"
    },
    "version": {
      "description": "Optional contract version label.",
      "oneOf": [
        {
          "type": "null"
        },
        {
          "type": "string"
        }
      ]
    }
  },
  "required": [
    "provider_id",
    "contract",
    "contract_hash",
    "source",
    "version"
  ],
  "type": "object"
} as const;

export interface ProviderCheckSchemaGetRequest {
  /** Provider check identifier. */
  "check_id": string;
  /** Provider identifier. */
  "provider_id": string;
}

export interface ProviderCheckSchemaGetResponse {
  /** Comparator allow-list for this check. */
  "allowed_comparators": Array<"equals" | "not_equals" | "greater_than" | "greater_than_or_equal" | "less_than" | "less_than_or_equal" | "lex_greater_than" | "lex_greater_than_or_equal" | "lex_less_than" | "lex_less_than_or_equal" | "contains" | "in_set" | "deep_equals" | "deep_not_equals" | "exists" | "not_exists">;
  /** Anchor types emitted by this check. */
  "anchor_types": Array<string>;
  /** Check identifier. */
  "check_id": string;
  /** Content types for check output. */
  "content_types": Array<string>;
  "contract_hash": Record<string, JsonValue>;
  /** Determinism classification for provider checks. Constraints: Allowed values: "deterministic", */
  /** "time_dependent", "external". */
  "determinism": "deterministic" | "time_dependent" | "external";
  "examples": Array<Record<string, JsonValue>>;
  /** Whether params are required for this check. */
  "params_required": boolean;
  /** JSON schema for check params. */
  "params_schema": Array<JsonValue> | Record<string, JsonValue> | boolean | null | number | string;
  /** Provider identifier. */
  "provider_id": string;
  /** JSON schema for check result value. */
  "result_schema": Array<JsonValue> | Record<string, JsonValue> | boolean | null | number | string;
}

export const ProviderCheckSchemaGet_INPUT_SCHEMA = {
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "additionalProperties": false,
  "properties": {
    "check_id": {
      "description": "Provider check identifier.",
      "type": "string"
    },
    "provider_id": {
      "description": "Provider identifier.",
      "type": "string"
    }
  },
  "required": [
    "provider_id",
    "check_id"
  ],
  "type": "object"
} as const;

export const ProviderCheckSchemaGet_OUTPUT_SCHEMA = {
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "additionalProperties": false,
  "properties": {
    "allowed_comparators": {
      "description": "Comparator allow-list for this check.",
      "items": {
        "description": "Comparator applied to evidence values.",
        "enum": [
          "equals",
          "not_equals",
          "greater_than",
          "greater_than_or_equal",
          "less_than",
          "less_than_or_equal",
          "lex_greater_than",
          "lex_greater_than_or_equal",
          "lex_less_than",
          "lex_less_than_or_equal",
          "contains",
          "in_set",
          "deep_equals",
          "deep_not_equals",
          "exists",
          "not_exists"
        ],
        "type": "string"
      },
      "type": "array"
    },
    "anchor_types": {
      "description": "Anchor types emitted by this check.",
      "items": {
        "type": "string"
      },
      "type": "array"
    },
    "check_id": {
      "description": "Check identifier.",
      "type": "string"
    },
    "content_types": {
      "description": "Content types for check output.",
      "items": {
        "type": "string"
      },
      "type": "array"
    },
    "contract_hash": {
      "additionalProperties": false,
      "properties": {
        "algorithm": {
          "enum": [
            "sha256"
          ],
          "type": "string"
        },
        "value": {
          "description": "Lowercase hex digest.",
          "type": "string"
        }
      },
      "required": [
        "algorithm",
        "value"
      ],
      "type": "object"
    },
    "determinism": {
      "description": "Determinism classification for provider checks.",
      "enum": [
        "deterministic",
        "time_dependent",
        "external"
      ],
      "type": "string"
    },
    "examples": {
      "items": {
        "additionalProperties": false,
        "properties": {
          "description": {
            "description": "Short example description.",
            "type": "string"
          },
          "params": {
            "description": "Example params payload.",
            "type": [
              "null",
              "boolean",
              "number",
              "string",
              "array",
              "object"
            ]
          },
          "result": {
            "description": "Example result value.",
            "type": [
              "null",
              "boolean",
              "number",
              "string",
              "array",
              "object"
            ]
          }
        },
        "required": [
          "description",
          "params",
          "result"
        ],
        "type": "object"
      },
      "type": "array"
    },
    "params_required": {
      "description": "Whether params are required for this check.",
      "type": "boolean"
    },
    "params_schema": {
      "description": "JSON schema for check params.",
      "type": [
        "null",
        "boolean",
        "number",
        "string",
        "array",
        "object"
      ]
    },
    "provider_id": {
      "description": "Provider identifier.",
      "type": "string"
    },
    "result_schema": {
      "description": "JSON schema for check result value.",
      "type": [
        "null",
        "boolean",
        "number",
        "string",
        "array",
        "object"
      ]
    }
  },
  "required": [
    "provider_id",
    "check_id",
    "params_required",
    "params_schema",
    "result_schema",
    "allowed_comparators",
    "determinism",
    "anchor_types",
    "content_types",
    "examples",
    "contract_hash"
  ],
  "type": "object"
} as const;

export interface SchemasRegisterRequest {
  "record": Record<string, JsonValue>;
}

export interface SchemasRegisterResponse {
  "record": Record<string, JsonValue>;
}

export const SchemasRegister_INPUT_SCHEMA = {
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "additionalProperties": false,
  "properties": {
    "record": {
      "additionalProperties": false,
      "properties": {
        "created_at": {
          "oneOf": [
            {
              "additionalProperties": false,
              "properties": {
                "kind": {
                  "const": "unix_millis"
                },
                "value": {
                  "type": "integer"
                }
              },
              "required": [
                "kind",
                "value"
              ],
              "type": "object"
            },
            {
              "additionalProperties": false,
              "properties": {
                "kind": {
                  "const": "logical"
                },
                "value": {
                  "minimum": 0,
                  "type": "integer"
                }
              },
              "required": [
                "kind",
                "value"
              ],
              "type": "object"
            }
          ]
        },
        "description": {
          "oneOf": [
            {
              "type": "null"
            },
            {
              "description": "Optional schema description.",
              "type": "string"
            }
          ]
        },
        "namespace_id": {
          "description": "Namespace identifier.",
          "minimum": 1,
          "type": "integer"
        },
        "schema": {
          "description": "JSON Schema payload.",
          "type": [
            "null",
            "boolean",
            "number",
            "string",
            "array",
            "object"
          ]
        },
        "schema_id": {
          "description": "Data shape identifier.",
          "type": "string"
        },
        "signing": {
          "additionalProperties": false,
          "properties": {
            "algorithm": {
              "default": null,
              "oneOf": [
                {
                  "type": "null"
                },
                {
                  "description": "Signature algorithm label.",
                  "type": "string"
                }
              ]
            },
            "key_id": {
              "description": "Signing key identifier.",
              "type": "string"
            },
            "signature": {
              "description": "Schema signature string.",
              "type": "string"
            }
          },
          "required": [
            "key_id",
            "signature"
          ],
          "type": "object"
        },
        "tenant_id": {
          "description": "Tenant identifier.",
          "minimum": 1,
          "type": "integer"
        },
        "version": {
          "description": "Data shape version identifier.",
          "type": "string"
        }
      },
      "required": [
        "tenant_id",
        "namespace_id",
        "schema_id",
        "version",
        "schema",
        "description",
        "created_at"
      ],
      "type": "object"
    }
  },
  "required": [
    "record"
  ],
  "type": "object"
} as const;

export const SchemasRegister_OUTPUT_SCHEMA = {
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "additionalProperties": false,
  "properties": {
    "record": {
      "additionalProperties": false,
      "properties": {
        "created_at": {
          "oneOf": [
            {
              "additionalProperties": false,
              "properties": {
                "kind": {
                  "const": "unix_millis"
                },
                "value": {
                  "type": "integer"
                }
              },
              "required": [
                "kind",
                "value"
              ],
              "type": "object"
            },
            {
              "additionalProperties": false,
              "properties": {
                "kind": {
                  "const": "logical"
                },
                "value": {
                  "minimum": 0,
                  "type": "integer"
                }
              },
              "required": [
                "kind",
                "value"
              ],
              "type": "object"
            }
          ]
        },
        "description": {
          "oneOf": [
            {
              "type": "null"
            },
            {
              "description": "Optional schema description.",
              "type": "string"
            }
          ]
        },
        "namespace_id": {
          "description": "Namespace identifier.",
          "minimum": 1,
          "type": "integer"
        },
        "schema": {
          "description": "JSON Schema payload.",
          "type": [
            "null",
            "boolean",
            "number",
            "string",
            "array",
            "object"
          ]
        },
        "schema_id": {
          "description": "Data shape identifier.",
          "type": "string"
        },
        "signing": {
          "additionalProperties": false,
          "properties": {
            "algorithm": {
              "default": null,
              "oneOf": [
                {
                  "type": "null"
                },
                {
                  "description": "Signature algorithm label.",
                  "type": "string"
                }
              ]
            },
            "key_id": {
              "description": "Signing key identifier.",
              "type": "string"
            },
            "signature": {
              "description": "Schema signature string.",
              "type": "string"
            }
          },
          "required": [
            "key_id",
            "signature"
          ],
          "type": "object"
        },
        "tenant_id": {
          "description": "Tenant identifier.",
          "minimum": 1,
          "type": "integer"
        },
        "version": {
          "description": "Data shape version identifier.",
          "type": "string"
        }
      },
      "required": [
        "tenant_id",
        "namespace_id",
        "schema_id",
        "version",
        "schema",
        "description",
        "created_at"
      ],
      "type": "object"
    }
  },
  "required": [
    "record"
  ],
  "type": "object"
} as const;

export interface SchemasListRequest {
  "cursor"?: null | string;
  /** Maximum number of records to return. Constraints: Minimum: 1; Maximum: 1000. */
  "limit"?: number;
  /** Namespace identifier. Constraints: Minimum: 1. */
  "namespace_id": number;
  /** Tenant identifier. Constraints: Minimum: 1. */
  "tenant_id": number;
}

export interface SchemasListResponse {
  "items": Array<Record<string, JsonValue>>;
  "next_token": null | string;
}

export const SchemasList_INPUT_SCHEMA = {
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "additionalProperties": false,
  "properties": {
    "cursor": {
      "oneOf": [
        {
          "type": "null"
        },
        {
          "description": "Pagination cursor.",
          "type": "string"
        }
      ]
    },
    "limit": {
      "description": "Maximum number of records to return.",
      "maximum": 1000,
      "minimum": 1,
      "type": "integer"
    },
    "namespace_id": {
      "description": "Namespace identifier.",
      "minimum": 1,
      "type": "integer"
    },
    "tenant_id": {
      "description": "Tenant identifier.",
      "minimum": 1,
      "type": "integer"
    }
  },
  "required": [
    "tenant_id",
    "namespace_id"
  ],
  "type": "object"
} as const;

export const SchemasList_OUTPUT_SCHEMA = {
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "additionalProperties": false,
  "properties": {
    "items": {
      "items": {
        "additionalProperties": false,
        "properties": {
          "created_at": {
            "oneOf": [
              {
                "additionalProperties": false,
                "properties": {
                  "kind": {
                    "const": "unix_millis"
                  },
                  "value": {
                    "type": "integer"
                  }
                },
                "required": [
                  "kind",
                  "value"
                ],
                "type": "object"
              },
              {
                "additionalProperties": false,
                "properties": {
                  "kind": {
                    "const": "logical"
                  },
                  "value": {
                    "minimum": 0,
                    "type": "integer"
                  }
                },
                "required": [
                  "kind",
                  "value"
                ],
                "type": "object"
              }
            ]
          },
          "description": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "description": "Optional schema description.",
                "type": "string"
              }
            ]
          },
          "namespace_id": {
            "description": "Namespace identifier.",
            "minimum": 1,
            "type": "integer"
          },
          "schema": {
            "description": "JSON Schema payload.",
            "type": [
              "null",
              "boolean",
              "number",
              "string",
              "array",
              "object"
            ]
          },
          "schema_id": {
            "description": "Data shape identifier.",
            "type": "string"
          },
          "signing": {
            "additionalProperties": false,
            "properties": {
              "algorithm": {
                "default": null,
                "oneOf": [
                  {
                    "type": "null"
                  },
                  {
                    "description": "Signature algorithm label.",
                    "type": "string"
                  }
                ]
              },
              "key_id": {
                "description": "Signing key identifier.",
                "type": "string"
              },
              "signature": {
                "description": "Schema signature string.",
                "type": "string"
              }
            },
            "required": [
              "key_id",
              "signature"
            ],
            "type": "object"
          },
          "tenant_id": {
            "description": "Tenant identifier.",
            "minimum": 1,
            "type": "integer"
          },
          "version": {
            "description": "Data shape version identifier.",
            "type": "string"
          }
        },
        "required": [
          "tenant_id",
          "namespace_id",
          "schema_id",
          "version",
          "schema",
          "description",
          "created_at"
        ],
        "type": "object"
      },
      "type": "array"
    },
    "next_token": {
      "oneOf": [
        {
          "type": "null"
        },
        {
          "description": "Pagination token for the next page.",
          "type": "string"
        }
      ]
    }
  },
  "required": [
    "items",
    "next_token"
  ],
  "type": "object"
} as const;

export interface SchemasGetRequest {
  /** Namespace identifier. Constraints: Minimum: 1. */
  "namespace_id": number;
  /** Data shape identifier. */
  "schema_id": string;
  /** Tenant identifier. Constraints: Minimum: 1. */
  "tenant_id": number;
  /** Data shape version identifier. */
  "version": string;
}

export interface SchemasGetResponse {
  "record": Record<string, JsonValue>;
}

export const SchemasGet_INPUT_SCHEMA = {
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "additionalProperties": false,
  "properties": {
    "namespace_id": {
      "description": "Namespace identifier.",
      "minimum": 1,
      "type": "integer"
    },
    "schema_id": {
      "description": "Data shape identifier.",
      "type": "string"
    },
    "tenant_id": {
      "description": "Tenant identifier.",
      "minimum": 1,
      "type": "integer"
    },
    "version": {
      "description": "Data shape version identifier.",
      "type": "string"
    }
  },
  "required": [
    "tenant_id",
    "namespace_id",
    "schema_id",
    "version"
  ],
  "type": "object"
} as const;

export const SchemasGet_OUTPUT_SCHEMA = {
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "additionalProperties": false,
  "properties": {
    "record": {
      "additionalProperties": false,
      "properties": {
        "created_at": {
          "oneOf": [
            {
              "additionalProperties": false,
              "properties": {
                "kind": {
                  "const": "unix_millis"
                },
                "value": {
                  "type": "integer"
                }
              },
              "required": [
                "kind",
                "value"
              ],
              "type": "object"
            },
            {
              "additionalProperties": false,
              "properties": {
                "kind": {
                  "const": "logical"
                },
                "value": {
                  "minimum": 0,
                  "type": "integer"
                }
              },
              "required": [
                "kind",
                "value"
              ],
              "type": "object"
            }
          ]
        },
        "description": {
          "oneOf": [
            {
              "type": "null"
            },
            {
              "description": "Optional schema description.",
              "type": "string"
            }
          ]
        },
        "namespace_id": {
          "description": "Namespace identifier.",
          "minimum": 1,
          "type": "integer"
        },
        "schema": {
          "description": "JSON Schema payload.",
          "type": [
            "null",
            "boolean",
            "number",
            "string",
            "array",
            "object"
          ]
        },
        "schema_id": {
          "description": "Data shape identifier.",
          "type": "string"
        },
        "signing": {
          "additionalProperties": false,
          "properties": {
            "algorithm": {
              "default": null,
              "oneOf": [
                {
                  "type": "null"
                },
                {
                  "description": "Signature algorithm label.",
                  "type": "string"
                }
              ]
            },
            "key_id": {
              "description": "Signing key identifier.",
              "type": "string"
            },
            "signature": {
              "description": "Schema signature string.",
              "type": "string"
            }
          },
          "required": [
            "key_id",
            "signature"
          ],
          "type": "object"
        },
        "tenant_id": {
          "description": "Tenant identifier.",
          "minimum": 1,
          "type": "integer"
        },
        "version": {
          "description": "Data shape version identifier.",
          "type": "string"
        }
      },
      "required": [
        "tenant_id",
        "namespace_id",
        "schema_id",
        "version",
        "schema",
        "description",
        "created_at"
      ],
      "type": "object"
    }
  },
  "required": [
    "record"
  ],
  "type": "object"
} as const;

export interface ScenariosListRequest {
  "cursor"?: null | string;
  /** Maximum number of records to return. Constraints: Minimum: 1; Maximum: 1000. */
  "limit"?: number;
  /** Namespace identifier. Constraints: Minimum: 1. */
  "namespace_id": number;
  /** Tenant identifier. Constraints: Minimum: 1. */
  "tenant_id": number;
}

export interface ScenariosListResponse {
  "items": Array<Record<string, JsonValue>>;
  "next_token": null | string;
}

export const ScenariosList_INPUT_SCHEMA = {
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "additionalProperties": false,
  "properties": {
    "cursor": {
      "oneOf": [
        {
          "type": "null"
        },
        {
          "description": "Pagination cursor.",
          "type": "string"
        }
      ]
    },
    "limit": {
      "description": "Maximum number of records to return.",
      "maximum": 1000,
      "minimum": 1,
      "type": "integer"
    },
    "namespace_id": {
      "description": "Namespace identifier.",
      "minimum": 1,
      "type": "integer"
    },
    "tenant_id": {
      "description": "Tenant identifier.",
      "minimum": 1,
      "type": "integer"
    }
  },
  "required": [
    "tenant_id",
    "namespace_id"
  ],
  "type": "object"
} as const;

export const ScenariosList_OUTPUT_SCHEMA = {
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "additionalProperties": false,
  "properties": {
    "items": {
      "items": {
        "additionalProperties": false,
        "properties": {
          "namespace_id": {
            "description": "Namespace identifier.",
            "minimum": 1,
            "type": "integer"
          },
          "scenario_id": {
            "description": "Scenario identifier.",
            "type": "string"
          },
          "spec_hash": {
            "additionalProperties": false,
            "properties": {
              "algorithm": {
                "enum": [
                  "sha256"
                ],
                "type": "string"
              },
              "value": {
                "description": "Lowercase hex digest.",
                "type": "string"
              }
            },
            "required": [
              "algorithm",
              "value"
            ],
            "type": "object"
          }
        },
        "required": [
          "scenario_id",
          "namespace_id",
          "spec_hash"
        ],
        "type": "object"
      },
      "type": "array"
    },
    "next_token": {
      "oneOf": [
        {
          "type": "null"
        },
        {
          "description": "Pagination token for the next page.",
          "type": "string"
        }
      ]
    }
  },
  "required": [
    "items",
    "next_token"
  ],
  "type": "object"
} as const;

export interface PrecheckRequest {
  "data_shape": Record<string, JsonValue>;
  /** Namespace identifier. Constraints: Minimum: 1. */
  "namespace_id": number;
  /** Asserted data payload. */
  "payload": Array<JsonValue> | Record<string, JsonValue> | boolean | null | number | string;
  "scenario_id"?: null | string;
  "spec"?: JsonValue;
  "stage_id"?: null | string;
  /** Tenant identifier. Constraints: Minimum: 1. */
  "tenant_id": number;
}

export interface PrecheckResponse {
  "decision": Record<string, JsonValue>;
  "gate_evaluations": Array<Record<string, JsonValue>>;
}

export const Precheck_INPUT_SCHEMA = {
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "additionalProperties": false,
  "properties": {
    "data_shape": {
      "additionalProperties": false,
      "properties": {
        "schema_id": {
          "description": "Data shape identifier.",
          "type": "string"
        },
        "version": {
          "description": "Data shape version identifier.",
          "type": "string"
        }
      },
      "required": [
        "schema_id",
        "version"
      ],
      "type": "object"
    },
    "namespace_id": {
      "description": "Namespace identifier.",
      "minimum": 1,
      "type": "integer"
    },
    "payload": {
      "description": "Asserted data payload.",
      "type": [
        "null",
        "boolean",
        "number",
        "string",
        "array",
        "object"
      ]
    },
    "scenario_id": {
      "oneOf": [
        {
          "type": "null"
        },
        {
          "description": "Scenario identifier.",
          "type": "string"
        }
      ]
    },
    "spec": {
      "oneOf": [
        {
          "type": "null"
        },
        {
          "$ref": "decision-gate://contract/schemas/scenario.schema.json"
        }
      ]
    },
    "stage_id": {
      "oneOf": [
        {
          "type": "null"
        },
        {
          "description": "Stage identifier override.",
          "type": "string"
        }
      ]
    },
    "tenant_id": {
      "description": "Tenant identifier.",
      "minimum": 1,
      "type": "integer"
    }
  },
  "required": [
    "tenant_id",
    "namespace_id",
    "data_shape",
    "payload"
  ],
  "type": "object"
} as const;

export const Precheck_OUTPUT_SCHEMA = {
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "additionalProperties": false,
  "properties": {
    "decision": {
      "oneOf": [
        {
          "additionalProperties": false,
          "properties": {
            "kind": {
              "const": "start"
            },
            "stage_id": {
              "description": "Initial stage identifier.",
              "type": "string"
            }
          },
          "required": [
            "kind",
            "stage_id"
          ],
          "type": "object"
        },
        {
          "additionalProperties": false,
          "properties": {
            "kind": {
              "const": "complete"
            },
            "stage_id": {
              "description": "Terminal stage identifier.",
              "type": "string"
            }
          },
          "required": [
            "kind",
            "stage_id"
          ],
          "type": "object"
        },
        {
          "additionalProperties": false,
          "properties": {
            "from_stage": {
              "description": "Previous stage identifier.",
              "type": "string"
            },
            "kind": {
              "const": "advance"
            },
            "timeout": {
              "type": "boolean"
            },
            "to_stage": {
              "description": "Next stage identifier.",
              "type": "string"
            }
          },
          "required": [
            "kind",
            "from_stage",
            "to_stage",
            "timeout"
          ],
          "type": "object"
        },
        {
          "additionalProperties": false,
          "properties": {
            "kind": {
              "const": "hold"
            },
            "summary": {
              "additionalProperties": false,
              "properties": {
                "policy_tags": {
                  "description": "Policy tags applied to the summary.",
                  "items": {
                    "type": "string"
                  },
                  "type": "array"
                },
                "retry_hint": {
                  "oneOf": [
                    {
                      "type": "null"
                    },
                    {
                      "description": "Optional retry hint.",
                      "type": "string"
                    }
                  ]
                },
                "status": {
                  "description": "Summary status.",
                  "type": "string"
                },
                "unmet_gates": {
                  "items": {
                    "description": "Gate identifier.",
                    "type": "string"
                  },
                  "type": "array"
                }
              },
              "required": [
                "status",
                "unmet_gates",
                "retry_hint",
                "policy_tags"
              ],
              "type": "object"
            }
          },
          "required": [
            "kind",
            "summary"
          ],
          "type": "object"
        },
        {
          "additionalProperties": false,
          "properties": {
            "kind": {
              "const": "fail"
            },
            "reason": {
              "description": "Failure reason.",
              "type": "string"
            }
          },
          "required": [
            "kind",
            "reason"
          ],
          "type": "object"
        }
      ]
    },
    "gate_evaluations": {
      "items": {
        "additionalProperties": false,
        "properties": {
          "gate_id": {
            "description": "Gate identifier.",
            "type": "string"
          },
          "status": {
            "description": "Tri-state evaluation result.",
            "enum": [
              "True",
              "False",
              "Unknown"
            ],
            "type": "string"
          },
          "trace": {
            "items": {
              "additionalProperties": false,
              "properties": {
                "condition_id": {
                  "description": "Condition identifier.",
                  "type": "string"
                },
                "status": {
                  "description": "Tri-state evaluation result.",
                  "enum": [
                    "True",
                    "False",
                    "Unknown"
                  ],
                  "type": "string"
                }
              },
              "required": [
                "condition_id",
                "status"
              ],
              "type": "object"
            },
            "type": "array"
          }
        },
        "required": [
          "gate_id",
          "status",
          "trace"
        ],
        "type": "object"
      },
      "type": "array"
    }
  },
  "required": [
    "decision",
    "gate_evaluations"
  ],
  "type": "object"
} as const;

export interface DecisionGateDocsSearchRequest {
  /** Maximum number of sections to return (default 3, hard cap 10). Constraints: Minimum: 1; Maximum: */
  /** 10. */
  "max_sections"?: number;
  /** Search query for documentation sections. */
  "query": string;
}

export interface DecisionGateDocsSearchResponse {
  "docs_covered": Array<Record<string, JsonValue>>;
  "sections": Array<Record<string, JsonValue>>;
  /** Role-aware follow-up prompts. */
  "suggested_followups": Array<string>;
}

export const DecisionGateDocsSearch_INPUT_SCHEMA = {
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "additionalProperties": false,
  "properties": {
    "max_sections": {
      "description": "Maximum number of sections to return (default 3, hard cap 10).",
      "maximum": 10,
      "minimum": 1,
      "type": "integer"
    },
    "query": {
      "description": "Search query for documentation sections.",
      "type": "string"
    }
  },
  "required": [
    "query"
  ],
  "type": "object"
} as const;

export const DecisionGateDocsSearch_OUTPUT_SCHEMA = {
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "additionalProperties": false,
  "properties": {
    "docs_covered": {
      "items": {
        "additionalProperties": false,
        "properties": {
          "doc_id": {
            "description": "Document identifier.",
            "type": "string"
          },
          "doc_role": {
            "description": "Documentation role for search weighting and display.",
            "enum": [
              "reasoning",
              "decision",
              "ontology",
              "pattern"
            ],
            "type": "string"
          },
          "doc_title": {
            "description": "Document title.",
            "type": "string"
          }
        },
        "required": [
          "doc_id",
          "doc_title",
          "doc_role"
        ],
        "type": "object"
      },
      "type": "array"
    },
    "sections": {
      "items": {
        "additionalProperties": false,
        "properties": {
          "content": {
            "description": "Section content (raw Markdown).",
            "type": "string"
          },
          "doc_id": {
            "description": "Document identifier.",
            "type": "string"
          },
          "doc_role": {
            "description": "Documentation role for search weighting and display.",
            "enum": [
              "reasoning",
              "decision",
              "ontology",
              "pattern"
            ],
            "type": "string"
          },
          "doc_title": {
            "description": "Document title.",
            "type": "string"
          },
          "heading": {
            "description": "Section heading.",
            "type": "string"
          },
          "rank": {
            "minimum": 0,
            "type": "integer"
          }
        },
        "required": [
          "rank",
          "doc_id",
          "doc_title",
          "doc_role",
          "heading",
          "content"
        ],
        "type": "object"
      },
      "type": "array"
    },
    "suggested_followups": {
      "description": "Role-aware follow-up prompts.",
      "items": {
        "type": "string"
      },
      "type": "array"
    }
  },
  "required": [
    "sections",
    "docs_covered",
    "suggested_followups"
  ],
  "type": "object"
} as const;

export abstract class GeneratedDecisionGateClient {
  protected abstract callTool<T>(name: string, arguments_: object): Promise<T>;

  /**
   * Register a ScenarioSpec, validate it, and return the canonical hash used for integrity checks.
   *
   * Notes:
   * - Use before starting runs; scenario_id becomes the stable handle for later calls.
   * - Validates stage/gate/condition IDs, RET trees, and condition references.
   * - Spec hash is deterministic; store it for audit and runpack integrity.
   * - Fails closed on invalid specs or duplicate scenario IDs.
   *
   * Examples:
   * - Register the example scenario spec.
   *   Input:
   *   ```json
   *   {
   *     "spec": {
   *       "conditions": [
   *         {
   *           "comparator": "equals",
   *           "condition_id": "env_is_prod",
   *           "expected": "production",
   *           "policy_tags": [],
   *           "query": {
   *             "check_id": "get",
   *             "params": {
   *               "key": "DEPLOY_ENV"
   *             },
   *             "provider_id": "env"
   *           }
   *         },
   *         {
   *           "comparator": "equals",
   *           "condition_id": "after_freeze",
   *           "expected": true,
   *           "policy_tags": [],
   *           "query": {
   *             "check_id": "after",
   *             "params": {
   *               "timestamp": 1710000000000
   *             },
   *             "provider_id": "time"
   *           }
   *         }
   *       ],
   *       "default_tenant_id": null,
   *       "namespace_id": 1,
   *       "policies": [],
   *       "scenario_id": "example-scenario",
   *       "schemas": [],
   *       "spec_version": "v1",
   *       "stages": [
   *         {
   *           "advance_to": {
   *             "kind": "terminal"
   *           },
   *           "entry_packets": [
   *             {
   *               "content_type": "application/json",
   *               "expiry": null,
   *               "packet_id": "packet-hello",
   *               "payload": {
   *                 "kind": "json",
   *                 "value": {
   *                   "message": "hello",
   *                   "purpose": "scenario entry packet"
   *                 }
   *               },
   *               "policy_tags": [],
   *               "schema_id": "schema-hello",
   *               "visibility_labels": [
   *                 "public"
   *               ]
   *             }
   *           ],
   *           "gates": [
   *             {
   *               "gate_id": "env_gate",
   *               "requirement": {
   *                 "Condition": "env_is_prod"
   *               }
   *             },
   *             {
   *               "gate_id": "time_gate",
   *               "requirement": {
   *                 "Condition": "after_freeze"
   *               }
   *             }
   *           ],
   *           "on_timeout": "fail",
   *           "stage_id": "main",
   *           "timeout": null
   *         }
   *       ]
   *     }
   *   }
   *   ```
   *   Output:
   *   ```json
   *   {
   *     "scenario_id": "example-scenario",
   *     "spec_hash": {
   *       "algorithm": "sha256",
   *       "value": "5c3a5b6bce0f4a2c9e22c4fa6a1e6d8d90b0f2dfed1b7f1e9b3d3b3d1f0c9b21"
   *     }
   *   }
   *   ```
   */
  public scenario_define(request: ScenarioDefineRequest): Promise<ScenarioDefineResponse> {
    return this.callTool<ScenarioDefineResponse>("scenario_define", request);
  }

  /**
   * Create a new run state for a scenario and optionally emit entry packets.
   *
   * Notes:
   * - Requires RunConfig (tenant_id, run_id, scenario_id, dispatch_targets).
   * - Use started_at to record the caller-supplied start timestamp.
   * - If issue_entry_packets is true, entry packets are disclosed immediately.
   * - Fails closed if run_id already exists or scenario_id is unknown.
   *
   * Examples:
   * - Start a run for the example scenario and issue entry packets.
   *   Input:
   *   ```json
   *   {
   *     "issue_entry_packets": true,
   *     "run_config": {
   *       "dispatch_targets": [
   *         {
   *           "agent_id": "agent-alpha",
   *           "kind": "agent"
   *         }
   *       ],
   *       "namespace_id": 1,
   *       "policy_tags": [],
   *       "run_id": "run-0001",
   *       "scenario_id": "example-scenario",
   *       "tenant_id": 1
   *     },
   *     "scenario_id": "example-scenario",
   *     "started_at": {
   *       "kind": "unix_millis",
   *       "value": 1710000000000
   *     }
   *   }
   *   ```
   *   Output:
   *   ```json
   *   {
   *     "current_stage_id": "main",
   *     "decisions": [],
   *     "dispatch_targets": [
   *       {
   *         "agent_id": "agent-alpha",
   *         "kind": "agent"
   *       }
   *     ],
   *     "gate_evals": [],
   *     "namespace_id": 1,
   *     "packets": [],
   *     "run_id": "run-0001",
   *     "scenario_id": "example-scenario",
   *     "spec_hash": {
   *       "algorithm": "sha256",
   *       "value": "5c3a5b6bce0f4a2c9e22c4fa6a1e6d8d90b0f2dfed1b7f1e9b3d3b3d1f0c9b21"
   *     },
   *     "stage_entered_at": {
   *       "kind": "unix_millis",
   *       "value": 1710000000000
   *     },
   *     "status": "active",
   *     "submissions": [],
   *     "tenant_id": 1,
   *     "tool_calls": [],
   *     "triggers": []
   *   }
   *   ```
   */
  public scenario_start(request: ScenarioStartRequest): Promise<ScenarioStartResponse> {
    return this.callTool<ScenarioStartResponse>("scenario_start", request);
  }

  /**
   * Fetch a read-only run snapshot and safe summary without changing state.
   *
   * Notes:
   * - Use for polling or UI state; does not evaluate gates.
   * - Safe summaries omit evidence values and may include retry hints.
   * - Returns issued packet IDs to help track disclosures.
   *
   * Examples:
   * - Poll run status without advancing the run.
   *   Input:
   *   ```json
   *   {
   *     "request": {
   *       "correlation_id": null,
   *       "namespace_id": 1,
   *       "requested_at": {
   *         "kind": "unix_millis",
   *         "value": 1710000000000
   *       },
   *       "run_id": "run-0001",
   *       "tenant_id": 1
   *     },
   *     "scenario_id": "example-scenario"
   *   }
   *   ```
   *   Output:
   *   ```json
   *   {
   *     "current_stage_id": "main",
   *     "issued_packet_ids": [],
   *     "last_decision": null,
   *     "run_id": "run-0001",
   *     "safe_summary": null,
   *     "scenario_id": "example-scenario",
   *     "status": "active"
   *   }
   *   ```
   */
  public scenario_status(request: ScenarioStatusRequest): Promise<ScenarioStatusResponse> {
    return this.callTool<ScenarioStatusResponse>("scenario_status", request);
  }

  /**
   * Evaluate gates in response to an agent-driven next request.
   *
   * Notes:
   * - Idempotent by trigger_id; repeated calls return the same decision.
   * - Records decision, evidence, and packet disclosures in run state.
   * - Requires an active run; completed or failed runs do not advance.
   * - Optional feedback can include gate trace or evidence when permitted by server feedback policy.
   *
   * Examples:
   * - Evaluate the next agent-driven step for a run.
   *   Input:
   *   ```json
   *   {
   *     "request": {
   *       "agent_id": "agent-alpha",
   *       "correlation_id": null,
   *       "namespace_id": 1,
   *       "run_id": "run-0001",
   *       "tenant_id": 1,
   *       "time": {
   *         "kind": "unix_millis",
   *         "value": 1710000000000
   *       },
   *       "trigger_id": "trigger-0001"
   *     },
   *     "scenario_id": "example-scenario"
   *   }
   *   ```
   *   Output:
   *   ```json
   *   {
   *     "decision": {
   *       "correlation_id": null,
   *       "decided_at": {
   *         "kind": "unix_millis",
   *         "value": 1710000000000
   *       },
   *       "decision_id": "decision-0001",
   *       "outcome": {
   *         "kind": "complete",
   *         "stage_id": "main"
   *       },
   *       "seq": 0,
   *       "stage_id": "main",
   *       "trigger_id": "trigger-0001"
   *     },
   *     "packets": [],
   *     "status": "completed"
   *   }
   *   ```
   * - Evaluate a run and request trace feedback.
   *   Input:
   *   ```json
   *   {
   *     "feedback": "trace",
   *     "request": {
   *       "agent_id": "agent-alpha",
   *       "correlation_id": null,
   *       "namespace_id": 1,
   *       "run_id": "run-0001",
   *       "tenant_id": 1,
   *       "time": {
   *         "kind": "unix_millis",
   *         "value": 1710000000000
   *       },
   *       "trigger_id": "trigger-0001"
   *     },
   *     "scenario_id": "example-scenario"
   *   }
   *   ```
   *   Output:
   *   ```json
   *   {
   *     "decision": {
   *       "correlation_id": null,
   *       "decided_at": {
   *         "kind": "unix_millis",
   *         "value": 1710000000000
   *       },
   *       "decision_id": "decision-0001",
   *       "outcome": {
   *         "kind": "complete",
   *         "stage_id": "main"
   *       },
   *       "seq": 0,
   *       "stage_id": "main",
   *       "trigger_id": "trigger-0001"
   *     },
   *     "feedback": {
   *       "gate_evaluations": [],
   *       "level": "trace"
   *     },
   *     "packets": [],
   *     "status": "completed"
   *   }
   *   ```
   */
  public scenario_next(request: ScenarioNextRequest): Promise<ScenarioNextResponse> {
    return this.callTool<ScenarioNextResponse>("scenario_next", request);
  }

  /**
   * Submit external artifacts into run state for audit and later evaluation.
   *
   * Notes:
   * - Payload is hashed and stored as a submission record.
   * - Payload is persisted in run state/runpack logs; do not send raw secrets.
   * - Does not advance the run by itself.
   * - Use for artifacts the model or operator supplies.
   *
   * Examples:
   * - Submit an external artifact for audit and later evaluation.
   *   Input:
   *   ```json
   *   {
   *     "request": {
   *       "content_type": "application/json",
   *       "correlation_id": null,
   *       "namespace_id": 1,
   *       "payload": {
   *         "kind": "json",
   *         "value": {
   *           "artifact": "attestation",
   *           "status": "approved"
   *         }
   *       },
   *       "run_id": "run-0001",
   *       "submission_id": "submission-0001",
   *       "submitted_at": {
   *         "kind": "unix_millis",
   *         "value": 1710000000000
   *       },
   *       "tenant_id": 1
   *     },
   *     "scenario_id": "example-scenario"
   *   }
   *   ```
   *   Output:
   *   ```json
   *   {
   *     "record": {
   *       "content_hash": {
   *         "algorithm": "sha256",
   *         "value": "5c3a5b6bce0f4a2c9e22c4fa6a1e6d8d90b0f2dfed1b7f1e9b3d3b3d1f0c9b21"
   *       },
   *       "content_type": "application/json",
   *       "correlation_id": null,
   *       "payload": {
   *         "kind": "json",
   *         "value": {
   *           "artifact": "attestation",
   *           "status": "approved"
   *         }
   *       },
   *       "run_id": "run-0001",
   *       "submission_id": "submission-0001",
   *       "submitted_at": {
   *         "kind": "unix_millis",
   *         "value": 1710000000000
   *       }
   *     }
   *   }
   *   ```
   */
  public scenario_submit(request: ScenarioSubmitRequest): Promise<ScenarioSubmitResponse> {
    return this.callTool<ScenarioSubmitResponse>("scenario_submit", request);
  }

  /**
   * Submit a trigger event (scheduler/external) and evaluate the run.
   *
   * Notes:
   * - Trigger time is supplied by the caller; no wall-clock reads.
   * - Records the trigger event and resulting decision.
   * - Payload is persisted in run state/runpack logs; do not send raw secrets.
   * - Use for time-based or external system triggers.
   *
   * Examples:
   * - Advance a run from a scheduler or external trigger.
   *   Input:
   *   ```json
   *   {
   *     "scenario_id": "example-scenario",
   *     "trigger": {
   *       "correlation_id": null,
   *       "kind": "tick",
   *       "namespace_id": 1,
   *       "payload": null,
   *       "run_id": "run-0001",
   *       "source_id": "scheduler-01",
   *       "tenant_id": 1,
   *       "time": {
   *         "kind": "unix_millis",
   *         "value": 1710000000000
   *       },
   *       "trigger_id": "trigger-0001"
   *     }
   *   }
   *   ```
   *   Output:
   *   ```json
   *   {
   *     "decision": {
   *       "correlation_id": null,
   *       "decided_at": {
   *         "kind": "unix_millis",
   *         "value": 1710000000000
   *       },
   *       "decision_id": "decision-0001",
   *       "outcome": {
   *         "kind": "complete",
   *         "stage_id": "main"
   *       },
   *       "seq": 0,
   *       "stage_id": "main",
   *       "trigger_id": "trigger-0001"
   *     },
   *     "packets": [],
   *     "status": "completed"
   *   }
   *   ```
   */
  public scenario_trigger(request: ScenarioTriggerRequest): Promise<ScenarioTriggerResponse> {
    return this.callTool<ScenarioTriggerResponse>("scenario_trigger", request);
  }

  /**
   * Query an evidence provider with full run context and disclosure policy.
   *
   * Notes:
   * - Disclosure policy may redact raw values; hashes/anchors still returned.
   * - Use for diagnostics or preflight checks; runtime uses the same provider logic.
   * - Requires provider_id, check_id, and full EvidenceContext.
   *
   * Examples:
   * - Query an evidence provider using the run context.
   *   Input:
   *   ```json
   *   {
   *     "context": {
   *       "correlation_id": null,
   *       "namespace_id": 1,
   *       "run_id": "run-0001",
   *       "scenario_id": "example-scenario",
   *       "stage_id": "main",
   *       "tenant_id": 1,
   *       "trigger_id": "trigger-0001",
   *       "trigger_time": {
   *         "kind": "unix_millis",
   *         "value": 1710000000000
   *       }
   *     },
   *     "query": {
   *       "check_id": "get",
   *       "params": {
   *         "key": "DEPLOY_ENV"
   *       },
   *       "provider_id": "env"
   *     }
   *   }
   *   ```
   *   Output:
   *   ```json
   *   {
   *     "result": {
   *       "content_type": "text/plain",
   *       "error": null,
   *       "evidence_anchor": {
   *         "anchor_type": "env",
   *         "anchor_value": "DEPLOY_ENV"
   *       },
   *       "evidence_hash": {
   *         "algorithm": "sha256",
   *         "value": "5c3a5b6bce0f4a2c9e22c4fa6a1e6d8d90b0f2dfed1b7f1e9b3d3b3d1f0c9b21"
   *       },
   *       "evidence_ref": null,
   *       "lane": "verified",
   *       "signature": null,
   *       "value": {
   *         "kind": "json",
   *         "value": "production"
   *       }
   *     }
   *   }
   *   ```
   */
  public evidence_query(request: EvidenceQueryRequest): Promise<EvidenceQueryResponse> {
    return this.callTool<EvidenceQueryResponse>("evidence_query", request);
  }

  /**
   * Export deterministic runpack artifacts for offline verification.
   *
   * Notes:
   * - Writes manifest and logs to output_dir; generated_at is recorded in the manifest.
   * - include_verification adds a verification report artifact.
   * - Export-time report.checked_files excludes verifier_report.json; offline runpack_verify checked_files includes it (+1 for the same runpack).
   * - Use after runs complete or for audit snapshots.
   *
   * Examples:
   * - Export a runpack with manifest metadata.
   *   Input:
   *   ```json
   *   {
   *     "generated_at": {
   *       "kind": "unix_millis",
   *       "value": 1710000000000
   *     },
   *     "include_verification": false,
   *     "manifest_name": "manifest.json",
   *     "namespace_id": 1,
   *     "output_dir": "/var/lib/decision-gate/runpacks/run-0001",
   *     "run_id": "run-0001",
   *     "scenario_id": "example-scenario",
   *     "tenant_id": 1
   *   }
   *   ```
   *   Output:
   *   ```json
   *   {
   *     "manifest": {
   *       "artifacts": [
   *         {
   *           "artifact_id": "decision_log",
   *           "content_type": "application/json",
   *           "hash": {
   *             "algorithm": "sha256",
   *             "value": "5c3a5b6bce0f4a2c9e22c4fa6a1e6d8d90b0f2dfed1b7f1e9b3d3b3d1f0c9b21"
   *           },
   *           "kind": "decision_log",
   *           "path": "decision_log.json",
   *           "required": true
   *         }
   *       ],
   *       "generated_at": {
   *         "kind": "unix_millis",
   *         "value": 1710000000000
   *       },
   *       "hash_algorithm": "sha256",
   *       "integrity": {
   *         "file_hashes": [
   *           {
   *             "hash": {
   *               "algorithm": "sha256",
   *               "value": "5c3a5b6bce0f4a2c9e22c4fa6a1e6d8d90b0f2dfed1b7f1e9b3d3b3d1f0c9b21"
   *             },
   *             "path": "decision_log.json"
   *           }
   *         ],
   *         "root_hash": {
   *           "algorithm": "sha256",
   *           "value": "5c3a5b6bce0f4a2c9e22c4fa6a1e6d8d90b0f2dfed1b7f1e9b3d3b3d1f0c9b21"
   *         }
   *       },
   *       "manifest_version": "v1",
   *       "namespace_id": 1,
   *       "run_id": "run-0001",
   *       "scenario_id": "example-scenario",
   *       "spec_hash": {
   *         "algorithm": "sha256",
   *         "value": "5c3a5b6bce0f4a2c9e22c4fa6a1e6d8d90b0f2dfed1b7f1e9b3d3b3d1f0c9b21"
   *       },
   *       "tenant_id": 1,
   *       "verifier_mode": "offline_strict"
   *     },
   *     "report": null,
   *     "storage_uri": null
   *   }
   *   ```
   */
  public runpack_export(request: RunpackExportRequest): Promise<RunpackExportResponse> {
    return this.callTool<RunpackExportResponse>("runpack_export", request);
  }

  /**
   * Verify a runpack manifest and artifacts offline.
   *
   * Notes:
   * - Validates hashes, integrity root, and decision log structure.
   * - Fails closed on missing or tampered files.
   * - Use in CI or offline audit pipelines.
   *
   * Examples:
   * - Verify a runpack manifest and artifacts offline.
   *   Input:
   *   ```json
   *   {
   *     "manifest_path": "manifest.json",
   *     "runpack_dir": "/var/lib/decision-gate/runpacks/run-0001"
   *   }
   *   ```
   *   Output:
   *   ```json
   *   {
   *     "report": {
   *       "checked_files": 12,
   *       "errors": [],
   *       "status": "pass"
   *     },
   *     "status": "pass"
   *   }
   *   ```
   */
  public runpack_verify(request: RunpackVerifyRequest): Promise<RunpackVerifyResponse> {
    return this.callTool<RunpackVerifyResponse>("runpack_verify", request);
  }

  /**
   * List registered evidence providers and capabilities summary.
   *
   * Notes:
   * - Returns provider identifiers and transport metadata.
   * - Results are scoped by auth policy.
   *
   * Examples:
   * - List registered evidence providers.
   *   Input:
   *   ```json
   *   {}
   *   ```
   *   Output:
   *   ```json
   *   {
   *     "providers": [
   *       {
   *         "checks": [
   *           "get"
   *         ],
   *         "provider_id": "env",
   *         "transport": "builtin"
   *       }
   *     ]
   *   }
   *   ```
   */
  public providers_list(request: ProvidersListRequest): Promise<ProvidersListResponse> {
    return this.callTool<ProvidersListResponse>("providers_list", request);
  }

  /**
   * Fetch the canonical provider contract JSON and hash for a provider.
   *
   * Notes:
   * - Returns the provider contract as loaded by the MCP server.
   * - Includes a canonical hash for audit and reproducibility.
   * - Subject to provider disclosure policy and authz.
   *
   * Examples:
   * - Fetch the contract JSON for a provider.
   *   Input:
   *   ```json
   *   {
   *     "provider_id": "json"
   *   }
   *   ```
   *   Output:
   *   ```json
   *   {
   *     "contract": {
   *       "checks": [],
   *       "config_schema": {
   *         "additionalProperties": false,
   *         "type": "object"
   *       },
   *       "description": "Reads JSON or YAML files and evaluates JSONPath.",
   *       "name": "JSON Provider",
   *       "notes": [],
   *       "provider_id": "json",
   *       "transport": "builtin"
   *     },
   *     "contract_hash": {
   *       "algorithm": "sha256",
   *       "value": "5c3a5b6bce0f4a2c9e22c4fa6a1e6d8d90b0f2dfed1b7f1e9b3d3b3d1f0c9b21"
   *     },
   *     "provider_id": "json",
   *     "source": "builtin",
   *     "version": null
   *   }
   *   ```
   */
  public provider_contract_get(request: ProviderContractGetRequest): Promise<ProviderContractGetResponse> {
    return this.callTool<ProviderContractGetResponse>("provider_contract_get", request);
  }

  /**
   * Fetch check schema details (params/result/comparators) for a provider.
   *
   * Notes:
   * - Returns compiled schema metadata for a single check.
   * - Includes comparator allow-lists and check examples.
   * - Subject to provider disclosure policy and authz.
   *
   * Examples:
   * - Fetch check schema details for a provider.
   *   Input:
   *   ```json
   *   {
   *     "check_id": "path",
   *     "provider_id": "json"
   *   }
   *   ```
   *   Output:
   *   ```json
   *   {
   *     "allowed_comparators": [
   *       "equals",
   *       "in_set",
   *       "exists",
   *       "not_exists"
   *     ],
   *     "anchor_types": [],
   *     "check_id": "path",
   *     "content_types": [
   *       "application/json"
   *     ],
   *     "contract_hash": {
   *       "algorithm": "sha256",
   *       "value": "5c3a5b6bce0f4a2c9e22c4fa6a1e6d8d90b0f2dfed1b7f1e9b3d3b3d1f0c9b21"
   *     },
   *     "determinism": "external",
   *     "examples": [],
   *     "params_required": true,
   *     "params_schema": {
   *       "properties": {
   *         "file": {
   *           "type": "string"
   *         },
   *         "jsonpath": {
   *           "type": "string"
   *         }
   *       },
   *       "required": [
   *         "file"
   *       ],
   *       "type": "object"
   *     },
   *     "provider_id": "json",
   *     "result_schema": {
   *       "type": [
   *         "null",
   *         "string",
   *         "number",
   *         "boolean",
   *         "array",
   *         "object"
   *       ]
   *     }
   *   }
   *   ```
   */
  public provider_check_schema_get(request: ProviderCheckSchemaGetRequest): Promise<ProviderCheckSchemaGetResponse> {
    return this.callTool<ProviderCheckSchemaGetResponse>("provider_check_schema_get", request);
  }

  /**
   * Register a data shape schema for a tenant and namespace.
   *
   * Notes:
   * - Schemas are immutable; registering the same version twice fails.
   * - Provide created_at to record when the schema was authored.
   *
   * Examples:
   * - Register a data shape schema.
   *   Input:
   *   ```json
   *   {
   *     "record": {
   *       "created_at": {
   *         "kind": "unix_millis",
   *         "value": 1710000000000
   *       },
   *       "description": "Asserted payload schema.",
   *       "namespace_id": 1,
   *       "schema": {
   *         "additionalProperties": false,
   *         "properties": {
   *           "deploy_env": {
   *             "type": "string"
   *           }
   *         },
   *         "required": [
   *           "deploy_env"
   *         ],
   *         "type": "object"
   *       },
   *       "schema_id": "asserted_payload",
   *       "tenant_id": 1,
   *       "version": "v1"
   *     }
   *   }
   *   ```
   *   Output:
   *   ```json
   *   {
   *     "record": {
   *       "created_at": {
   *         "kind": "unix_millis",
   *         "value": 1710000000000
   *       },
   *       "description": "Asserted payload schema.",
   *       "namespace_id": 1,
   *       "schema": {
   *         "additionalProperties": false,
   *         "properties": {
   *           "deploy_env": {
   *             "type": "string"
   *           }
   *         },
   *         "required": [
   *           "deploy_env"
   *         ],
   *         "type": "object"
   *       },
   *       "schema_id": "asserted_payload",
   *       "tenant_id": 1,
   *       "version": "v1"
   *     }
   *   }
   *   ```
   */
  public schemas_register(request: SchemasRegisterRequest): Promise<SchemasRegisterResponse> {
    return this.callTool<SchemasRegisterResponse>("schemas_register", request);
  }

  /**
   * List registered data shapes for a tenant and namespace.
   *
   * Notes:
   * - Requires tenant_id and namespace_id.
   * - Supports pagination via cursor + limit.
   *
   * Examples:
   * - List data shapes for a namespace.
   *   Input:
   *   ```json
   *   {
   *     "cursor": null,
   *     "limit": 50,
   *     "namespace_id": 1,
   *     "tenant_id": 1
   *   }
   *   ```
   *   Output:
   *   ```json
   *   {
   *     "items": [
   *       {
   *         "created_at": {
   *           "kind": "unix_millis",
   *           "value": 1710000000000
   *         },
   *         "description": "Asserted payload schema.",
   *         "namespace_id": 1,
   *         "schema": {
   *           "additionalProperties": false,
   *           "properties": {
   *             "deploy_env": {
   *               "type": "string"
   *             }
   *           },
   *           "required": [
   *             "deploy_env"
   *           ],
   *           "type": "object"
   *         },
   *         "schema_id": "asserted_payload",
   *         "tenant_id": 1,
   *         "version": "v1"
   *       }
   *     ],
   *     "next_token": null
   *   }
   *   ```
   */
  public schemas_list(request: SchemasListRequest): Promise<SchemasListResponse> {
    return this.callTool<SchemasListResponse>("schemas_list", request);
  }

  /**
   * Fetch a specific data shape by identifier and version.
   *
   * Notes:
   * - Requires tenant_id, namespace_id, schema_id, and version.
   * - Fails closed when schema is missing.
   *
   * Examples:
   * - Fetch a data shape by identifier and version.
   *   Input:
   *   ```json
   *   {
   *     "namespace_id": 1,
   *     "schema_id": "asserted_payload",
   *     "tenant_id": 1,
   *     "version": "v1"
   *   }
   *   ```
   *   Output:
   *   ```json
   *   {
   *     "record": {
   *       "created_at": {
   *         "kind": "unix_millis",
   *         "value": 1710000000000
   *       },
   *       "description": "Asserted payload schema.",
   *       "namespace_id": 1,
   *       "schema": {
   *         "additionalProperties": false,
   *         "properties": {
   *           "deploy_env": {
   *             "type": "string"
   *           }
   *         },
   *         "required": [
   *           "deploy_env"
   *         ],
   *         "type": "object"
   *       },
   *       "schema_id": "asserted_payload",
   *       "tenant_id": 1,
   *       "version": "v1"
   *     }
   *   }
   *   ```
   */
  public schemas_get(request: SchemasGetRequest): Promise<SchemasGetResponse> {
    return this.callTool<SchemasGetResponse>("schemas_get", request);
  }

  /**
   * List registered scenarios for a tenant and namespace.
   *
   * Notes:
   * - Requires tenant_id and namespace_id.
   * - Returns scenario identifiers and hashes.
   *
   * Examples:
   * - List scenarios for a namespace.
   *   Input:
   *   ```json
   *   {
   *     "cursor": null,
   *     "limit": 50,
   *     "namespace_id": 1,
   *     "tenant_id": 1
   *   }
   *   ```
   *   Output:
   *   ```json
   *   {
   *     "items": [
   *       {
   *         "namespace_id": 1,
   *         "scenario_id": "example-scenario",
   *         "spec_hash": {
   *           "algorithm": "sha256",
   *           "value": "5c3a5b6bce0f4a2c9e22c4fa6a1e6d8d90b0f2dfed1b7f1e9b3d3b3d1f0c9b21"
   *         }
   *       }
   *     ],
   *     "next_token": null
   *   }
   *   ```
   */
  public scenarios_list(request: ScenariosListRequest): Promise<ScenariosListResponse> {
    return this.callTool<ScenariosListResponse>("scenarios_list", request);
  }

  /**
   * Evaluate a scenario against asserted data without mutating state.
   *
   * Notes:
   * - Validates asserted data against a registered shape.
   * - Does not mutate run state; intended for simulation.
   *
   * Examples:
   * - Precheck a scenario with asserted data.
   *   Input:
   *   ```json
   *   {
   *     "data_shape": {
   *       "schema_id": "asserted_payload",
   *       "version": "v1"
   *     },
   *     "namespace_id": 1,
   *     "payload": {
   *       "deploy_env": "production"
   *     },
   *     "scenario_id": "example-scenario",
   *     "spec": null,
   *     "stage_id": null,
   *     "tenant_id": 1
   *   }
   *   ```
   *   Output:
   *   ```json
   *   {
   *     "decision": {
   *       "kind": "hold",
   *       "summary": {
   *         "policy_tags": [],
   *         "retry_hint": "await_evidence",
   *         "status": "hold",
   *         "unmet_gates": [
   *           "ready"
   *         ]
   *       }
   *     },
   *     "gate_evaluations": []
   *   }
   *   ```
   */
  public precheck(request: PrecheckRequest): Promise<PrecheckResponse> {
    return this.callTool<PrecheckResponse>("precheck", request);
  }

  /**
   * Search Decision Gate documentation for runtime guidance.
   *
   * Notes:
   * - Use for quick lookups on evidence flow, comparators, and provider semantics.
   * - Returns ranked sections with role tags and suggested follow-ups.
   * - Search is deterministic and scoped to the configured doc catalog.
   *
   * Examples:
   * - Search for evidence flow and trust lane guidance.
   *   Input:
   *   ```json
   *   {
   *     "max_sections": 2,
   *     "query": "precheck vs live run trust lanes"
   *   }
   *   ```
   *   Output:
   *   ```json
   *   {
   *     "docs_covered": [
   *       {
   *         "doc_id": "evidence_flow_and_execution_model",
   *         "doc_role": "reasoning",
   *         "doc_title": "Evidence Flow + Execution Model"
   *       }
   *     ],
   *     "sections": [
   *       {
   *         "content": "...",
   *         "doc_id": "evidence_flow_and_execution_model",
   *         "doc_role": "reasoning",
   *         "doc_title": "Evidence Flow + Execution Model",
   *         "heading": "Core Data Flow",
   *         "rank": 0
   *       }
   *     ],
   *     "suggested_followups": [
   *       "Refine the query with comparator or provider keywords for targeted guidance."
   *     ]
   *   }
   *   ```
   */
  public decision_gate_docs_search(request: DecisionGateDocsSearchRequest): Promise<DecisionGateDocsSearchResponse> {
    return this.callTool<DecisionGateDocsSearchResponse>("decision_gate_docs_search", request);
  }

}
export type SchemaValidator = (schema: unknown, payload: unknown) => void;

export class SchemaValidationError extends Error {
  public readonly errors?: unknown;
  constructor(message: string, errors?: unknown) {
    super(message);
    this.name = "SchemaValidationError";
    this.errors = errors;
  }
}

export function validateSchemaWith(validator: SchemaValidator, schema: unknown, payload: unknown): void {
  validator(schema, payload);
}

async function loadAjv(): Promise<any> {
  const loader = new Function("moduleName", "return import(moduleName);") as (name: string) => Promise<any>;
  const mod = await loader("ajv");
  return mod.default ?? mod;
}

export async function validateSchemaWithAjv(schema: unknown, payload: unknown): Promise<void> {
  const Ajv = await loadAjv();
  const ajv = new Ajv({ allErrors: true, strict: false });
  const validate = ajv.compile(schema);
  const ok = validate(payload);
  if (!ok) {
    throw new SchemaValidationError("Schema validation failed.", validate.errors);
  }
}

export function validateScenarioDefineRequest(payload: ScenarioDefineRequest, validator: SchemaValidator): void {
  validateSchemaWith(validator, ScenarioDefine_INPUT_SCHEMA, payload);
}

export function validateScenarioDefineResponse(payload: ScenarioDefineResponse, validator: SchemaValidator): void {
  validateSchemaWith(validator, ScenarioDefine_OUTPUT_SCHEMA, payload);
}

export async function validateScenarioDefineRequestWithAjv(payload: ScenarioDefineRequest): Promise<void> {
  return validateSchemaWithAjv(ScenarioDefine_INPUT_SCHEMA, payload);
}

export async function validateScenarioDefineResponseWithAjv(payload: ScenarioDefineResponse): Promise<void> {
  return validateSchemaWithAjv(ScenarioDefine_OUTPUT_SCHEMA, payload);
}

export function validateScenarioStartRequest(payload: ScenarioStartRequest, validator: SchemaValidator): void {
  validateSchemaWith(validator, ScenarioStart_INPUT_SCHEMA, payload);
}

export function validateScenarioStartResponse(payload: ScenarioStartResponse, validator: SchemaValidator): void {
  validateSchemaWith(validator, ScenarioStart_OUTPUT_SCHEMA, payload);
}

export async function validateScenarioStartRequestWithAjv(payload: ScenarioStartRequest): Promise<void> {
  return validateSchemaWithAjv(ScenarioStart_INPUT_SCHEMA, payload);
}

export async function validateScenarioStartResponseWithAjv(payload: ScenarioStartResponse): Promise<void> {
  return validateSchemaWithAjv(ScenarioStart_OUTPUT_SCHEMA, payload);
}

export function validateScenarioStatusRequest(payload: ScenarioStatusRequest, validator: SchemaValidator): void {
  validateSchemaWith(validator, ScenarioStatus_INPUT_SCHEMA, payload);
}

export function validateScenarioStatusResponse(payload: ScenarioStatusResponse, validator: SchemaValidator): void {
  validateSchemaWith(validator, ScenarioStatus_OUTPUT_SCHEMA, payload);
}

export async function validateScenarioStatusRequestWithAjv(payload: ScenarioStatusRequest): Promise<void> {
  return validateSchemaWithAjv(ScenarioStatus_INPUT_SCHEMA, payload);
}

export async function validateScenarioStatusResponseWithAjv(payload: ScenarioStatusResponse): Promise<void> {
  return validateSchemaWithAjv(ScenarioStatus_OUTPUT_SCHEMA, payload);
}

export function validateScenarioNextRequest(payload: ScenarioNextRequest, validator: SchemaValidator): void {
  validateSchemaWith(validator, ScenarioNext_INPUT_SCHEMA, payload);
}

export function validateScenarioNextResponse(payload: ScenarioNextResponse, validator: SchemaValidator): void {
  validateSchemaWith(validator, ScenarioNext_OUTPUT_SCHEMA, payload);
}

export async function validateScenarioNextRequestWithAjv(payload: ScenarioNextRequest): Promise<void> {
  return validateSchemaWithAjv(ScenarioNext_INPUT_SCHEMA, payload);
}

export async function validateScenarioNextResponseWithAjv(payload: ScenarioNextResponse): Promise<void> {
  return validateSchemaWithAjv(ScenarioNext_OUTPUT_SCHEMA, payload);
}

export function validateScenarioSubmitRequest(payload: ScenarioSubmitRequest, validator: SchemaValidator): void {
  validateSchemaWith(validator, ScenarioSubmit_INPUT_SCHEMA, payload);
}

export function validateScenarioSubmitResponse(payload: ScenarioSubmitResponse, validator: SchemaValidator): void {
  validateSchemaWith(validator, ScenarioSubmit_OUTPUT_SCHEMA, payload);
}

export async function validateScenarioSubmitRequestWithAjv(payload: ScenarioSubmitRequest): Promise<void> {
  return validateSchemaWithAjv(ScenarioSubmit_INPUT_SCHEMA, payload);
}

export async function validateScenarioSubmitResponseWithAjv(payload: ScenarioSubmitResponse): Promise<void> {
  return validateSchemaWithAjv(ScenarioSubmit_OUTPUT_SCHEMA, payload);
}

export function validateScenarioTriggerRequest(payload: ScenarioTriggerRequest, validator: SchemaValidator): void {
  validateSchemaWith(validator, ScenarioTrigger_INPUT_SCHEMA, payload);
}

export function validateScenarioTriggerResponse(payload: ScenarioTriggerResponse, validator: SchemaValidator): void {
  validateSchemaWith(validator, ScenarioTrigger_OUTPUT_SCHEMA, payload);
}

export async function validateScenarioTriggerRequestWithAjv(payload: ScenarioTriggerRequest): Promise<void> {
  return validateSchemaWithAjv(ScenarioTrigger_INPUT_SCHEMA, payload);
}

export async function validateScenarioTriggerResponseWithAjv(payload: ScenarioTriggerResponse): Promise<void> {
  return validateSchemaWithAjv(ScenarioTrigger_OUTPUT_SCHEMA, payload);
}

export function validateEvidenceQueryRequest(payload: EvidenceQueryRequest, validator: SchemaValidator): void {
  validateSchemaWith(validator, EvidenceQuery_INPUT_SCHEMA, payload);
}

export function validateEvidenceQueryResponse(payload: EvidenceQueryResponse, validator: SchemaValidator): void {
  validateSchemaWith(validator, EvidenceQuery_OUTPUT_SCHEMA, payload);
}

export async function validateEvidenceQueryRequestWithAjv(payload: EvidenceQueryRequest): Promise<void> {
  return validateSchemaWithAjv(EvidenceQuery_INPUT_SCHEMA, payload);
}

export async function validateEvidenceQueryResponseWithAjv(payload: EvidenceQueryResponse): Promise<void> {
  return validateSchemaWithAjv(EvidenceQuery_OUTPUT_SCHEMA, payload);
}

export function validateRunpackExportRequest(payload: RunpackExportRequest, validator: SchemaValidator): void {
  validateSchemaWith(validator, RunpackExport_INPUT_SCHEMA, payload);
}

export function validateRunpackExportResponse(payload: RunpackExportResponse, validator: SchemaValidator): void {
  validateSchemaWith(validator, RunpackExport_OUTPUT_SCHEMA, payload);
}

export async function validateRunpackExportRequestWithAjv(payload: RunpackExportRequest): Promise<void> {
  return validateSchemaWithAjv(RunpackExport_INPUT_SCHEMA, payload);
}

export async function validateRunpackExportResponseWithAjv(payload: RunpackExportResponse): Promise<void> {
  return validateSchemaWithAjv(RunpackExport_OUTPUT_SCHEMA, payload);
}

export function validateRunpackVerifyRequest(payload: RunpackVerifyRequest, validator: SchemaValidator): void {
  validateSchemaWith(validator, RunpackVerify_INPUT_SCHEMA, payload);
}

export function validateRunpackVerifyResponse(payload: RunpackVerifyResponse, validator: SchemaValidator): void {
  validateSchemaWith(validator, RunpackVerify_OUTPUT_SCHEMA, payload);
}

export async function validateRunpackVerifyRequestWithAjv(payload: RunpackVerifyRequest): Promise<void> {
  return validateSchemaWithAjv(RunpackVerify_INPUT_SCHEMA, payload);
}

export async function validateRunpackVerifyResponseWithAjv(payload: RunpackVerifyResponse): Promise<void> {
  return validateSchemaWithAjv(RunpackVerify_OUTPUT_SCHEMA, payload);
}

export function validateProvidersListRequest(payload: ProvidersListRequest, validator: SchemaValidator): void {
  validateSchemaWith(validator, ProvidersList_INPUT_SCHEMA, payload);
}

export function validateProvidersListResponse(payload: ProvidersListResponse, validator: SchemaValidator): void {
  validateSchemaWith(validator, ProvidersList_OUTPUT_SCHEMA, payload);
}

export async function validateProvidersListRequestWithAjv(payload: ProvidersListRequest): Promise<void> {
  return validateSchemaWithAjv(ProvidersList_INPUT_SCHEMA, payload);
}

export async function validateProvidersListResponseWithAjv(payload: ProvidersListResponse): Promise<void> {
  return validateSchemaWithAjv(ProvidersList_OUTPUT_SCHEMA, payload);
}

export function validateProviderContractGetRequest(payload: ProviderContractGetRequest, validator: SchemaValidator): void {
  validateSchemaWith(validator, ProviderContractGet_INPUT_SCHEMA, payload);
}

export function validateProviderContractGetResponse(payload: ProviderContractGetResponse, validator: SchemaValidator): void {
  validateSchemaWith(validator, ProviderContractGet_OUTPUT_SCHEMA, payload);
}

export async function validateProviderContractGetRequestWithAjv(payload: ProviderContractGetRequest): Promise<void> {
  return validateSchemaWithAjv(ProviderContractGet_INPUT_SCHEMA, payload);
}

export async function validateProviderContractGetResponseWithAjv(payload: ProviderContractGetResponse): Promise<void> {
  return validateSchemaWithAjv(ProviderContractGet_OUTPUT_SCHEMA, payload);
}

export function validateProviderCheckSchemaGetRequest(payload: ProviderCheckSchemaGetRequest, validator: SchemaValidator): void {
  validateSchemaWith(validator, ProviderCheckSchemaGet_INPUT_SCHEMA, payload);
}

export function validateProviderCheckSchemaGetResponse(payload: ProviderCheckSchemaGetResponse, validator: SchemaValidator): void {
  validateSchemaWith(validator, ProviderCheckSchemaGet_OUTPUT_SCHEMA, payload);
}

export async function validateProviderCheckSchemaGetRequestWithAjv(payload: ProviderCheckSchemaGetRequest): Promise<void> {
  return validateSchemaWithAjv(ProviderCheckSchemaGet_INPUT_SCHEMA, payload);
}

export async function validateProviderCheckSchemaGetResponseWithAjv(payload: ProviderCheckSchemaGetResponse): Promise<void> {
  return validateSchemaWithAjv(ProviderCheckSchemaGet_OUTPUT_SCHEMA, payload);
}

export function validateSchemasRegisterRequest(payload: SchemasRegisterRequest, validator: SchemaValidator): void {
  validateSchemaWith(validator, SchemasRegister_INPUT_SCHEMA, payload);
}

export function validateSchemasRegisterResponse(payload: SchemasRegisterResponse, validator: SchemaValidator): void {
  validateSchemaWith(validator, SchemasRegister_OUTPUT_SCHEMA, payload);
}

export async function validateSchemasRegisterRequestWithAjv(payload: SchemasRegisterRequest): Promise<void> {
  return validateSchemaWithAjv(SchemasRegister_INPUT_SCHEMA, payload);
}

export async function validateSchemasRegisterResponseWithAjv(payload: SchemasRegisterResponse): Promise<void> {
  return validateSchemaWithAjv(SchemasRegister_OUTPUT_SCHEMA, payload);
}

export function validateSchemasListRequest(payload: SchemasListRequest, validator: SchemaValidator): void {
  validateSchemaWith(validator, SchemasList_INPUT_SCHEMA, payload);
}

export function validateSchemasListResponse(payload: SchemasListResponse, validator: SchemaValidator): void {
  validateSchemaWith(validator, SchemasList_OUTPUT_SCHEMA, payload);
}

export async function validateSchemasListRequestWithAjv(payload: SchemasListRequest): Promise<void> {
  return validateSchemaWithAjv(SchemasList_INPUT_SCHEMA, payload);
}

export async function validateSchemasListResponseWithAjv(payload: SchemasListResponse): Promise<void> {
  return validateSchemaWithAjv(SchemasList_OUTPUT_SCHEMA, payload);
}

export function validateSchemasGetRequest(payload: SchemasGetRequest, validator: SchemaValidator): void {
  validateSchemaWith(validator, SchemasGet_INPUT_SCHEMA, payload);
}

export function validateSchemasGetResponse(payload: SchemasGetResponse, validator: SchemaValidator): void {
  validateSchemaWith(validator, SchemasGet_OUTPUT_SCHEMA, payload);
}

export async function validateSchemasGetRequestWithAjv(payload: SchemasGetRequest): Promise<void> {
  return validateSchemaWithAjv(SchemasGet_INPUT_SCHEMA, payload);
}

export async function validateSchemasGetResponseWithAjv(payload: SchemasGetResponse): Promise<void> {
  return validateSchemaWithAjv(SchemasGet_OUTPUT_SCHEMA, payload);
}

export function validateScenariosListRequest(payload: ScenariosListRequest, validator: SchemaValidator): void {
  validateSchemaWith(validator, ScenariosList_INPUT_SCHEMA, payload);
}

export function validateScenariosListResponse(payload: ScenariosListResponse, validator: SchemaValidator): void {
  validateSchemaWith(validator, ScenariosList_OUTPUT_SCHEMA, payload);
}

export async function validateScenariosListRequestWithAjv(payload: ScenariosListRequest): Promise<void> {
  return validateSchemaWithAjv(ScenariosList_INPUT_SCHEMA, payload);
}

export async function validateScenariosListResponseWithAjv(payload: ScenariosListResponse): Promise<void> {
  return validateSchemaWithAjv(ScenariosList_OUTPUT_SCHEMA, payload);
}

export function validatePrecheckRequest(payload: PrecheckRequest, validator: SchemaValidator): void {
  validateSchemaWith(validator, Precheck_INPUT_SCHEMA, payload);
}

export function validatePrecheckResponse(payload: PrecheckResponse, validator: SchemaValidator): void {
  validateSchemaWith(validator, Precheck_OUTPUT_SCHEMA, payload);
}

export async function validatePrecheckRequestWithAjv(payload: PrecheckRequest): Promise<void> {
  return validateSchemaWithAjv(Precheck_INPUT_SCHEMA, payload);
}

export async function validatePrecheckResponseWithAjv(payload: PrecheckResponse): Promise<void> {
  return validateSchemaWithAjv(Precheck_OUTPUT_SCHEMA, payload);
}

export function validateDecisionGateDocsSearchRequest(payload: DecisionGateDocsSearchRequest, validator: SchemaValidator): void {
  validateSchemaWith(validator, DecisionGateDocsSearch_INPUT_SCHEMA, payload);
}

export function validateDecisionGateDocsSearchResponse(payload: DecisionGateDocsSearchResponse, validator: SchemaValidator): void {
  validateSchemaWith(validator, DecisionGateDocsSearch_OUTPUT_SCHEMA, payload);
}

export async function validateDecisionGateDocsSearchRequestWithAjv(payload: DecisionGateDocsSearchRequest): Promise<void> {
  return validateSchemaWithAjv(DecisionGateDocsSearch_INPUT_SCHEMA, payload);
}

export async function validateDecisionGateDocsSearchResponseWithAjv(payload: DecisionGateDocsSearchResponse): Promise<void> {
  return validateSchemaWithAjv(DecisionGateDocsSearch_OUTPUT_SCHEMA, payload);
}

