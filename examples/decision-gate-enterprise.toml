# Decision Gate Enterprise example configuration
# ----------------------------------------------------------------------------
# This file configures enterprise-only wiring (Postgres + S3 + usage ledger).
# It complements the OSS decision-gate.toml used by decision-gate-mcp.

[storage.postgres]
connection = "postgres://decision_gate:decision_gate@localhost/decision_gate"
max_connections = 16
connect_timeout_ms = 5000
statement_timeout_ms = 30000

[runpacks.s3]
bucket = "decision-gate-runpacks"
region = "us-east-1"
prefix = "dg/runpacks"
server_side_encryption = "aws_kms"
kms_key_id = "alias/decision-gate-runpacks"
force_path_style = false

[usage.ledger]
ledger_type = "sqlite"
sqlite_path = "/var/lib/decision-gate/usage-ledger.sqlite"

[[usage.quotas.limits]]
metric = "ToolCall"
max_units = 100000
window_ms = 86400000
scope = "tenant"

[[usage.quotas.limits]]
metric = "RunpackExports"
max_units = 1000
window_ms = 86400000
scope = "tenant"

[[usage.quotas.limits]]
metric = "SchemasWritten"
max_units = 10000
window_ms = 86400000
scope = "tenant"
