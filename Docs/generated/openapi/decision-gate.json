{
  "components": {
    "schemas": {
      "DecisionGateDocsSearchToolCallParams": {
        "additionalProperties": false,
        "properties": {
          "arguments": {
            "$schema": "https://json-schema.org/draft/2020-12/schema",
            "additionalProperties": false,
            "properties": {
              "max_sections": {
                "description": "Maximum number of sections to return (default 3, hard cap 10).",
                "maximum": 10,
                "minimum": 1,
                "type": "integer"
              },
              "query": {
                "description": "Search query for documentation sections.",
                "type": "string"
              }
            },
            "required": [
              "query"
            ],
            "type": "object"
          },
          "name": {
            "const": "decision_gate_docs_search"
          }
        },
        "required": [
          "name",
          "arguments"
        ],
        "type": "object"
      },
      "DecisionGateDocsSearchToolCallResult": {
        "additionalProperties": false,
        "properties": {
          "content": {
            "items": {
              "additionalProperties": false,
              "properties": {
                "json": {
                  "$schema": "https://json-schema.org/draft/2020-12/schema",
                  "additionalProperties": false,
                  "properties": {
                    "docs_covered": {
                      "items": {
                        "additionalProperties": false,
                        "properties": {
                          "doc_id": {
                            "description": "Document identifier.",
                            "type": "string"
                          },
                          "doc_role": {
                            "description": "Documentation role for search weighting and display.",
                            "enum": [
                              "reasoning",
                              "decision",
                              "ontology",
                              "pattern"
                            ],
                            "type": "string"
                          },
                          "doc_title": {
                            "description": "Document title.",
                            "type": "string"
                          }
                        },
                        "required": [
                          "doc_id",
                          "doc_title",
                          "doc_role"
                        ],
                        "type": "object"
                      },
                      "type": "array"
                    },
                    "sections": {
                      "items": {
                        "additionalProperties": false,
                        "properties": {
                          "content": {
                            "description": "Section content (raw Markdown).",
                            "type": "string"
                          },
                          "doc_id": {
                            "description": "Document identifier.",
                            "type": "string"
                          },
                          "doc_role": {
                            "description": "Documentation role for search weighting and display.",
                            "enum": [
                              "reasoning",
                              "decision",
                              "ontology",
                              "pattern"
                            ],
                            "type": "string"
                          },
                          "doc_title": {
                            "description": "Document title.",
                            "type": "string"
                          },
                          "heading": {
                            "description": "Section heading.",
                            "type": "string"
                          },
                          "rank": {
                            "minimum": 0,
                            "type": "integer"
                          }
                        },
                        "required": [
                          "rank",
                          "doc_id",
                          "doc_title",
                          "doc_role",
                          "heading",
                          "content"
                        ],
                        "type": "object"
                      },
                      "type": "array"
                    },
                    "suggested_followups": {
                      "description": "Role-aware follow-up prompts.",
                      "items": {
                        "type": "string"
                      },
                      "type": "array"
                    }
                  },
                  "required": [
                    "sections",
                    "docs_covered",
                    "suggested_followups"
                  ],
                  "type": "object"
                },
                "type": {
                  "const": "json"
                }
              },
              "required": [
                "type",
                "json"
              ],
              "type": "object"
            },
            "minItems": 1,
            "type": "array"
          }
        },
        "required": [
          "content"
        ],
        "type": "object"
      },
      "EvidenceQueryToolCallParams": {
        "additionalProperties": false,
        "properties": {
          "arguments": {
            "$schema": "https://json-schema.org/draft/2020-12/schema",
            "additionalProperties": false,
            "properties": {
              "context": {
                "additionalProperties": false,
                "description": "Evidence context used for evaluation.",
                "properties": {
                  "correlation_id": {
                    "oneOf": [
                      {
                        "type": "null"
                      },
                      {
                        "description": "Correlation identifier.",
                        "type": "string"
                      }
                    ]
                  },
                  "namespace_id": {
                    "description": "Namespace identifier.",
                    "minimum": 1,
                    "type": "integer"
                  },
                  "run_id": {
                    "description": "Run identifier.",
                    "type": "string"
                  },
                  "scenario_id": {
                    "description": "Scenario identifier.",
                    "type": "string"
                  },
                  "stage_id": {
                    "description": "Stage identifier.",
                    "type": "string"
                  },
                  "tenant_id": {
                    "description": "Tenant identifier.",
                    "minimum": 1,
                    "type": "integer"
                  },
                  "trigger_id": {
                    "description": "Trigger identifier.",
                    "type": "string"
                  },
                  "trigger_time": {
                    "oneOf": [
                      {
                        "additionalProperties": false,
                        "properties": {
                          "kind": {
                            "const": "unix_millis"
                          },
                          "value": {
                            "type": "integer"
                          }
                        },
                        "required": [
                          "kind",
                          "value"
                        ],
                        "type": "object"
                      },
                      {
                        "additionalProperties": false,
                        "properties": {
                          "kind": {
                            "const": "logical"
                          },
                          "value": {
                            "minimum": 0,
                            "type": "integer"
                          }
                        },
                        "required": [
                          "kind",
                          "value"
                        ],
                        "type": "object"
                      }
                    ]
                  }
                },
                "required": [
                  "tenant_id",
                  "run_id",
                  "scenario_id",
                  "stage_id",
                  "trigger_id",
                  "trigger_time"
                ],
                "type": "object"
              },
              "query": {
                "additionalProperties": false,
                "description": "Evidence query payload.",
                "properties": {
                  "check_id": {
                    "description": "Provider check identifier.",
                    "type": "string"
                  },
                  "params": {
                    "description": "Provider-specific parameter payload.",
                    "type": [
                      "null",
                      "boolean",
                      "number",
                      "string",
                      "array",
                      "object"
                    ]
                  },
                  "provider_id": {
                    "description": "Evidence provider identifier.",
                    "type": "string"
                  }
                },
                "required": [
                  "provider_id",
                  "check_id"
                ],
                "type": "object"
              }
            },
            "required": [
              "query",
              "context"
            ],
            "type": "object"
          },
          "name": {
            "const": "evidence_query"
          }
        },
        "required": [
          "name",
          "arguments"
        ],
        "type": "object"
      },
      "EvidenceQueryToolCallResult": {
        "additionalProperties": false,
        "properties": {
          "content": {
            "items": {
              "additionalProperties": false,
              "properties": {
                "json": {
                  "$schema": "https://json-schema.org/draft/2020-12/schema",
                  "additionalProperties": false,
                  "properties": {
                    "result": {
                      "additionalProperties": false,
                      "properties": {
                        "content_type": {
                          "oneOf": [
                            {
                              "type": "null"
                            },
                            {
                              "description": "Evidence content type.",
                              "type": "string"
                            }
                          ]
                        },
                        "error": {
                          "oneOf": [
                            {
                              "type": "null"
                            },
                            {
                              "additionalProperties": false,
                              "properties": {
                                "code": {
                                  "description": "Stable error code.",
                                  "type": "string"
                                },
                                "details": {
                                  "oneOf": [
                                    {
                                      "type": "null"
                                    },
                                    {
                                      "description": "Optional structured error details.",
                                      "type": [
                                        "null",
                                        "boolean",
                                        "number",
                                        "string",
                                        "array",
                                        "object"
                                      ]
                                    }
                                  ]
                                },
                                "message": {
                                  "description": "Error message.",
                                  "type": "string"
                                }
                              },
                              "required": [
                                "code",
                                "message",
                                "details"
                              ],
                              "type": "object"
                            }
                          ]
                        },
                        "evidence_anchor": {
                          "oneOf": [
                            {
                              "type": "null"
                            },
                            {
                              "additionalProperties": false,
                              "properties": {
                                "anchor_type": {
                                  "description": "Anchor type identifier.",
                                  "type": "string"
                                },
                                "anchor_value": {
                                  "description": "Anchor value.",
                                  "type": "string"
                                }
                              },
                              "required": [
                                "anchor_type",
                                "anchor_value"
                              ],
                              "type": "object"
                            }
                          ]
                        },
                        "evidence_hash": {
                          "oneOf": [
                            {
                              "type": "null"
                            },
                            {
                              "additionalProperties": false,
                              "properties": {
                                "algorithm": {
                                  "enum": [
                                    "sha256"
                                  ],
                                  "type": "string"
                                },
                                "value": {
                                  "description": "Lowercase hex digest.",
                                  "type": "string"
                                }
                              },
                              "required": [
                                "algorithm",
                                "value"
                              ],
                              "type": "object"
                            }
                          ]
                        },
                        "evidence_ref": {
                          "oneOf": [
                            {
                              "type": "null"
                            },
                            {
                              "additionalProperties": false,
                              "properties": {
                                "uri": {
                                  "description": "Evidence reference URI.",
                                  "type": "string"
                                }
                              },
                              "required": [
                                "uri"
                              ],
                              "type": "object"
                            }
                          ]
                        },
                        "lane": {
                          "description": "Trust lane classification for evidence.",
                          "enum": [
                            "verified",
                            "asserted"
                          ],
                          "type": "string"
                        },
                        "signature": {
                          "oneOf": [
                            {
                              "type": "null"
                            },
                            {
                              "additionalProperties": false,
                              "properties": {
                                "key_id": {
                                  "description": "Signing key identifier.",
                                  "type": "string"
                                },
                                "scheme": {
                                  "description": "Signature scheme identifier.",
                                  "type": "string"
                                },
                                "signature": {
                                  "items": {
                                    "maximum": 255,
                                    "minimum": 0,
                                    "type": "integer"
                                  },
                                  "type": "array"
                                }
                              },
                              "required": [
                                "scheme",
                                "key_id",
                                "signature"
                              ],
                              "type": "object"
                            }
                          ]
                        },
                        "value": {
                          "oneOf": [
                            {
                              "type": "null"
                            },
                            {
                              "oneOf": [
                                {
                                  "additionalProperties": false,
                                  "properties": {
                                    "kind": {
                                      "const": "json"
                                    },
                                    "value": {
                                      "description": "Evidence JSON value.",
                                      "type": [
                                        "null",
                                        "boolean",
                                        "number",
                                        "string",
                                        "array",
                                        "object"
                                      ]
                                    }
                                  },
                                  "required": [
                                    "kind",
                                    "value"
                                  ],
                                  "type": "object"
                                },
                                {
                                  "additionalProperties": false,
                                  "properties": {
                                    "kind": {
                                      "const": "bytes"
                                    },
                                    "value": {
                                      "items": {
                                        "maximum": 255,
                                        "minimum": 0,
                                        "type": "integer"
                                      },
                                      "type": "array"
                                    }
                                  },
                                  "required": [
                                    "kind",
                                    "value"
                                  ],
                                  "type": "object"
                                }
                              ]
                            }
                          ]
                        }
                      },
                      "required": [
                        "value",
                        "lane",
                        "error",
                        "evidence_hash",
                        "evidence_ref",
                        "evidence_anchor",
                        "signature",
                        "content_type"
                      ],
                      "type": "object"
                    }
                  },
                  "required": [
                    "result"
                  ],
                  "type": "object"
                },
                "type": {
                  "const": "json"
                }
              },
              "required": [
                "type",
                "json"
              ],
              "type": "object"
            },
            "minItems": 1,
            "type": "array"
          }
        },
        "required": [
          "content"
        ],
        "type": "object"
      },
      "JsonRpcError": {
        "additionalProperties": false,
        "properties": {
          "code": {
            "type": "integer"
          },
          "data": {
            "$ref": "#/components/schemas/JsonRpcErrorData"
          },
          "message": {
            "type": "string"
          }
        },
        "required": [
          "code",
          "message"
        ],
        "type": "object"
      },
      "JsonRpcErrorData": {
        "additionalProperties": false,
        "properties": {
          "kind": {
            "type": "string"
          },
          "request_id": {
            "type": "string"
          },
          "retry_after_ms": {
            "type": "integer"
          },
          "retryable": {
            "type": "boolean"
          }
        },
        "required": [
          "kind",
          "retryable"
        ],
        "type": "object"
      },
      "PrecheckToolCallParams": {
        "additionalProperties": false,
        "properties": {
          "arguments": {
            "$schema": "https://json-schema.org/draft/2020-12/schema",
            "additionalProperties": false,
            "properties": {
              "data_shape": {
                "additionalProperties": false,
                "properties": {
                  "schema_id": {
                    "description": "Data shape identifier.",
                    "type": "string"
                  },
                  "version": {
                    "description": "Data shape version identifier.",
                    "type": "string"
                  }
                },
                "required": [
                  "schema_id",
                  "version"
                ],
                "type": "object"
              },
              "namespace_id": {
                "description": "Namespace identifier.",
                "minimum": 1,
                "type": "integer"
              },
              "payload": {
                "description": "Asserted data payload.",
                "type": [
                  "null",
                  "boolean",
                  "number",
                  "string",
                  "array",
                  "object"
                ]
              },
              "scenario_id": {
                "oneOf": [
                  {
                    "type": "null"
                  },
                  {
                    "description": "Scenario identifier.",
                    "type": "string"
                  }
                ]
              },
              "spec": {
                "oneOf": [
                  {
                    "type": "null"
                  },
                  {
                    "$ref": "decision-gate://contract/schemas/scenario.schema.json"
                  }
                ]
              },
              "stage_id": {
                "oneOf": [
                  {
                    "type": "null"
                  },
                  {
                    "description": "Stage identifier override.",
                    "type": "string"
                  }
                ]
              },
              "tenant_id": {
                "description": "Tenant identifier.",
                "minimum": 1,
                "type": "integer"
              }
            },
            "required": [
              "tenant_id",
              "namespace_id",
              "data_shape",
              "payload"
            ],
            "type": "object"
          },
          "name": {
            "const": "precheck"
          }
        },
        "required": [
          "name",
          "arguments"
        ],
        "type": "object"
      },
      "PrecheckToolCallResult": {
        "additionalProperties": false,
        "properties": {
          "content": {
            "items": {
              "additionalProperties": false,
              "properties": {
                "json": {
                  "$schema": "https://json-schema.org/draft/2020-12/schema",
                  "additionalProperties": false,
                  "properties": {
                    "decision": {
                      "oneOf": [
                        {
                          "additionalProperties": false,
                          "properties": {
                            "kind": {
                              "const": "start"
                            },
                            "stage_id": {
                              "description": "Initial stage identifier.",
                              "type": "string"
                            }
                          },
                          "required": [
                            "kind",
                            "stage_id"
                          ],
                          "type": "object"
                        },
                        {
                          "additionalProperties": false,
                          "properties": {
                            "kind": {
                              "const": "complete"
                            },
                            "stage_id": {
                              "description": "Terminal stage identifier.",
                              "type": "string"
                            }
                          },
                          "required": [
                            "kind",
                            "stage_id"
                          ],
                          "type": "object"
                        },
                        {
                          "additionalProperties": false,
                          "properties": {
                            "from_stage": {
                              "description": "Previous stage identifier.",
                              "type": "string"
                            },
                            "kind": {
                              "const": "advance"
                            },
                            "timeout": {
                              "type": "boolean"
                            },
                            "to_stage": {
                              "description": "Next stage identifier.",
                              "type": "string"
                            }
                          },
                          "required": [
                            "kind",
                            "from_stage",
                            "to_stage",
                            "timeout"
                          ],
                          "type": "object"
                        },
                        {
                          "additionalProperties": false,
                          "properties": {
                            "kind": {
                              "const": "hold"
                            },
                            "summary": {
                              "additionalProperties": false,
                              "properties": {
                                "policy_tags": {
                                  "description": "Policy tags applied to the summary.",
                                  "items": {
                                    "type": "string"
                                  },
                                  "type": "array"
                                },
                                "retry_hint": {
                                  "oneOf": [
                                    {
                                      "type": "null"
                                    },
                                    {
                                      "description": "Optional retry hint.",
                                      "type": "string"
                                    }
                                  ]
                                },
                                "status": {
                                  "description": "Summary status.",
                                  "type": "string"
                                },
                                "unmet_gates": {
                                  "items": {
                                    "description": "Gate identifier.",
                                    "type": "string"
                                  },
                                  "type": "array"
                                }
                              },
                              "required": [
                                "status",
                                "unmet_gates",
                                "retry_hint",
                                "policy_tags"
                              ],
                              "type": "object"
                            }
                          },
                          "required": [
                            "kind",
                            "summary"
                          ],
                          "type": "object"
                        },
                        {
                          "additionalProperties": false,
                          "properties": {
                            "kind": {
                              "const": "fail"
                            },
                            "reason": {
                              "description": "Failure reason.",
                              "type": "string"
                            }
                          },
                          "required": [
                            "kind",
                            "reason"
                          ],
                          "type": "object"
                        }
                      ]
                    },
                    "gate_evaluations": {
                      "items": {
                        "additionalProperties": false,
                        "properties": {
                          "gate_id": {
                            "description": "Gate identifier.",
                            "type": "string"
                          },
                          "status": {
                            "description": "Tri-state evaluation result.",
                            "enum": [
                              "True",
                              "False",
                              "Unknown"
                            ],
                            "type": "string"
                          },
                          "trace": {
                            "items": {
                              "additionalProperties": false,
                              "properties": {
                                "condition_id": {
                                  "description": "Condition identifier.",
                                  "type": "string"
                                },
                                "status": {
                                  "description": "Tri-state evaluation result.",
                                  "enum": [
                                    "True",
                                    "False",
                                    "Unknown"
                                  ],
                                  "type": "string"
                                }
                              },
                              "required": [
                                "condition_id",
                                "status"
                              ],
                              "type": "object"
                            },
                            "type": "array"
                          }
                        },
                        "required": [
                          "gate_id",
                          "status",
                          "trace"
                        ],
                        "type": "object"
                      },
                      "type": "array"
                    }
                  },
                  "required": [
                    "decision",
                    "gate_evaluations"
                  ],
                  "type": "object"
                },
                "type": {
                  "const": "json"
                }
              },
              "required": [
                "type",
                "json"
              ],
              "type": "object"
            },
            "minItems": 1,
            "type": "array"
          }
        },
        "required": [
          "content"
        ],
        "type": "object"
      },
      "ProviderCheckSchemaGetToolCallParams": {
        "additionalProperties": false,
        "properties": {
          "arguments": {
            "$schema": "https://json-schema.org/draft/2020-12/schema",
            "additionalProperties": false,
            "properties": {
              "check_id": {
                "description": "Provider check identifier.",
                "type": "string"
              },
              "provider_id": {
                "description": "Provider identifier.",
                "type": "string"
              }
            },
            "required": [
              "provider_id",
              "check_id"
            ],
            "type": "object"
          },
          "name": {
            "const": "provider_check_schema_get"
          }
        },
        "required": [
          "name",
          "arguments"
        ],
        "type": "object"
      },
      "ProviderCheckSchemaGetToolCallResult": {
        "additionalProperties": false,
        "properties": {
          "content": {
            "items": {
              "additionalProperties": false,
              "properties": {
                "json": {
                  "$schema": "https://json-schema.org/draft/2020-12/schema",
                  "additionalProperties": false,
                  "properties": {
                    "allowed_comparators": {
                      "description": "Comparator allow-list for this check.",
                      "items": {
                        "description": "Comparator applied to evidence values.",
                        "enum": [
                          "equals",
                          "not_equals",
                          "greater_than",
                          "greater_than_or_equal",
                          "less_than",
                          "less_than_or_equal",
                          "lex_greater_than",
                          "lex_greater_than_or_equal",
                          "lex_less_than",
                          "lex_less_than_or_equal",
                          "contains",
                          "in_set",
                          "deep_equals",
                          "deep_not_equals",
                          "exists",
                          "not_exists"
                        ],
                        "type": "string"
                      },
                      "type": "array"
                    },
                    "anchor_types": {
                      "description": "Anchor types emitted by this check.",
                      "items": {
                        "type": "string"
                      },
                      "type": "array"
                    },
                    "check_id": {
                      "description": "Check identifier.",
                      "type": "string"
                    },
                    "content_types": {
                      "description": "Content types for check output.",
                      "items": {
                        "type": "string"
                      },
                      "type": "array"
                    },
                    "contract_hash": {
                      "additionalProperties": false,
                      "properties": {
                        "algorithm": {
                          "enum": [
                            "sha256"
                          ],
                          "type": "string"
                        },
                        "value": {
                          "description": "Lowercase hex digest.",
                          "type": "string"
                        }
                      },
                      "required": [
                        "algorithm",
                        "value"
                      ],
                      "type": "object"
                    },
                    "determinism": {
                      "description": "Determinism classification for provider checks.",
                      "enum": [
                        "deterministic",
                        "time_dependent",
                        "external"
                      ],
                      "type": "string"
                    },
                    "examples": {
                      "items": {
                        "additionalProperties": false,
                        "properties": {
                          "description": {
                            "description": "Short example description.",
                            "type": "string"
                          },
                          "params": {
                            "description": "Example params payload.",
                            "type": [
                              "null",
                              "boolean",
                              "number",
                              "string",
                              "array",
                              "object"
                            ]
                          },
                          "result": {
                            "description": "Example result value.",
                            "type": [
                              "null",
                              "boolean",
                              "number",
                              "string",
                              "array",
                              "object"
                            ]
                          }
                        },
                        "required": [
                          "description",
                          "params",
                          "result"
                        ],
                        "type": "object"
                      },
                      "type": "array"
                    },
                    "params_required": {
                      "description": "Whether params are required for this check.",
                      "type": "boolean"
                    },
                    "params_schema": {
                      "description": "JSON schema for check params.",
                      "type": [
                        "null",
                        "boolean",
                        "number",
                        "string",
                        "array",
                        "object"
                      ]
                    },
                    "provider_id": {
                      "description": "Provider identifier.",
                      "type": "string"
                    },
                    "result_schema": {
                      "description": "JSON schema for check result value.",
                      "type": [
                        "null",
                        "boolean",
                        "number",
                        "string",
                        "array",
                        "object"
                      ]
                    }
                  },
                  "required": [
                    "provider_id",
                    "check_id",
                    "params_required",
                    "params_schema",
                    "result_schema",
                    "allowed_comparators",
                    "determinism",
                    "anchor_types",
                    "content_types",
                    "examples",
                    "contract_hash"
                  ],
                  "type": "object"
                },
                "type": {
                  "const": "json"
                }
              },
              "required": [
                "type",
                "json"
              ],
              "type": "object"
            },
            "minItems": 1,
            "type": "array"
          }
        },
        "required": [
          "content"
        ],
        "type": "object"
      },
      "ProviderContractGetToolCallParams": {
        "additionalProperties": false,
        "properties": {
          "arguments": {
            "$schema": "https://json-schema.org/draft/2020-12/schema",
            "additionalProperties": false,
            "properties": {
              "provider_id": {
                "description": "Provider identifier.",
                "type": "string"
              }
            },
            "required": [
              "provider_id"
            ],
            "type": "object"
          },
          "name": {
            "const": "provider_contract_get"
          }
        },
        "required": [
          "name",
          "arguments"
        ],
        "type": "object"
      },
      "ProviderContractGetToolCallResult": {
        "additionalProperties": false,
        "properties": {
          "content": {
            "items": {
              "additionalProperties": false,
              "properties": {
                "json": {
                  "$schema": "https://json-schema.org/draft/2020-12/schema",
                  "additionalProperties": false,
                  "properties": {
                    "contract": {
                      "additionalProperties": false,
                      "properties": {
                        "checks": {
                          "items": {
                            "additionalProperties": false,
                            "properties": {
                              "allowed_comparators": {
                                "description": "Comparator allow-list for this check.",
                                "items": {
                                  "description": "Comparator applied to evidence values.",
                                  "enum": [
                                    "equals",
                                    "not_equals",
                                    "greater_than",
                                    "greater_than_or_equal",
                                    "less_than",
                                    "less_than_or_equal",
                                    "lex_greater_than",
                                    "lex_greater_than_or_equal",
                                    "lex_less_than",
                                    "lex_less_than_or_equal",
                                    "contains",
                                    "in_set",
                                    "deep_equals",
                                    "deep_not_equals",
                                    "exists",
                                    "not_exists"
                                  ],
                                  "type": "string"
                                },
                                "type": "array"
                              },
                              "anchor_types": {
                                "description": "Anchor types emitted by this check.",
                                "items": {
                                  "type": "string"
                                },
                                "type": "array"
                              },
                              "check_id": {
                                "description": "Check identifier.",
                                "type": "string"
                              },
                              "content_types": {
                                "description": "Content types for check output.",
                                "items": {
                                  "type": "string"
                                },
                                "type": "array"
                              },
                              "description": {
                                "description": "Check description.",
                                "type": "string"
                              },
                              "determinism": {
                                "description": "Determinism classification for provider checks.",
                                "enum": [
                                  "deterministic",
                                  "time_dependent",
                                  "external"
                                ],
                                "type": "string"
                              },
                              "examples": {
                                "items": {
                                  "additionalProperties": false,
                                  "properties": {
                                    "description": {
                                      "description": "Short example description.",
                                      "type": "string"
                                    },
                                    "params": {
                                      "description": "Example params payload.",
                                      "type": [
                                        "null",
                                        "boolean",
                                        "number",
                                        "string",
                                        "array",
                                        "object"
                                      ]
                                    },
                                    "result": {
                                      "description": "Example result value.",
                                      "type": [
                                        "null",
                                        "boolean",
                                        "number",
                                        "string",
                                        "array",
                                        "object"
                                      ]
                                    }
                                  },
                                  "required": [
                                    "description",
                                    "params",
                                    "result"
                                  ],
                                  "type": "object"
                                },
                                "type": "array"
                              },
                              "params_required": {
                                "description": "Whether params are required for this check.",
                                "type": "boolean"
                              },
                              "params_schema": {
                                "description": "JSON schema for check params.",
                                "type": [
                                  "null",
                                  "boolean",
                                  "number",
                                  "string",
                                  "array",
                                  "object"
                                ]
                              },
                              "result_schema": {
                                "description": "JSON schema for check result values.",
                                "type": [
                                  "null",
                                  "boolean",
                                  "number",
                                  "string",
                                  "array",
                                  "object"
                                ]
                              }
                            },
                            "required": [
                              "check_id",
                              "description",
                              "determinism",
                              "params_required",
                              "params_schema",
                              "result_schema",
                              "allowed_comparators",
                              "anchor_types",
                              "content_types",
                              "examples"
                            ],
                            "type": "object"
                          },
                          "type": "array"
                        },
                        "config_schema": {
                          "description": "Provider configuration schema.",
                          "type": [
                            "null",
                            "boolean",
                            "number",
                            "string",
                            "array",
                            "object"
                          ]
                        },
                        "description": {
                          "description": "Provider description.",
                          "type": "string"
                        },
                        "name": {
                          "description": "Provider display name.",
                          "type": "string"
                        },
                        "notes": {
                          "description": "Provider notes and guidance.",
                          "items": {
                            "type": "string"
                          },
                          "type": "array"
                        },
                        "provider_id": {
                          "description": "Provider identifier.",
                          "type": "string"
                        },
                        "transport": {
                          "description": "Provider transport kind.",
                          "enum": [
                            "builtin",
                            "mcp"
                          ],
                          "type": "string"
                        }
                      },
                      "required": [
                        "provider_id",
                        "name",
                        "description",
                        "transport",
                        "config_schema",
                        "checks",
                        "notes"
                      ],
                      "type": "object"
                    },
                    "contract_hash": {
                      "additionalProperties": false,
                      "properties": {
                        "algorithm": {
                          "enum": [
                            "sha256"
                          ],
                          "type": "string"
                        },
                        "value": {
                          "description": "Lowercase hex digest.",
                          "type": "string"
                        }
                      },
                      "required": [
                        "algorithm",
                        "value"
                      ],
                      "type": "object"
                    },
                    "provider_id": {
                      "description": "Provider identifier.",
                      "type": "string"
                    },
                    "source": {
                      "description": "Contract source origin.",
                      "enum": [
                        "builtin",
                        "file"
                      ],
                      "type": "string"
                    },
                    "version": {
                      "description": "Optional contract version label.",
                      "oneOf": [
                        {
                          "type": "null"
                        },
                        {
                          "type": "string"
                        }
                      ]
                    }
                  },
                  "required": [
                    "provider_id",
                    "contract",
                    "contract_hash",
                    "source",
                    "version"
                  ],
                  "type": "object"
                },
                "type": {
                  "const": "json"
                }
              },
              "required": [
                "type",
                "json"
              ],
              "type": "object"
            },
            "minItems": 1,
            "type": "array"
          }
        },
        "required": [
          "content"
        ],
        "type": "object"
      },
      "ProvidersListToolCallParams": {
        "additionalProperties": false,
        "properties": {
          "arguments": {
            "$schema": "https://json-schema.org/draft/2020-12/schema",
            "additionalProperties": false,
            "properties": {},
            "required": [],
            "type": "object"
          },
          "name": {
            "const": "providers_list"
          }
        },
        "required": [
          "name",
          "arguments"
        ],
        "type": "object"
      },
      "ProvidersListToolCallResult": {
        "additionalProperties": false,
        "properties": {
          "content": {
            "items": {
              "additionalProperties": false,
              "properties": {
                "json": {
                  "$schema": "https://json-schema.org/draft/2020-12/schema",
                  "additionalProperties": false,
                  "properties": {
                    "providers": {
                      "items": {
                        "additionalProperties": false,
                        "properties": {
                          "checks": {
                            "items": {
                              "description": "Check identifier.",
                              "type": "string"
                            },
                            "type": "array"
                          },
                          "provider_id": {
                            "description": "Provider identifier.",
                            "type": "string"
                          },
                          "transport": {
                            "description": "Provider transport type.",
                            "enum": [
                              "builtin",
                              "mcp"
                            ],
                            "type": "string"
                          }
                        },
                        "required": [
                          "provider_id",
                          "transport",
                          "checks"
                        ],
                        "type": "object"
                      },
                      "type": "array"
                    }
                  },
                  "required": [
                    "providers"
                  ],
                  "type": "object"
                },
                "type": {
                  "const": "json"
                }
              },
              "required": [
                "type",
                "json"
              ],
              "type": "object"
            },
            "minItems": 1,
            "type": "array"
          }
        },
        "required": [
          "content"
        ],
        "type": "object"
      },
      "RunpackExportToolCallParams": {
        "additionalProperties": false,
        "properties": {
          "arguments": {
            "$schema": "https://json-schema.org/draft/2020-12/schema",
            "additionalProperties": false,
            "properties": {
              "generated_at": {
                "description": "Timestamp recorded in the manifest.",
                "oneOf": [
                  {
                    "additionalProperties": false,
                    "properties": {
                      "kind": {
                        "const": "unix_millis"
                      },
                      "value": {
                        "type": "integer"
                      }
                    },
                    "required": [
                      "kind",
                      "value"
                    ],
                    "type": "object"
                  },
                  {
                    "additionalProperties": false,
                    "properties": {
                      "kind": {
                        "const": "logical"
                      },
                      "value": {
                        "minimum": 0,
                        "type": "integer"
                      }
                    },
                    "required": [
                      "kind",
                      "value"
                    ],
                    "type": "object"
                  }
                ]
              },
              "include_verification": {
                "description": "Generate a verification report artifact.",
                "type": "boolean"
              },
              "manifest_name": {
                "description": "Optional override for the manifest file name.",
                "oneOf": [
                  {
                    "type": "null"
                  },
                  {
                    "description": "Manifest file name.",
                    "type": "string"
                  }
                ]
              },
              "namespace_id": {
                "description": "Namespace identifier.",
                "minimum": 1,
                "type": "integer"
              },
              "output_dir": {
                "description": "Optional output directory (required for filesystem export).",
                "oneOf": [
                  {
                    "type": "null"
                  },
                  {
                    "description": "Output directory path.",
                    "type": "string"
                  }
                ]
              },
              "run_id": {
                "description": "Run identifier.",
                "type": "string"
              },
              "scenario_id": {
                "description": "Scenario identifier.",
                "type": "string"
              },
              "tenant_id": {
                "description": "Tenant identifier.",
                "minimum": 1,
                "type": "integer"
              }
            },
            "required": [
              "scenario_id",
              "tenant_id",
              "namespace_id",
              "run_id",
              "generated_at",
              "include_verification"
            ],
            "type": "object"
          },
          "name": {
            "const": "runpack_export"
          }
        },
        "required": [
          "name",
          "arguments"
        ],
        "type": "object"
      },
      "RunpackExportToolCallResult": {
        "additionalProperties": false,
        "properties": {
          "content": {
            "items": {
              "additionalProperties": false,
              "properties": {
                "json": {
                  "$schema": "https://json-schema.org/draft/2020-12/schema",
                  "additionalProperties": false,
                  "properties": {
                    "manifest": {
                      "additionalProperties": false,
                      "properties": {
                        "artifacts": {
                          "items": {
                            "additionalProperties": false,
                            "properties": {
                              "artifact_id": {
                                "description": "Artifact identifier.",
                                "type": "string"
                              },
                              "content_type": {
                                "oneOf": [
                                  {
                                    "type": "null"
                                  },
                                  {
                                    "description": "Artifact content type.",
                                    "type": "string"
                                  }
                                ]
                              },
                              "hash": {
                                "additionalProperties": false,
                                "properties": {
                                  "algorithm": {
                                    "enum": [
                                      "sha256"
                                    ],
                                    "type": "string"
                                  },
                                  "value": {
                                    "description": "Lowercase hex digest.",
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "algorithm",
                                  "value"
                                ],
                                "type": "object"
                              },
                              "kind": {
                                "enum": [
                                  "scenario_spec",
                                  "trigger_log",
                                  "gate_eval_log",
                                  "decision_log",
                                  "packet_log",
                                  "dispatch_log",
                                  "evidence_log",
                                  "submission_log",
                                  "tool_transcript",
                                  "verifier_report",
                                  "custom"
                                ],
                                "type": "string"
                              },
                              "path": {
                                "description": "Runpack-relative artifact path.",
                                "type": "string"
                              },
                              "required": {
                                "type": "boolean"
                              }
                            },
                            "required": [
                              "artifact_id",
                              "kind",
                              "path",
                              "content_type",
                              "hash",
                              "required"
                            ],
                            "type": "object"
                          },
                          "type": "array"
                        },
                        "generated_at": {
                          "oneOf": [
                            {
                              "additionalProperties": false,
                              "properties": {
                                "kind": {
                                  "const": "unix_millis"
                                },
                                "value": {
                                  "type": "integer"
                                }
                              },
                              "required": [
                                "kind",
                                "value"
                              ],
                              "type": "object"
                            },
                            {
                              "additionalProperties": false,
                              "properties": {
                                "kind": {
                                  "const": "logical"
                                },
                                "value": {
                                  "minimum": 0,
                                  "type": "integer"
                                }
                              },
                              "required": [
                                "kind",
                                "value"
                              ],
                              "type": "object"
                            }
                          ]
                        },
                        "hash_algorithm": {
                          "enum": [
                            "sha256"
                          ],
                          "type": "string"
                        },
                        "integrity": {
                          "additionalProperties": false,
                          "properties": {
                            "file_hashes": {
                              "items": {
                                "additionalProperties": false,
                                "properties": {
                                  "hash": {
                                    "additionalProperties": false,
                                    "properties": {
                                      "algorithm": {
                                        "enum": [
                                          "sha256"
                                        ],
                                        "type": "string"
                                      },
                                      "value": {
                                        "description": "Lowercase hex digest.",
                                        "type": "string"
                                      }
                                    },
                                    "required": [
                                      "algorithm",
                                      "value"
                                    ],
                                    "type": "object"
                                  },
                                  "path": {
                                    "description": "Runpack-relative artifact path.",
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "path",
                                  "hash"
                                ],
                                "type": "object"
                              },
                              "type": "array"
                            },
                            "root_hash": {
                              "additionalProperties": false,
                              "properties": {
                                "algorithm": {
                                  "enum": [
                                    "sha256"
                                  ],
                                  "type": "string"
                                },
                                "value": {
                                  "description": "Lowercase hex digest.",
                                  "type": "string"
                                }
                              },
                              "required": [
                                "algorithm",
                                "value"
                              ],
                              "type": "object"
                            }
                          },
                          "required": [
                            "file_hashes",
                            "root_hash"
                          ],
                          "type": "object"
                        },
                        "manifest_version": {
                          "description": "Runpack manifest version.",
                          "type": "string"
                        },
                        "namespace_id": {
                          "description": "Namespace identifier.",
                          "minimum": 1,
                          "type": "integer"
                        },
                        "run_id": {
                          "description": "Run identifier.",
                          "type": "string"
                        },
                        "scenario_id": {
                          "description": "Scenario identifier.",
                          "type": "string"
                        },
                        "security": {
                          "additionalProperties": false,
                          "properties": {
                            "dev_permissive": {
                              "type": "boolean"
                            },
                            "namespace_authority": {
                              "description": "Namespace authority mode label.",
                              "type": "string"
                            }
                          },
                          "required": [
                            "dev_permissive",
                            "namespace_authority"
                          ],
                          "type": "object"
                        },
                        "spec_hash": {
                          "additionalProperties": false,
                          "properties": {
                            "algorithm": {
                              "enum": [
                                "sha256"
                              ],
                              "type": "string"
                            },
                            "value": {
                              "description": "Lowercase hex digest.",
                              "type": "string"
                            }
                          },
                          "required": [
                            "algorithm",
                            "value"
                          ],
                          "type": "object"
                        },
                        "tenant_id": {
                          "description": "Tenant identifier.",
                          "minimum": 1,
                          "type": "integer"
                        },
                        "verifier_mode": {
                          "enum": [
                            "offline_strict",
                            "offline_with_fetch"
                          ],
                          "type": "string"
                        }
                      },
                      "required": [
                        "manifest_version",
                        "generated_at",
                        "tenant_id",
                        "namespace_id",
                        "scenario_id",
                        "run_id",
                        "spec_hash",
                        "hash_algorithm",
                        "verifier_mode",
                        "integrity",
                        "artifacts"
                      ],
                      "type": "object"
                    },
                    "report": {
                      "oneOf": [
                        {
                          "type": "null"
                        },
                        {
                          "additionalProperties": false,
                          "properties": {
                            "checked_files": {
                              "minimum": 0,
                              "type": "integer"
                            },
                            "errors": {
                              "description": "Verification error messages.",
                              "items": {
                                "type": "string"
                              },
                              "type": "array"
                            },
                            "status": {
                              "description": "Runpack verification status.",
                              "enum": [
                                "pass",
                                "fail"
                              ],
                              "type": "string"
                            }
                          },
                          "required": [
                            "status",
                            "checked_files",
                            "errors"
                          ],
                          "type": "object"
                        }
                      ]
                    },
                    "storage_uri": {
                      "description": "Optional storage URI for managed runpack storage backends.",
                      "oneOf": [
                        {
                          "type": "null"
                        },
                        {
                          "type": "string"
                        }
                      ]
                    }
                  },
                  "required": [
                    "manifest",
                    "report"
                  ],
                  "type": "object"
                },
                "type": {
                  "const": "json"
                }
              },
              "required": [
                "type",
                "json"
              ],
              "type": "object"
            },
            "minItems": 1,
            "type": "array"
          }
        },
        "required": [
          "content"
        ],
        "type": "object"
      },
      "RunpackVerifyToolCallParams": {
        "additionalProperties": false,
        "properties": {
          "arguments": {
            "$schema": "https://json-schema.org/draft/2020-12/schema",
            "additionalProperties": false,
            "properties": {
              "manifest_path": {
                "description": "Manifest path relative to runpack root.",
                "type": "string"
              },
              "runpack_dir": {
                "description": "Runpack root directory.",
                "type": "string"
              }
            },
            "required": [
              "runpack_dir",
              "manifest_path"
            ],
            "type": "object"
          },
          "name": {
            "const": "runpack_verify"
          }
        },
        "required": [
          "name",
          "arguments"
        ],
        "type": "object"
      },
      "RunpackVerifyToolCallResult": {
        "additionalProperties": false,
        "properties": {
          "content": {
            "items": {
              "additionalProperties": false,
              "properties": {
                "json": {
                  "$schema": "https://json-schema.org/draft/2020-12/schema",
                  "additionalProperties": false,
                  "properties": {
                    "report": {
                      "additionalProperties": false,
                      "properties": {
                        "checked_files": {
                          "minimum": 0,
                          "type": "integer"
                        },
                        "errors": {
                          "description": "Verification error messages.",
                          "items": {
                            "type": "string"
                          },
                          "type": "array"
                        },
                        "status": {
                          "description": "Runpack verification status.",
                          "enum": [
                            "pass",
                            "fail"
                          ],
                          "type": "string"
                        }
                      },
                      "required": [
                        "status",
                        "checked_files",
                        "errors"
                      ],
                      "type": "object"
                    },
                    "status": {
                      "description": "Runpack verification status.",
                      "enum": [
                        "pass",
                        "fail"
                      ],
                      "type": "string"
                    }
                  },
                  "required": [
                    "report",
                    "status"
                  ],
                  "type": "object"
                },
                "type": {
                  "const": "json"
                }
              },
              "required": [
                "type",
                "json"
              ],
              "type": "object"
            },
            "minItems": 1,
            "type": "array"
          }
        },
        "required": [
          "content"
        ],
        "type": "object"
      },
      "ScenarioDefineToolCallParams": {
        "additionalProperties": false,
        "properties": {
          "arguments": {
            "$schema": "https://json-schema.org/draft/2020-12/schema",
            "additionalProperties": false,
            "properties": {
              "spec": {
                "$ref": "decision-gate://contract/schemas/scenario.schema.json",
                "description": "Scenario specification to register."
              }
            },
            "required": [
              "spec"
            ],
            "type": "object"
          },
          "name": {
            "const": "scenario_define"
          }
        },
        "required": [
          "name",
          "arguments"
        ],
        "type": "object"
      },
      "ScenarioDefineToolCallResult": {
        "additionalProperties": false,
        "properties": {
          "content": {
            "items": {
              "additionalProperties": false,
              "properties": {
                "json": {
                  "$schema": "https://json-schema.org/draft/2020-12/schema",
                  "additionalProperties": false,
                  "properties": {
                    "scenario_id": {
                      "description": "Scenario identifier.",
                      "type": "string"
                    },
                    "spec_hash": {
                      "additionalProperties": false,
                      "properties": {
                        "algorithm": {
                          "enum": [
                            "sha256"
                          ],
                          "type": "string"
                        },
                        "value": {
                          "description": "Lowercase hex digest.",
                          "type": "string"
                        }
                      },
                      "required": [
                        "algorithm",
                        "value"
                      ],
                      "type": "object"
                    }
                  },
                  "required": [
                    "scenario_id",
                    "spec_hash"
                  ],
                  "type": "object"
                },
                "type": {
                  "const": "json"
                }
              },
              "required": [
                "type",
                "json"
              ],
              "type": "object"
            },
            "minItems": 1,
            "type": "array"
          }
        },
        "required": [
          "content"
        ],
        "type": "object"
      },
      "ScenarioNextToolCallParams": {
        "additionalProperties": false,
        "properties": {
          "arguments": {
            "$schema": "https://json-schema.org/draft/2020-12/schema",
            "additionalProperties": false,
            "properties": {
              "feedback": {
                "description": "Optional feedback level override for scenario_next.",
                "oneOf": [
                  {
                    "type": "null"
                  },
                  {
                    "description": "Feedback disclosure level.",
                    "enum": [
                      "summary",
                      "trace",
                      "evidence"
                    ],
                    "type": "string"
                  }
                ]
              },
              "request": {
                "additionalProperties": false,
                "description": "Next request payload from an agent.",
                "properties": {
                  "agent_id": {
                    "description": "Agent identifier.",
                    "type": "string"
                  },
                  "correlation_id": {
                    "oneOf": [
                      {
                        "type": "null"
                      },
                      {
                        "description": "Correlation identifier.",
                        "type": "string"
                      }
                    ]
                  },
                  "namespace_id": {
                    "description": "Namespace identifier.",
                    "minimum": 1,
                    "type": "integer"
                  },
                  "run_id": {
                    "description": "Run identifier.",
                    "type": "string"
                  },
                  "tenant_id": {
                    "description": "Tenant identifier.",
                    "minimum": 1,
                    "type": "integer"
                  },
                  "time": {
                    "oneOf": [
                      {
                        "additionalProperties": false,
                        "properties": {
                          "kind": {
                            "const": "unix_millis"
                          },
                          "value": {
                            "type": "integer"
                          }
                        },
                        "required": [
                          "kind",
                          "value"
                        ],
                        "type": "object"
                      },
                      {
                        "additionalProperties": false,
                        "properties": {
                          "kind": {
                            "const": "logical"
                          },
                          "value": {
                            "minimum": 0,
                            "type": "integer"
                          }
                        },
                        "required": [
                          "kind",
                          "value"
                        ],
                        "type": "object"
                      }
                    ]
                  },
                  "trigger_id": {
                    "description": "Trigger identifier.",
                    "type": "string"
                  }
                },
                "required": [
                  "tenant_id",
                  "namespace_id",
                  "run_id",
                  "trigger_id",
                  "agent_id",
                  "time"
                ],
                "type": "object"
              },
              "scenario_id": {
                "description": "Scenario identifier.",
                "type": "string"
              }
            },
            "required": [
              "scenario_id",
              "request"
            ],
            "type": "object"
          },
          "name": {
            "const": "scenario_next"
          }
        },
        "required": [
          "name",
          "arguments"
        ],
        "type": "object"
      },
      "ScenarioNextToolCallResult": {
        "additionalProperties": false,
        "properties": {
          "content": {
            "items": {
              "additionalProperties": false,
              "properties": {
                "json": {
                  "additionalProperties": false,
                  "properties": {
                    "decision": {
                      "additionalProperties": false,
                      "properties": {
                        "correlation_id": {
                          "oneOf": [
                            {
                              "type": "null"
                            },
                            {
                              "description": "Correlation identifier.",
                              "type": "string"
                            }
                          ]
                        },
                        "decided_at": {
                          "oneOf": [
                            {
                              "additionalProperties": false,
                              "properties": {
                                "kind": {
                                  "const": "unix_millis"
                                },
                                "value": {
                                  "type": "integer"
                                }
                              },
                              "required": [
                                "kind",
                                "value"
                              ],
                              "type": "object"
                            },
                            {
                              "additionalProperties": false,
                              "properties": {
                                "kind": {
                                  "const": "logical"
                                },
                                "value": {
                                  "minimum": 0,
                                  "type": "integer"
                                }
                              },
                              "required": [
                                "kind",
                                "value"
                              ],
                              "type": "object"
                            }
                          ]
                        },
                        "decision_id": {
                          "description": "Decision identifier.",
                          "type": "string"
                        },
                        "outcome": {
                          "oneOf": [
                            {
                              "additionalProperties": false,
                              "properties": {
                                "kind": {
                                  "const": "start"
                                },
                                "stage_id": {
                                  "description": "Initial stage identifier.",
                                  "type": "string"
                                }
                              },
                              "required": [
                                "kind",
                                "stage_id"
                              ],
                              "type": "object"
                            },
                            {
                              "additionalProperties": false,
                              "properties": {
                                "kind": {
                                  "const": "complete"
                                },
                                "stage_id": {
                                  "description": "Terminal stage identifier.",
                                  "type": "string"
                                }
                              },
                              "required": [
                                "kind",
                                "stage_id"
                              ],
                              "type": "object"
                            },
                            {
                              "additionalProperties": false,
                              "properties": {
                                "from_stage": {
                                  "description": "Previous stage identifier.",
                                  "type": "string"
                                },
                                "kind": {
                                  "const": "advance"
                                },
                                "timeout": {
                                  "type": "boolean"
                                },
                                "to_stage": {
                                  "description": "Next stage identifier.",
                                  "type": "string"
                                }
                              },
                              "required": [
                                "kind",
                                "from_stage",
                                "to_stage",
                                "timeout"
                              ],
                              "type": "object"
                            },
                            {
                              "additionalProperties": false,
                              "properties": {
                                "kind": {
                                  "const": "hold"
                                },
                                "summary": {
                                  "additionalProperties": false,
                                  "properties": {
                                    "policy_tags": {
                                      "description": "Policy tags applied to the summary.",
                                      "items": {
                                        "type": "string"
                                      },
                                      "type": "array"
                                    },
                                    "retry_hint": {
                                      "oneOf": [
                                        {
                                          "type": "null"
                                        },
                                        {
                                          "description": "Optional retry hint.",
                                          "type": "string"
                                        }
                                      ]
                                    },
                                    "status": {
                                      "description": "Summary status.",
                                      "type": "string"
                                    },
                                    "unmet_gates": {
                                      "items": {
                                        "description": "Gate identifier.",
                                        "type": "string"
                                      },
                                      "type": "array"
                                    }
                                  },
                                  "required": [
                                    "status",
                                    "unmet_gates",
                                    "retry_hint",
                                    "policy_tags"
                                  ],
                                  "type": "object"
                                }
                              },
                              "required": [
                                "kind",
                                "summary"
                              ],
                              "type": "object"
                            },
                            {
                              "additionalProperties": false,
                              "properties": {
                                "kind": {
                                  "const": "fail"
                                },
                                "reason": {
                                  "description": "Failure reason.",
                                  "type": "string"
                                }
                              },
                              "required": [
                                "kind",
                                "reason"
                              ],
                              "type": "object"
                            }
                          ]
                        },
                        "seq": {
                          "minimum": 0,
                          "type": "integer"
                        },
                        "stage_id": {
                          "description": "Stage identifier.",
                          "type": "string"
                        },
                        "trigger_id": {
                          "description": "Trigger identifier.",
                          "type": "string"
                        }
                      },
                      "required": [
                        "decision_id",
                        "seq",
                        "trigger_id",
                        "stage_id",
                        "decided_at",
                        "outcome",
                        "correlation_id"
                      ],
                      "type": "object"
                    },
                    "feedback": {
                      "oneOf": [
                        {
                          "type": "null"
                        },
                        {
                          "additionalProperties": false,
                          "properties": {
                            "denied_reason": {
                              "oneOf": [
                                {
                                  "type": "null"
                                },
                                {
                                  "description": "Optional denial reason for requested feedback.",
                                  "type": "string"
                                }
                              ]
                            },
                            "gate_evaluations": {
                              "oneOf": [
                                {
                                  "type": "null"
                                },
                                {
                                  "items": {
                                    "additionalProperties": false,
                                    "properties": {
                                      "gate_id": {
                                        "description": "Gate identifier.",
                                        "type": "string"
                                      },
                                      "status": {
                                        "description": "Tri-state evaluation result.",
                                        "enum": [
                                          "True",
                                          "False",
                                          "Unknown"
                                        ],
                                        "type": "string"
                                      },
                                      "trace": {
                                        "items": {
                                          "additionalProperties": false,
                                          "properties": {
                                            "condition_id": {
                                              "description": "Condition identifier.",
                                              "type": "string"
                                            },
                                            "status": {
                                              "description": "Tri-state evaluation result.",
                                              "enum": [
                                                "True",
                                                "False",
                                                "Unknown"
                                              ],
                                              "type": "string"
                                            }
                                          },
                                          "required": [
                                            "condition_id",
                                            "status"
                                          ],
                                          "type": "object"
                                        },
                                        "type": "array"
                                      }
                                    },
                                    "required": [
                                      "gate_id",
                                      "status",
                                      "trace"
                                    ],
                                    "type": "object"
                                  },
                                  "type": "array"
                                }
                              ]
                            },
                            "gate_records": {
                              "oneOf": [
                                {
                                  "type": "null"
                                },
                                {
                                  "items": {
                                    "additionalProperties": false,
                                    "properties": {
                                      "evaluation": {
                                        "additionalProperties": false,
                                        "properties": {
                                          "gate_id": {
                                            "description": "Gate identifier.",
                                            "type": "string"
                                          },
                                          "status": {
                                            "description": "Tri-state evaluation result.",
                                            "enum": [
                                              "True",
                                              "False",
                                              "Unknown"
                                            ],
                                            "type": "string"
                                          },
                                          "trace": {
                                            "items": {
                                              "additionalProperties": false,
                                              "properties": {
                                                "condition_id": {
                                                  "description": "Condition identifier.",
                                                  "type": "string"
                                                },
                                                "status": {
                                                  "description": "Tri-state evaluation result.",
                                                  "enum": [
                                                    "True",
                                                    "False",
                                                    "Unknown"
                                                  ],
                                                  "type": "string"
                                                }
                                              },
                                              "required": [
                                                "condition_id",
                                                "status"
                                              ],
                                              "type": "object"
                                            },
                                            "type": "array"
                                          }
                                        },
                                        "required": [
                                          "gate_id",
                                          "status",
                                          "trace"
                                        ],
                                        "type": "object"
                                      },
                                      "evidence": {
                                        "items": {
                                          "additionalProperties": false,
                                          "properties": {
                                            "condition_id": {
                                              "description": "Condition identifier.",
                                              "type": "string"
                                            },
                                            "result": {
                                              "additionalProperties": false,
                                              "properties": {
                                                "content_type": {
                                                  "oneOf": [
                                                    {
                                                      "type": "null"
                                                    },
                                                    {
                                                      "description": "Evidence content type.",
                                                      "type": "string"
                                                    }
                                                  ]
                                                },
                                                "error": {
                                                  "oneOf": [
                                                    {
                                                      "type": "null"
                                                    },
                                                    {
                                                      "additionalProperties": false,
                                                      "properties": {
                                                        "code": {
                                                          "description": "Stable error code.",
                                                          "type": "string"
                                                        },
                                                        "details": {
                                                          "oneOf": [
                                                            {
                                                              "type": "null"
                                                            },
                                                            {
                                                              "description": "Optional structured error details.",
                                                              "type": [
                                                                "null",
                                                                "boolean",
                                                                "number",
                                                                "string",
                                                                "array",
                                                                "object"
                                                              ]
                                                            }
                                                          ]
                                                        },
                                                        "message": {
                                                          "description": "Error message.",
                                                          "type": "string"
                                                        }
                                                      },
                                                      "required": [
                                                        "code",
                                                        "message",
                                                        "details"
                                                      ],
                                                      "type": "object"
                                                    }
                                                  ]
                                                },
                                                "evidence_anchor": {
                                                  "oneOf": [
                                                    {
                                                      "type": "null"
                                                    },
                                                    {
                                                      "additionalProperties": false,
                                                      "properties": {
                                                        "anchor_type": {
                                                          "description": "Anchor type identifier.",
                                                          "type": "string"
                                                        },
                                                        "anchor_value": {
                                                          "description": "Anchor value.",
                                                          "type": "string"
                                                        }
                                                      },
                                                      "required": [
                                                        "anchor_type",
                                                        "anchor_value"
                                                      ],
                                                      "type": "object"
                                                    }
                                                  ]
                                                },
                                                "evidence_hash": {
                                                  "oneOf": [
                                                    {
                                                      "type": "null"
                                                    },
                                                    {
                                                      "additionalProperties": false,
                                                      "properties": {
                                                        "algorithm": {
                                                          "enum": [
                                                            "sha256"
                                                          ],
                                                          "type": "string"
                                                        },
                                                        "value": {
                                                          "description": "Lowercase hex digest.",
                                                          "type": "string"
                                                        }
                                                      },
                                                      "required": [
                                                        "algorithm",
                                                        "value"
                                                      ],
                                                      "type": "object"
                                                    }
                                                  ]
                                                },
                                                "evidence_ref": {
                                                  "oneOf": [
                                                    {
                                                      "type": "null"
                                                    },
                                                    {
                                                      "additionalProperties": false,
                                                      "properties": {
                                                        "uri": {
                                                          "description": "Evidence reference URI.",
                                                          "type": "string"
                                                        }
                                                      },
                                                      "required": [
                                                        "uri"
                                                      ],
                                                      "type": "object"
                                                    }
                                                  ]
                                                },
                                                "lane": {
                                                  "description": "Trust lane classification for evidence.",
                                                  "enum": [
                                                    "verified",
                                                    "asserted"
                                                  ],
                                                  "type": "string"
                                                },
                                                "signature": {
                                                  "oneOf": [
                                                    {
                                                      "type": "null"
                                                    },
                                                    {
                                                      "additionalProperties": false,
                                                      "properties": {
                                                        "key_id": {
                                                          "description": "Signing key identifier.",
                                                          "type": "string"
                                                        },
                                                        "scheme": {
                                                          "description": "Signature scheme identifier.",
                                                          "type": "string"
                                                        },
                                                        "signature": {
                                                          "items": {
                                                            "maximum": 255,
                                                            "minimum": 0,
                                                            "type": "integer"
                                                          },
                                                          "type": "array"
                                                        }
                                                      },
                                                      "required": [
                                                        "scheme",
                                                        "key_id",
                                                        "signature"
                                                      ],
                                                      "type": "object"
                                                    }
                                                  ]
                                                },
                                                "value": {
                                                  "oneOf": [
                                                    {
                                                      "type": "null"
                                                    },
                                                    {
                                                      "oneOf": [
                                                        {
                                                          "additionalProperties": false,
                                                          "properties": {
                                                            "kind": {
                                                              "const": "json"
                                                            },
                                                            "value": {
                                                              "description": "Evidence JSON value.",
                                                              "type": [
                                                                "null",
                                                                "boolean",
                                                                "number",
                                                                "string",
                                                                "array",
                                                                "object"
                                                              ]
                                                            }
                                                          },
                                                          "required": [
                                                            "kind",
                                                            "value"
                                                          ],
                                                          "type": "object"
                                                        },
                                                        {
                                                          "additionalProperties": false,
                                                          "properties": {
                                                            "kind": {
                                                              "const": "bytes"
                                                            },
                                                            "value": {
                                                              "items": {
                                                                "maximum": 255,
                                                                "minimum": 0,
                                                                "type": "integer"
                                                              },
                                                              "type": "array"
                                                            }
                                                          },
                                                          "required": [
                                                            "kind",
                                                            "value"
                                                          ],
                                                          "type": "object"
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              },
                                              "required": [
                                                "value",
                                                "lane",
                                                "error",
                                                "evidence_hash",
                                                "evidence_ref",
                                                "evidence_anchor",
                                                "signature",
                                                "content_type"
                                              ],
                                              "type": "object"
                                            },
                                            "status": {
                                              "description": "Tri-state evaluation result.",
                                              "enum": [
                                                "True",
                                                "False",
                                                "Unknown"
                                              ],
                                              "type": "string"
                                            }
                                          },
                                          "required": [
                                            "condition_id",
                                            "status",
                                            "result"
                                          ],
                                          "type": "object"
                                        },
                                        "type": "array"
                                      },
                                      "stage_id": {
                                        "description": "Stage identifier.",
                                        "type": "string"
                                      },
                                      "trigger_id": {
                                        "description": "Trigger identifier.",
                                        "type": "string"
                                      }
                                    },
                                    "required": [
                                      "trigger_id",
                                      "stage_id",
                                      "evaluation",
                                      "evidence"
                                    ],
                                    "type": "object"
                                  },
                                  "type": "array"
                                }
                              ]
                            },
                            "level": {
                              "description": "Feedback disclosure level.",
                              "enum": [
                                "summary",
                                "trace",
                                "evidence"
                              ],
                              "type": "string"
                            }
                          },
                          "required": [
                            "level"
                          ],
                          "type": "object"
                        }
                      ]
                    },
                    "packets": {
                      "items": {
                        "additionalProperties": false,
                        "properties": {
                          "decision_id": {
                            "description": "Decision identifier.",
                            "type": "string"
                          },
                          "envelope": {
                            "additionalProperties": false,
                            "properties": {
                              "content_hash": {
                                "additionalProperties": false,
                                "properties": {
                                  "algorithm": {
                                    "enum": [
                                      "sha256"
                                    ],
                                    "type": "string"
                                  },
                                  "value": {
                                    "description": "Lowercase hex digest.",
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "algorithm",
                                  "value"
                                ],
                                "type": "object"
                              },
                              "content_type": {
                                "description": "Packet content type.",
                                "type": "string"
                              },
                              "correlation_id": {
                                "oneOf": [
                                  {
                                    "type": "null"
                                  },
                                  {
                                    "description": "Correlation identifier.",
                                    "type": "string"
                                  }
                                ]
                              },
                              "expiry": {
                                "oneOf": [
                                  {
                                    "type": "null"
                                  },
                                  {
                                    "oneOf": [
                                      {
                                        "additionalProperties": false,
                                        "properties": {
                                          "kind": {
                                            "const": "unix_millis"
                                          },
                                          "value": {
                                            "type": "integer"
                                          }
                                        },
                                        "required": [
                                          "kind",
                                          "value"
                                        ],
                                        "type": "object"
                                      },
                                      {
                                        "additionalProperties": false,
                                        "properties": {
                                          "kind": {
                                            "const": "logical"
                                          },
                                          "value": {
                                            "minimum": 0,
                                            "type": "integer"
                                          }
                                        },
                                        "required": [
                                          "kind",
                                          "value"
                                        ],
                                        "type": "object"
                                      }
                                    ]
                                  }
                                ]
                              },
                              "issued_at": {
                                "oneOf": [
                                  {
                                    "additionalProperties": false,
                                    "properties": {
                                      "kind": {
                                        "const": "unix_millis"
                                      },
                                      "value": {
                                        "type": "integer"
                                      }
                                    },
                                    "required": [
                                      "kind",
                                      "value"
                                    ],
                                    "type": "object"
                                  },
                                  {
                                    "additionalProperties": false,
                                    "properties": {
                                      "kind": {
                                        "const": "logical"
                                      },
                                      "value": {
                                        "minimum": 0,
                                        "type": "integer"
                                      }
                                    },
                                    "required": [
                                      "kind",
                                      "value"
                                    ],
                                    "type": "object"
                                  }
                                ]
                              },
                              "packet_id": {
                                "description": "Packet identifier.",
                                "type": "string"
                              },
                              "run_id": {
                                "description": "Run identifier.",
                                "type": "string"
                              },
                              "scenario_id": {
                                "description": "Scenario identifier.",
                                "type": "string"
                              },
                              "schema_id": {
                                "description": "Schema identifier.",
                                "type": "string"
                              },
                              "stage_id": {
                                "description": "Stage identifier.",
                                "type": "string"
                              },
                              "visibility": {
                                "additionalProperties": false,
                                "properties": {
                                  "labels": {
                                    "description": "Visibility labels.",
                                    "items": {
                                      "type": "string"
                                    },
                                    "type": "array"
                                  },
                                  "policy_tags": {
                                    "description": "Policy tags.",
                                    "items": {
                                      "type": "string"
                                    },
                                    "type": "array"
                                  }
                                },
                                "required": [
                                  "labels",
                                  "policy_tags"
                                ],
                                "type": "object"
                              }
                            },
                            "required": [
                              "scenario_id",
                              "run_id",
                              "stage_id",
                              "packet_id",
                              "schema_id",
                              "content_type",
                              "content_hash",
                              "visibility",
                              "expiry",
                              "correlation_id",
                              "issued_at"
                            ],
                            "type": "object"
                          },
                          "payload": {
                            "oneOf": [
                              {
                                "additionalProperties": false,
                                "properties": {
                                  "kind": {
                                    "const": "json"
                                  },
                                  "value": {
                                    "description": "Inline JSON payload.",
                                    "type": [
                                      "null",
                                      "boolean",
                                      "number",
                                      "string",
                                      "array",
                                      "object"
                                    ]
                                  }
                                },
                                "required": [
                                  "kind",
                                  "value"
                                ],
                                "type": "object"
                              },
                              {
                                "additionalProperties": false,
                                "properties": {
                                  "bytes": {
                                    "items": {
                                      "maximum": 255,
                                      "minimum": 0,
                                      "type": "integer"
                                    },
                                    "type": "array"
                                  },
                                  "kind": {
                                    "const": "bytes"
                                  }
                                },
                                "required": [
                                  "kind",
                                  "bytes"
                                ],
                                "type": "object"
                              },
                              {
                                "additionalProperties": false,
                                "properties": {
                                  "content_ref": {
                                    "additionalProperties": false,
                                    "properties": {
                                      "content_hash": {
                                        "additionalProperties": false,
                                        "properties": {
                                          "algorithm": {
                                            "enum": [
                                              "sha256"
                                            ],
                                            "type": "string"
                                          },
                                          "value": {
                                            "description": "Lowercase hex digest.",
                                            "type": "string"
                                          }
                                        },
                                        "required": [
                                          "algorithm",
                                          "value"
                                        ],
                                        "type": "object"
                                      },
                                      "encryption": {
                                        "oneOf": [
                                          {
                                            "type": "null"
                                          },
                                          {
                                            "description": "Encryption metadata.",
                                            "type": "string"
                                          }
                                        ]
                                      },
                                      "uri": {
                                        "description": "Content URI.",
                                        "type": "string"
                                      }
                                    },
                                    "required": [
                                      "uri",
                                      "content_hash",
                                      "encryption"
                                    ],
                                    "type": "object"
                                  },
                                  "kind": {
                                    "const": "external"
                                  }
                                },
                                "required": [
                                  "kind",
                                  "content_ref"
                                ],
                                "type": "object"
                              }
                            ]
                          },
                          "receipts": {
                            "items": {
                              "additionalProperties": false,
                              "properties": {
                                "dispatch_id": {
                                  "description": "Dispatch identifier.",
                                  "type": "string"
                                },
                                "dispatched_at": {
                                  "oneOf": [
                                    {
                                      "additionalProperties": false,
                                      "properties": {
                                        "kind": {
                                          "const": "unix_millis"
                                        },
                                        "value": {
                                          "type": "integer"
                                        }
                                      },
                                      "required": [
                                        "kind",
                                        "value"
                                      ],
                                      "type": "object"
                                    },
                                    {
                                      "additionalProperties": false,
                                      "properties": {
                                        "kind": {
                                          "const": "logical"
                                        },
                                        "value": {
                                          "minimum": 0,
                                          "type": "integer"
                                        }
                                      },
                                      "required": [
                                        "kind",
                                        "value"
                                      ],
                                      "type": "object"
                                    }
                                  ]
                                },
                                "dispatcher": {
                                  "description": "Dispatcher identifier.",
                                  "type": "string"
                                },
                                "receipt_hash": {
                                  "additionalProperties": false,
                                  "properties": {
                                    "algorithm": {
                                      "enum": [
                                        "sha256"
                                      ],
                                      "type": "string"
                                    },
                                    "value": {
                                      "description": "Lowercase hex digest.",
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "algorithm",
                                    "value"
                                  ],
                                  "type": "object"
                                },
                                "target": {
                                  "oneOf": [
                                    {
                                      "additionalProperties": false,
                                      "properties": {
                                        "agent_id": {
                                          "description": "Agent identifier.",
                                          "type": "string"
                                        },
                                        "kind": {
                                          "const": "agent"
                                        }
                                      },
                                      "required": [
                                        "kind",
                                        "agent_id"
                                      ],
                                      "type": "object"
                                    },
                                    {
                                      "additionalProperties": false,
                                      "properties": {
                                        "kind": {
                                          "const": "session"
                                        },
                                        "session_id": {
                                          "description": "Session identifier.",
                                          "type": "string"
                                        }
                                      },
                                      "required": [
                                        "kind",
                                        "session_id"
                                      ],
                                      "type": "object"
                                    },
                                    {
                                      "additionalProperties": false,
                                      "properties": {
                                        "kind": {
                                          "const": "external"
                                        },
                                        "system": {
                                          "description": "External system name.",
                                          "type": "string"
                                        },
                                        "target": {
                                          "description": "External system target.",
                                          "type": "string"
                                        }
                                      },
                                      "required": [
                                        "kind",
                                        "system",
                                        "target"
                                      ],
                                      "type": "object"
                                    },
                                    {
                                      "additionalProperties": false,
                                      "properties": {
                                        "channel": {
                                          "description": "Broadcast channel identifier.",
                                          "type": "string"
                                        },
                                        "kind": {
                                          "const": "channel"
                                        }
                                      },
                                      "required": [
                                        "kind",
                                        "channel"
                                      ],
                                      "type": "object"
                                    }
                                  ]
                                }
                              },
                              "required": [
                                "dispatch_id",
                                "target",
                                "receipt_hash",
                                "dispatched_at",
                                "dispatcher"
                              ],
                              "type": "object"
                            },
                            "type": "array"
                          }
                        },
                        "required": [
                          "envelope",
                          "payload",
                          "receipts",
                          "decision_id"
                        ],
                        "type": "object"
                      },
                      "type": "array"
                    },
                    "status": {
                      "enum": [
                        "active",
                        "completed",
                        "failed"
                      ],
                      "type": "string"
                    }
                  },
                  "required": [
                    "decision",
                    "packets",
                    "status"
                  ],
                  "type": "object"
                },
                "type": {
                  "const": "json"
                }
              },
              "required": [
                "type",
                "json"
              ],
              "type": "object"
            },
            "minItems": 1,
            "type": "array"
          }
        },
        "required": [
          "content"
        ],
        "type": "object"
      },
      "ScenarioStartToolCallParams": {
        "additionalProperties": false,
        "properties": {
          "arguments": {
            "$schema": "https://json-schema.org/draft/2020-12/schema",
            "additionalProperties": false,
            "properties": {
              "issue_entry_packets": {
                "description": "Issue entry packets immediately.",
                "type": "boolean"
              },
              "run_config": {
                "additionalProperties": false,
                "description": "Run configuration and dispatch targets.",
                "properties": {
                  "dispatch_targets": {
                    "items": {
                      "oneOf": [
                        {
                          "additionalProperties": false,
                          "properties": {
                            "agent_id": {
                              "description": "Agent identifier.",
                              "type": "string"
                            },
                            "kind": {
                              "const": "agent"
                            }
                          },
                          "required": [
                            "kind",
                            "agent_id"
                          ],
                          "type": "object"
                        },
                        {
                          "additionalProperties": false,
                          "properties": {
                            "kind": {
                              "const": "session"
                            },
                            "session_id": {
                              "description": "Session identifier.",
                              "type": "string"
                            }
                          },
                          "required": [
                            "kind",
                            "session_id"
                          ],
                          "type": "object"
                        },
                        {
                          "additionalProperties": false,
                          "properties": {
                            "kind": {
                              "const": "external"
                            },
                            "system": {
                              "description": "External system name.",
                              "type": "string"
                            },
                            "target": {
                              "description": "External system target.",
                              "type": "string"
                            }
                          },
                          "required": [
                            "kind",
                            "system",
                            "target"
                          ],
                          "type": "object"
                        },
                        {
                          "additionalProperties": false,
                          "properties": {
                            "channel": {
                              "description": "Broadcast channel identifier.",
                              "type": "string"
                            },
                            "kind": {
                              "const": "channel"
                            }
                          },
                          "required": [
                            "kind",
                            "channel"
                          ],
                          "type": "object"
                        }
                      ]
                    },
                    "type": "array"
                  },
                  "namespace_id": {
                    "description": "Namespace identifier.",
                    "minimum": 1,
                    "type": "integer"
                  },
                  "policy_tags": {
                    "description": "Policy tags applied to the run.",
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  },
                  "run_id": {
                    "description": "Run identifier.",
                    "type": "string"
                  },
                  "scenario_id": {
                    "description": "Scenario identifier.",
                    "type": "string"
                  },
                  "tenant_id": {
                    "description": "Tenant identifier.",
                    "minimum": 1,
                    "type": "integer"
                  }
                },
                "required": [
                  "tenant_id",
                  "run_id",
                  "scenario_id",
                  "dispatch_targets",
                  "policy_tags"
                ],
                "type": "object"
              },
              "scenario_id": {
                "description": "Scenario identifier.",
                "type": "string"
              },
              "started_at": {
                "description": "Caller-supplied run start timestamp.",
                "oneOf": [
                  {
                    "additionalProperties": false,
                    "properties": {
                      "kind": {
                        "const": "unix_millis"
                      },
                      "value": {
                        "type": "integer"
                      }
                    },
                    "required": [
                      "kind",
                      "value"
                    ],
                    "type": "object"
                  },
                  {
                    "additionalProperties": false,
                    "properties": {
                      "kind": {
                        "const": "logical"
                      },
                      "value": {
                        "minimum": 0,
                        "type": "integer"
                      }
                    },
                    "required": [
                      "kind",
                      "value"
                    ],
                    "type": "object"
                  }
                ]
              }
            },
            "required": [
              "scenario_id",
              "run_config",
              "started_at",
              "issue_entry_packets"
            ],
            "type": "object"
          },
          "name": {
            "const": "scenario_start"
          }
        },
        "required": [
          "name",
          "arguments"
        ],
        "type": "object"
      },
      "ScenarioStartToolCallResult": {
        "additionalProperties": false,
        "properties": {
          "content": {
            "items": {
              "additionalProperties": false,
              "properties": {
                "json": {
                  "additionalProperties": false,
                  "properties": {
                    "current_stage_id": {
                      "description": "Current stage identifier.",
                      "type": "string"
                    },
                    "decisions": {
                      "items": {
                        "additionalProperties": false,
                        "properties": {
                          "correlation_id": {
                            "oneOf": [
                              {
                                "type": "null"
                              },
                              {
                                "description": "Correlation identifier.",
                                "type": "string"
                              }
                            ]
                          },
                          "decided_at": {
                            "oneOf": [
                              {
                                "additionalProperties": false,
                                "properties": {
                                  "kind": {
                                    "const": "unix_millis"
                                  },
                                  "value": {
                                    "type": "integer"
                                  }
                                },
                                "required": [
                                  "kind",
                                  "value"
                                ],
                                "type": "object"
                              },
                              {
                                "additionalProperties": false,
                                "properties": {
                                  "kind": {
                                    "const": "logical"
                                  },
                                  "value": {
                                    "minimum": 0,
                                    "type": "integer"
                                  }
                                },
                                "required": [
                                  "kind",
                                  "value"
                                ],
                                "type": "object"
                              }
                            ]
                          },
                          "decision_id": {
                            "description": "Decision identifier.",
                            "type": "string"
                          },
                          "outcome": {
                            "oneOf": [
                              {
                                "additionalProperties": false,
                                "properties": {
                                  "kind": {
                                    "const": "start"
                                  },
                                  "stage_id": {
                                    "description": "Initial stage identifier.",
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "kind",
                                  "stage_id"
                                ],
                                "type": "object"
                              },
                              {
                                "additionalProperties": false,
                                "properties": {
                                  "kind": {
                                    "const": "complete"
                                  },
                                  "stage_id": {
                                    "description": "Terminal stage identifier.",
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "kind",
                                  "stage_id"
                                ],
                                "type": "object"
                              },
                              {
                                "additionalProperties": false,
                                "properties": {
                                  "from_stage": {
                                    "description": "Previous stage identifier.",
                                    "type": "string"
                                  },
                                  "kind": {
                                    "const": "advance"
                                  },
                                  "timeout": {
                                    "type": "boolean"
                                  },
                                  "to_stage": {
                                    "description": "Next stage identifier.",
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "kind",
                                  "from_stage",
                                  "to_stage",
                                  "timeout"
                                ],
                                "type": "object"
                              },
                              {
                                "additionalProperties": false,
                                "properties": {
                                  "kind": {
                                    "const": "hold"
                                  },
                                  "summary": {
                                    "additionalProperties": false,
                                    "properties": {
                                      "policy_tags": {
                                        "description": "Policy tags applied to the summary.",
                                        "items": {
                                          "type": "string"
                                        },
                                        "type": "array"
                                      },
                                      "retry_hint": {
                                        "oneOf": [
                                          {
                                            "type": "null"
                                          },
                                          {
                                            "description": "Optional retry hint.",
                                            "type": "string"
                                          }
                                        ]
                                      },
                                      "status": {
                                        "description": "Summary status.",
                                        "type": "string"
                                      },
                                      "unmet_gates": {
                                        "items": {
                                          "description": "Gate identifier.",
                                          "type": "string"
                                        },
                                        "type": "array"
                                      }
                                    },
                                    "required": [
                                      "status",
                                      "unmet_gates",
                                      "retry_hint",
                                      "policy_tags"
                                    ],
                                    "type": "object"
                                  }
                                },
                                "required": [
                                  "kind",
                                  "summary"
                                ],
                                "type": "object"
                              },
                              {
                                "additionalProperties": false,
                                "properties": {
                                  "kind": {
                                    "const": "fail"
                                  },
                                  "reason": {
                                    "description": "Failure reason.",
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "kind",
                                  "reason"
                                ],
                                "type": "object"
                              }
                            ]
                          },
                          "seq": {
                            "minimum": 0,
                            "type": "integer"
                          },
                          "stage_id": {
                            "description": "Stage identifier.",
                            "type": "string"
                          },
                          "trigger_id": {
                            "description": "Trigger identifier.",
                            "type": "string"
                          }
                        },
                        "required": [
                          "decision_id",
                          "seq",
                          "trigger_id",
                          "stage_id",
                          "decided_at",
                          "outcome",
                          "correlation_id"
                        ],
                        "type": "object"
                      },
                      "type": "array"
                    },
                    "dispatch_targets": {
                      "items": {
                        "oneOf": [
                          {
                            "additionalProperties": false,
                            "properties": {
                              "agent_id": {
                                "description": "Agent identifier.",
                                "type": "string"
                              },
                              "kind": {
                                "const": "agent"
                              }
                            },
                            "required": [
                              "kind",
                              "agent_id"
                            ],
                            "type": "object"
                          },
                          {
                            "additionalProperties": false,
                            "properties": {
                              "kind": {
                                "const": "session"
                              },
                              "session_id": {
                                "description": "Session identifier.",
                                "type": "string"
                              }
                            },
                            "required": [
                              "kind",
                              "session_id"
                            ],
                            "type": "object"
                          },
                          {
                            "additionalProperties": false,
                            "properties": {
                              "kind": {
                                "const": "external"
                              },
                              "system": {
                                "description": "External system name.",
                                "type": "string"
                              },
                              "target": {
                                "description": "External system target.",
                                "type": "string"
                              }
                            },
                            "required": [
                              "kind",
                              "system",
                              "target"
                            ],
                            "type": "object"
                          },
                          {
                            "additionalProperties": false,
                            "properties": {
                              "channel": {
                                "description": "Broadcast channel identifier.",
                                "type": "string"
                              },
                              "kind": {
                                "const": "channel"
                              }
                            },
                            "required": [
                              "kind",
                              "channel"
                            ],
                            "type": "object"
                          }
                        ]
                      },
                      "type": "array"
                    },
                    "gate_evals": {
                      "items": {
                        "additionalProperties": false,
                        "properties": {
                          "evaluation": {
                            "additionalProperties": false,
                            "properties": {
                              "gate_id": {
                                "description": "Gate identifier.",
                                "type": "string"
                              },
                              "status": {
                                "description": "Tri-state evaluation result.",
                                "enum": [
                                  "True",
                                  "False",
                                  "Unknown"
                                ],
                                "type": "string"
                              },
                              "trace": {
                                "items": {
                                  "additionalProperties": false,
                                  "properties": {
                                    "condition_id": {
                                      "description": "Condition identifier.",
                                      "type": "string"
                                    },
                                    "status": {
                                      "description": "Tri-state evaluation result.",
                                      "enum": [
                                        "True",
                                        "False",
                                        "Unknown"
                                      ],
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "condition_id",
                                    "status"
                                  ],
                                  "type": "object"
                                },
                                "type": "array"
                              }
                            },
                            "required": [
                              "gate_id",
                              "status",
                              "trace"
                            ],
                            "type": "object"
                          },
                          "evidence": {
                            "items": {
                              "additionalProperties": false,
                              "properties": {
                                "condition_id": {
                                  "description": "Condition identifier.",
                                  "type": "string"
                                },
                                "result": {
                                  "additionalProperties": false,
                                  "properties": {
                                    "content_type": {
                                      "oneOf": [
                                        {
                                          "type": "null"
                                        },
                                        {
                                          "description": "Evidence content type.",
                                          "type": "string"
                                        }
                                      ]
                                    },
                                    "error": {
                                      "oneOf": [
                                        {
                                          "type": "null"
                                        },
                                        {
                                          "additionalProperties": false,
                                          "properties": {
                                            "code": {
                                              "description": "Stable error code.",
                                              "type": "string"
                                            },
                                            "details": {
                                              "oneOf": [
                                                {
                                                  "type": "null"
                                                },
                                                {
                                                  "description": "Optional structured error details.",
                                                  "type": [
                                                    "null",
                                                    "boolean",
                                                    "number",
                                                    "string",
                                                    "array",
                                                    "object"
                                                  ]
                                                }
                                              ]
                                            },
                                            "message": {
                                              "description": "Error message.",
                                              "type": "string"
                                            }
                                          },
                                          "required": [
                                            "code",
                                            "message",
                                            "details"
                                          ],
                                          "type": "object"
                                        }
                                      ]
                                    },
                                    "evidence_anchor": {
                                      "oneOf": [
                                        {
                                          "type": "null"
                                        },
                                        {
                                          "additionalProperties": false,
                                          "properties": {
                                            "anchor_type": {
                                              "description": "Anchor type identifier.",
                                              "type": "string"
                                            },
                                            "anchor_value": {
                                              "description": "Anchor value.",
                                              "type": "string"
                                            }
                                          },
                                          "required": [
                                            "anchor_type",
                                            "anchor_value"
                                          ],
                                          "type": "object"
                                        }
                                      ]
                                    },
                                    "evidence_hash": {
                                      "oneOf": [
                                        {
                                          "type": "null"
                                        },
                                        {
                                          "additionalProperties": false,
                                          "properties": {
                                            "algorithm": {
                                              "enum": [
                                                "sha256"
                                              ],
                                              "type": "string"
                                            },
                                            "value": {
                                              "description": "Lowercase hex digest.",
                                              "type": "string"
                                            }
                                          },
                                          "required": [
                                            "algorithm",
                                            "value"
                                          ],
                                          "type": "object"
                                        }
                                      ]
                                    },
                                    "evidence_ref": {
                                      "oneOf": [
                                        {
                                          "type": "null"
                                        },
                                        {
                                          "additionalProperties": false,
                                          "properties": {
                                            "uri": {
                                              "description": "Evidence reference URI.",
                                              "type": "string"
                                            }
                                          },
                                          "required": [
                                            "uri"
                                          ],
                                          "type": "object"
                                        }
                                      ]
                                    },
                                    "lane": {
                                      "description": "Trust lane classification for evidence.",
                                      "enum": [
                                        "verified",
                                        "asserted"
                                      ],
                                      "type": "string"
                                    },
                                    "signature": {
                                      "oneOf": [
                                        {
                                          "type": "null"
                                        },
                                        {
                                          "additionalProperties": false,
                                          "properties": {
                                            "key_id": {
                                              "description": "Signing key identifier.",
                                              "type": "string"
                                            },
                                            "scheme": {
                                              "description": "Signature scheme identifier.",
                                              "type": "string"
                                            },
                                            "signature": {
                                              "items": {
                                                "maximum": 255,
                                                "minimum": 0,
                                                "type": "integer"
                                              },
                                              "type": "array"
                                            }
                                          },
                                          "required": [
                                            "scheme",
                                            "key_id",
                                            "signature"
                                          ],
                                          "type": "object"
                                        }
                                      ]
                                    },
                                    "value": {
                                      "oneOf": [
                                        {
                                          "type": "null"
                                        },
                                        {
                                          "oneOf": [
                                            {
                                              "additionalProperties": false,
                                              "properties": {
                                                "kind": {
                                                  "const": "json"
                                                },
                                                "value": {
                                                  "description": "Evidence JSON value.",
                                                  "type": [
                                                    "null",
                                                    "boolean",
                                                    "number",
                                                    "string",
                                                    "array",
                                                    "object"
                                                  ]
                                                }
                                              },
                                              "required": [
                                                "kind",
                                                "value"
                                              ],
                                              "type": "object"
                                            },
                                            {
                                              "additionalProperties": false,
                                              "properties": {
                                                "kind": {
                                                  "const": "bytes"
                                                },
                                                "value": {
                                                  "items": {
                                                    "maximum": 255,
                                                    "minimum": 0,
                                                    "type": "integer"
                                                  },
                                                  "type": "array"
                                                }
                                              },
                                              "required": [
                                                "kind",
                                                "value"
                                              ],
                                              "type": "object"
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  },
                                  "required": [
                                    "value",
                                    "lane",
                                    "error",
                                    "evidence_hash",
                                    "evidence_ref",
                                    "evidence_anchor",
                                    "signature",
                                    "content_type"
                                  ],
                                  "type": "object"
                                },
                                "status": {
                                  "description": "Tri-state evaluation result.",
                                  "enum": [
                                    "True",
                                    "False",
                                    "Unknown"
                                  ],
                                  "type": "string"
                                }
                              },
                              "required": [
                                "condition_id",
                                "status",
                                "result"
                              ],
                              "type": "object"
                            },
                            "type": "array"
                          },
                          "stage_id": {
                            "description": "Stage identifier.",
                            "type": "string"
                          },
                          "trigger_id": {
                            "description": "Trigger identifier.",
                            "type": "string"
                          }
                        },
                        "required": [
                          "trigger_id",
                          "stage_id",
                          "evaluation",
                          "evidence"
                        ],
                        "type": "object"
                      },
                      "type": "array"
                    },
                    "namespace_id": {
                      "description": "Namespace identifier.",
                      "minimum": 1,
                      "type": "integer"
                    },
                    "packets": {
                      "items": {
                        "additionalProperties": false,
                        "properties": {
                          "decision_id": {
                            "description": "Decision identifier.",
                            "type": "string"
                          },
                          "envelope": {
                            "additionalProperties": false,
                            "properties": {
                              "content_hash": {
                                "additionalProperties": false,
                                "properties": {
                                  "algorithm": {
                                    "enum": [
                                      "sha256"
                                    ],
                                    "type": "string"
                                  },
                                  "value": {
                                    "description": "Lowercase hex digest.",
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "algorithm",
                                  "value"
                                ],
                                "type": "object"
                              },
                              "content_type": {
                                "description": "Packet content type.",
                                "type": "string"
                              },
                              "correlation_id": {
                                "oneOf": [
                                  {
                                    "type": "null"
                                  },
                                  {
                                    "description": "Correlation identifier.",
                                    "type": "string"
                                  }
                                ]
                              },
                              "expiry": {
                                "oneOf": [
                                  {
                                    "type": "null"
                                  },
                                  {
                                    "oneOf": [
                                      {
                                        "additionalProperties": false,
                                        "properties": {
                                          "kind": {
                                            "const": "unix_millis"
                                          },
                                          "value": {
                                            "type": "integer"
                                          }
                                        },
                                        "required": [
                                          "kind",
                                          "value"
                                        ],
                                        "type": "object"
                                      },
                                      {
                                        "additionalProperties": false,
                                        "properties": {
                                          "kind": {
                                            "const": "logical"
                                          },
                                          "value": {
                                            "minimum": 0,
                                            "type": "integer"
                                          }
                                        },
                                        "required": [
                                          "kind",
                                          "value"
                                        ],
                                        "type": "object"
                                      }
                                    ]
                                  }
                                ]
                              },
                              "issued_at": {
                                "oneOf": [
                                  {
                                    "additionalProperties": false,
                                    "properties": {
                                      "kind": {
                                        "const": "unix_millis"
                                      },
                                      "value": {
                                        "type": "integer"
                                      }
                                    },
                                    "required": [
                                      "kind",
                                      "value"
                                    ],
                                    "type": "object"
                                  },
                                  {
                                    "additionalProperties": false,
                                    "properties": {
                                      "kind": {
                                        "const": "logical"
                                      },
                                      "value": {
                                        "minimum": 0,
                                        "type": "integer"
                                      }
                                    },
                                    "required": [
                                      "kind",
                                      "value"
                                    ],
                                    "type": "object"
                                  }
                                ]
                              },
                              "packet_id": {
                                "description": "Packet identifier.",
                                "type": "string"
                              },
                              "run_id": {
                                "description": "Run identifier.",
                                "type": "string"
                              },
                              "scenario_id": {
                                "description": "Scenario identifier.",
                                "type": "string"
                              },
                              "schema_id": {
                                "description": "Schema identifier.",
                                "type": "string"
                              },
                              "stage_id": {
                                "description": "Stage identifier.",
                                "type": "string"
                              },
                              "visibility": {
                                "additionalProperties": false,
                                "properties": {
                                  "labels": {
                                    "description": "Visibility labels.",
                                    "items": {
                                      "type": "string"
                                    },
                                    "type": "array"
                                  },
                                  "policy_tags": {
                                    "description": "Policy tags.",
                                    "items": {
                                      "type": "string"
                                    },
                                    "type": "array"
                                  }
                                },
                                "required": [
                                  "labels",
                                  "policy_tags"
                                ],
                                "type": "object"
                              }
                            },
                            "required": [
                              "scenario_id",
                              "run_id",
                              "stage_id",
                              "packet_id",
                              "schema_id",
                              "content_type",
                              "content_hash",
                              "visibility",
                              "expiry",
                              "correlation_id",
                              "issued_at"
                            ],
                            "type": "object"
                          },
                          "payload": {
                            "oneOf": [
                              {
                                "additionalProperties": false,
                                "properties": {
                                  "kind": {
                                    "const": "json"
                                  },
                                  "value": {
                                    "description": "Inline JSON payload.",
                                    "type": [
                                      "null",
                                      "boolean",
                                      "number",
                                      "string",
                                      "array",
                                      "object"
                                    ]
                                  }
                                },
                                "required": [
                                  "kind",
                                  "value"
                                ],
                                "type": "object"
                              },
                              {
                                "additionalProperties": false,
                                "properties": {
                                  "bytes": {
                                    "items": {
                                      "maximum": 255,
                                      "minimum": 0,
                                      "type": "integer"
                                    },
                                    "type": "array"
                                  },
                                  "kind": {
                                    "const": "bytes"
                                  }
                                },
                                "required": [
                                  "kind",
                                  "bytes"
                                ],
                                "type": "object"
                              },
                              {
                                "additionalProperties": false,
                                "properties": {
                                  "content_ref": {
                                    "additionalProperties": false,
                                    "properties": {
                                      "content_hash": {
                                        "additionalProperties": false,
                                        "properties": {
                                          "algorithm": {
                                            "enum": [
                                              "sha256"
                                            ],
                                            "type": "string"
                                          },
                                          "value": {
                                            "description": "Lowercase hex digest.",
                                            "type": "string"
                                          }
                                        },
                                        "required": [
                                          "algorithm",
                                          "value"
                                        ],
                                        "type": "object"
                                      },
                                      "encryption": {
                                        "oneOf": [
                                          {
                                            "type": "null"
                                          },
                                          {
                                            "description": "Encryption metadata.",
                                            "type": "string"
                                          }
                                        ]
                                      },
                                      "uri": {
                                        "description": "Content URI.",
                                        "type": "string"
                                      }
                                    },
                                    "required": [
                                      "uri",
                                      "content_hash",
                                      "encryption"
                                    ],
                                    "type": "object"
                                  },
                                  "kind": {
                                    "const": "external"
                                  }
                                },
                                "required": [
                                  "kind",
                                  "content_ref"
                                ],
                                "type": "object"
                              }
                            ]
                          },
                          "receipts": {
                            "items": {
                              "additionalProperties": false,
                              "properties": {
                                "dispatch_id": {
                                  "description": "Dispatch identifier.",
                                  "type": "string"
                                },
                                "dispatched_at": {
                                  "oneOf": [
                                    {
                                      "additionalProperties": false,
                                      "properties": {
                                        "kind": {
                                          "const": "unix_millis"
                                        },
                                        "value": {
                                          "type": "integer"
                                        }
                                      },
                                      "required": [
                                        "kind",
                                        "value"
                                      ],
                                      "type": "object"
                                    },
                                    {
                                      "additionalProperties": false,
                                      "properties": {
                                        "kind": {
                                          "const": "logical"
                                        },
                                        "value": {
                                          "minimum": 0,
                                          "type": "integer"
                                        }
                                      },
                                      "required": [
                                        "kind",
                                        "value"
                                      ],
                                      "type": "object"
                                    }
                                  ]
                                },
                                "dispatcher": {
                                  "description": "Dispatcher identifier.",
                                  "type": "string"
                                },
                                "receipt_hash": {
                                  "additionalProperties": false,
                                  "properties": {
                                    "algorithm": {
                                      "enum": [
                                        "sha256"
                                      ],
                                      "type": "string"
                                    },
                                    "value": {
                                      "description": "Lowercase hex digest.",
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "algorithm",
                                    "value"
                                  ],
                                  "type": "object"
                                },
                                "target": {
                                  "oneOf": [
                                    {
                                      "additionalProperties": false,
                                      "properties": {
                                        "agent_id": {
                                          "description": "Agent identifier.",
                                          "type": "string"
                                        },
                                        "kind": {
                                          "const": "agent"
                                        }
                                      },
                                      "required": [
                                        "kind",
                                        "agent_id"
                                      ],
                                      "type": "object"
                                    },
                                    {
                                      "additionalProperties": false,
                                      "properties": {
                                        "kind": {
                                          "const": "session"
                                        },
                                        "session_id": {
                                          "description": "Session identifier.",
                                          "type": "string"
                                        }
                                      },
                                      "required": [
                                        "kind",
                                        "session_id"
                                      ],
                                      "type": "object"
                                    },
                                    {
                                      "additionalProperties": false,
                                      "properties": {
                                        "kind": {
                                          "const": "external"
                                        },
                                        "system": {
                                          "description": "External system name.",
                                          "type": "string"
                                        },
                                        "target": {
                                          "description": "External system target.",
                                          "type": "string"
                                        }
                                      },
                                      "required": [
                                        "kind",
                                        "system",
                                        "target"
                                      ],
                                      "type": "object"
                                    },
                                    {
                                      "additionalProperties": false,
                                      "properties": {
                                        "channel": {
                                          "description": "Broadcast channel identifier.",
                                          "type": "string"
                                        },
                                        "kind": {
                                          "const": "channel"
                                        }
                                      },
                                      "required": [
                                        "kind",
                                        "channel"
                                      ],
                                      "type": "object"
                                    }
                                  ]
                                }
                              },
                              "required": [
                                "dispatch_id",
                                "target",
                                "receipt_hash",
                                "dispatched_at",
                                "dispatcher"
                              ],
                              "type": "object"
                            },
                            "type": "array"
                          }
                        },
                        "required": [
                          "envelope",
                          "payload",
                          "receipts",
                          "decision_id"
                        ],
                        "type": "object"
                      },
                      "type": "array"
                    },
                    "run_id": {
                      "description": "Run identifier.",
                      "type": "string"
                    },
                    "scenario_id": {
                      "description": "Scenario identifier.",
                      "type": "string"
                    },
                    "spec_hash": {
                      "additionalProperties": false,
                      "properties": {
                        "algorithm": {
                          "enum": [
                            "sha256"
                          ],
                          "type": "string"
                        },
                        "value": {
                          "description": "Lowercase hex digest.",
                          "type": "string"
                        }
                      },
                      "required": [
                        "algorithm",
                        "value"
                      ],
                      "type": "object"
                    },
                    "stage_entered_at": {
                      "oneOf": [
                        {
                          "additionalProperties": false,
                          "properties": {
                            "kind": {
                              "const": "unix_millis"
                            },
                            "value": {
                              "type": "integer"
                            }
                          },
                          "required": [
                            "kind",
                            "value"
                          ],
                          "type": "object"
                        },
                        {
                          "additionalProperties": false,
                          "properties": {
                            "kind": {
                              "const": "logical"
                            },
                            "value": {
                              "minimum": 0,
                              "type": "integer"
                            }
                          },
                          "required": [
                            "kind",
                            "value"
                          ],
                          "type": "object"
                        }
                      ]
                    },
                    "status": {
                      "enum": [
                        "active",
                        "completed",
                        "failed"
                      ],
                      "type": "string"
                    },
                    "submissions": {
                      "items": {
                        "additionalProperties": false,
                        "properties": {
                          "content_hash": {
                            "additionalProperties": false,
                            "properties": {
                              "algorithm": {
                                "enum": [
                                  "sha256"
                                ],
                                "type": "string"
                              },
                              "value": {
                                "description": "Lowercase hex digest.",
                                "type": "string"
                              }
                            },
                            "required": [
                              "algorithm",
                              "value"
                            ],
                            "type": "object"
                          },
                          "content_type": {
                            "description": "Submission content type.",
                            "type": "string"
                          },
                          "correlation_id": {
                            "oneOf": [
                              {
                                "type": "null"
                              },
                              {
                                "description": "Correlation identifier.",
                                "type": "string"
                              }
                            ]
                          },
                          "payload": {
                            "oneOf": [
                              {
                                "additionalProperties": false,
                                "properties": {
                                  "kind": {
                                    "const": "json"
                                  },
                                  "value": {
                                    "description": "Inline JSON payload.",
                                    "type": [
                                      "null",
                                      "boolean",
                                      "number",
                                      "string",
                                      "array",
                                      "object"
                                    ]
                                  }
                                },
                                "required": [
                                  "kind",
                                  "value"
                                ],
                                "type": "object"
                              },
                              {
                                "additionalProperties": false,
                                "properties": {
                                  "bytes": {
                                    "items": {
                                      "maximum": 255,
                                      "minimum": 0,
                                      "type": "integer"
                                    },
                                    "type": "array"
                                  },
                                  "kind": {
                                    "const": "bytes"
                                  }
                                },
                                "required": [
                                  "kind",
                                  "bytes"
                                ],
                                "type": "object"
                              },
                              {
                                "additionalProperties": false,
                                "properties": {
                                  "content_ref": {
                                    "additionalProperties": false,
                                    "properties": {
                                      "content_hash": {
                                        "additionalProperties": false,
                                        "properties": {
                                          "algorithm": {
                                            "enum": [
                                              "sha256"
                                            ],
                                            "type": "string"
                                          },
                                          "value": {
                                            "description": "Lowercase hex digest.",
                                            "type": "string"
                                          }
                                        },
                                        "required": [
                                          "algorithm",
                                          "value"
                                        ],
                                        "type": "object"
                                      },
                                      "encryption": {
                                        "oneOf": [
                                          {
                                            "type": "null"
                                          },
                                          {
                                            "description": "Encryption metadata.",
                                            "type": "string"
                                          }
                                        ]
                                      },
                                      "uri": {
                                        "description": "Content URI.",
                                        "type": "string"
                                      }
                                    },
                                    "required": [
                                      "uri",
                                      "content_hash",
                                      "encryption"
                                    ],
                                    "type": "object"
                                  },
                                  "kind": {
                                    "const": "external"
                                  }
                                },
                                "required": [
                                  "kind",
                                  "content_ref"
                                ],
                                "type": "object"
                              }
                            ]
                          },
                          "run_id": {
                            "description": "Run identifier.",
                            "type": "string"
                          },
                          "submission_id": {
                            "description": "Submission identifier.",
                            "type": "string"
                          },
                          "submitted_at": {
                            "oneOf": [
                              {
                                "additionalProperties": false,
                                "properties": {
                                  "kind": {
                                    "const": "unix_millis"
                                  },
                                  "value": {
                                    "type": "integer"
                                  }
                                },
                                "required": [
                                  "kind",
                                  "value"
                                ],
                                "type": "object"
                              },
                              {
                                "additionalProperties": false,
                                "properties": {
                                  "kind": {
                                    "const": "logical"
                                  },
                                  "value": {
                                    "minimum": 0,
                                    "type": "integer"
                                  }
                                },
                                "required": [
                                  "kind",
                                  "value"
                                ],
                                "type": "object"
                              }
                            ]
                          }
                        },
                        "required": [
                          "submission_id",
                          "run_id",
                          "payload",
                          "content_type",
                          "content_hash",
                          "submitted_at",
                          "correlation_id"
                        ],
                        "type": "object"
                      },
                      "type": "array"
                    },
                    "tenant_id": {
                      "description": "Tenant identifier.",
                      "minimum": 1,
                      "type": "integer"
                    },
                    "tool_calls": {
                      "items": {
                        "additionalProperties": false,
                        "properties": {
                          "call_id": {
                            "description": "Tool-call identifier.",
                            "type": "string"
                          },
                          "called_at": {
                            "oneOf": [
                              {
                                "additionalProperties": false,
                                "properties": {
                                  "kind": {
                                    "const": "unix_millis"
                                  },
                                  "value": {
                                    "type": "integer"
                                  }
                                },
                                "required": [
                                  "kind",
                                  "value"
                                ],
                                "type": "object"
                              },
                              {
                                "additionalProperties": false,
                                "properties": {
                                  "kind": {
                                    "const": "logical"
                                  },
                                  "value": {
                                    "minimum": 0,
                                    "type": "integer"
                                  }
                                },
                                "required": [
                                  "kind",
                                  "value"
                                ],
                                "type": "object"
                              }
                            ]
                          },
                          "correlation_id": {
                            "oneOf": [
                              {
                                "type": "null"
                              },
                              {
                                "description": "Correlation identifier.",
                                "type": "string"
                              }
                            ]
                          },
                          "error": {
                            "oneOf": [
                              {
                                "type": "null"
                              },
                              {
                                "additionalProperties": false,
                                "properties": {
                                  "code": {
                                    "description": "Stable error code.",
                                    "type": "string"
                                  },
                                  "details": {
                                    "oneOf": [
                                      {
                                        "type": "null"
                                      },
                                      {
                                        "oneOf": [
                                          {
                                            "additionalProperties": false,
                                            "properties": {
                                              "blocked_by_policy": {
                                                "type": "boolean"
                                              },
                                              "kind": {
                                                "const": "provider_missing"
                                              },
                                              "missing_providers": {
                                                "description": "Missing provider identifiers.",
                                                "items": {
                                                  "type": "string"
                                                },
                                                "type": "array"
                                              },
                                              "required_capabilities": {
                                                "description": "Required capabilities.",
                                                "items": {
                                                  "type": "string"
                                                },
                                                "type": "array"
                                              }
                                            },
                                            "required": [
                                              "kind",
                                              "missing_providers",
                                              "required_capabilities",
                                              "blocked_by_policy"
                                            ],
                                            "type": "object"
                                          },
                                          {
                                            "additionalProperties": false,
                                            "properties": {
                                              "info": {
                                                "description": "Additional error details.",
                                                "type": "string"
                                              },
                                              "kind": {
                                                "const": "message"
                                              }
                                            },
                                            "required": [
                                              "kind",
                                              "info"
                                            ],
                                            "type": "object"
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  "message": {
                                    "description": "Error message.",
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "code",
                                  "message",
                                  "details"
                                ],
                                "type": "object"
                              }
                            ]
                          },
                          "method": {
                            "description": "Tool method name.",
                            "type": "string"
                          },
                          "request_hash": {
                            "additionalProperties": false,
                            "properties": {
                              "algorithm": {
                                "enum": [
                                  "sha256"
                                ],
                                "type": "string"
                              },
                              "value": {
                                "description": "Lowercase hex digest.",
                                "type": "string"
                              }
                            },
                            "required": [
                              "algorithm",
                              "value"
                            ],
                            "type": "object"
                          },
                          "response_hash": {
                            "additionalProperties": false,
                            "properties": {
                              "algorithm": {
                                "enum": [
                                  "sha256"
                                ],
                                "type": "string"
                              },
                              "value": {
                                "description": "Lowercase hex digest.",
                                "type": "string"
                              }
                            },
                            "required": [
                              "algorithm",
                              "value"
                            ],
                            "type": "object"
                          }
                        },
                        "required": [
                          "call_id",
                          "method",
                          "request_hash",
                          "response_hash",
                          "called_at",
                          "correlation_id",
                          "error"
                        ],
                        "type": "object"
                      },
                      "type": "array"
                    },
                    "triggers": {
                      "items": {
                        "additionalProperties": false,
                        "properties": {
                          "event": {
                            "additionalProperties": false,
                            "properties": {
                              "correlation_id": {
                                "oneOf": [
                                  {
                                    "type": "null"
                                  },
                                  {
                                    "description": "Correlation identifier.",
                                    "type": "string"
                                  }
                                ]
                              },
                              "kind": {
                                "enum": [
                                  "agent_request_next",
                                  "tick",
                                  "external_event",
                                  "backend_event"
                                ],
                                "type": "string"
                              },
                              "namespace_id": {
                                "description": "Namespace identifier.",
                                "minimum": 1,
                                "type": "integer"
                              },
                              "payload": {
                                "oneOf": [
                                  {
                                    "type": "null"
                                  },
                                  {
                                    "oneOf": [
                                      {
                                        "additionalProperties": false,
                                        "properties": {
                                          "kind": {
                                            "const": "json"
                                          },
                                          "value": {
                                            "description": "Inline JSON payload.",
                                            "type": [
                                              "null",
                                              "boolean",
                                              "number",
                                              "string",
                                              "array",
                                              "object"
                                            ]
                                          }
                                        },
                                        "required": [
                                          "kind",
                                          "value"
                                        ],
                                        "type": "object"
                                      },
                                      {
                                        "additionalProperties": false,
                                        "properties": {
                                          "bytes": {
                                            "items": {
                                              "maximum": 255,
                                              "minimum": 0,
                                              "type": "integer"
                                            },
                                            "type": "array"
                                          },
                                          "kind": {
                                            "const": "bytes"
                                          }
                                        },
                                        "required": [
                                          "kind",
                                          "bytes"
                                        ],
                                        "type": "object"
                                      },
                                      {
                                        "additionalProperties": false,
                                        "properties": {
                                          "content_ref": {
                                            "additionalProperties": false,
                                            "properties": {
                                              "content_hash": {
                                                "additionalProperties": false,
                                                "properties": {
                                                  "algorithm": {
                                                    "enum": [
                                                      "sha256"
                                                    ],
                                                    "type": "string"
                                                  },
                                                  "value": {
                                                    "description": "Lowercase hex digest.",
                                                    "type": "string"
                                                  }
                                                },
                                                "required": [
                                                  "algorithm",
                                                  "value"
                                                ],
                                                "type": "object"
                                              },
                                              "encryption": {
                                                "oneOf": [
                                                  {
                                                    "type": "null"
                                                  },
                                                  {
                                                    "description": "Encryption metadata.",
                                                    "type": "string"
                                                  }
                                                ]
                                              },
                                              "uri": {
                                                "description": "Content URI.",
                                                "type": "string"
                                              }
                                            },
                                            "required": [
                                              "uri",
                                              "content_hash",
                                              "encryption"
                                            ],
                                            "type": "object"
                                          },
                                          "kind": {
                                            "const": "external"
                                          }
                                        },
                                        "required": [
                                          "kind",
                                          "content_ref"
                                        ],
                                        "type": "object"
                                      }
                                    ]
                                  }
                                ]
                              },
                              "run_id": {
                                "description": "Run identifier.",
                                "type": "string"
                              },
                              "source_id": {
                                "description": "Trigger source identifier.",
                                "type": "string"
                              },
                              "tenant_id": {
                                "description": "Tenant identifier.",
                                "minimum": 1,
                                "type": "integer"
                              },
                              "time": {
                                "oneOf": [
                                  {
                                    "additionalProperties": false,
                                    "properties": {
                                      "kind": {
                                        "const": "unix_millis"
                                      },
                                      "value": {
                                        "type": "integer"
                                      }
                                    },
                                    "required": [
                                      "kind",
                                      "value"
                                    ],
                                    "type": "object"
                                  },
                                  {
                                    "additionalProperties": false,
                                    "properties": {
                                      "kind": {
                                        "const": "logical"
                                      },
                                      "value": {
                                        "minimum": 0,
                                        "type": "integer"
                                      }
                                    },
                                    "required": [
                                      "kind",
                                      "value"
                                    ],
                                    "type": "object"
                                  }
                                ]
                              },
                              "trigger_id": {
                                "description": "Trigger identifier.",
                                "type": "string"
                              }
                            },
                            "required": [
                              "trigger_id",
                              "tenant_id",
                              "namespace_id",
                              "run_id",
                              "kind",
                              "time",
                              "source_id"
                            ],
                            "type": "object"
                          },
                          "seq": {
                            "minimum": 0,
                            "type": "integer"
                          }
                        },
                        "required": [
                          "seq",
                          "event"
                        ],
                        "type": "object"
                      },
                      "type": "array"
                    }
                  },
                  "required": [
                    "tenant_id",
                    "namespace_id",
                    "run_id",
                    "scenario_id",
                    "spec_hash",
                    "current_stage_id",
                    "stage_entered_at",
                    "status",
                    "dispatch_targets",
                    "triggers",
                    "gate_evals",
                    "decisions",
                    "packets",
                    "submissions",
                    "tool_calls"
                  ],
                  "type": "object"
                },
                "type": {
                  "const": "json"
                }
              },
              "required": [
                "type",
                "json"
              ],
              "type": "object"
            },
            "minItems": 1,
            "type": "array"
          }
        },
        "required": [
          "content"
        ],
        "type": "object"
      },
      "ScenarioStatusToolCallParams": {
        "additionalProperties": false,
        "properties": {
          "arguments": {
            "$schema": "https://json-schema.org/draft/2020-12/schema",
            "additionalProperties": false,
            "properties": {
              "request": {
                "additionalProperties": false,
                "description": "Status request payload.",
                "properties": {
                  "correlation_id": {
                    "oneOf": [
                      {
                        "type": "null"
                      },
                      {
                        "description": "Correlation identifier.",
                        "type": "string"
                      }
                    ]
                  },
                  "namespace_id": {
                    "description": "Namespace identifier.",
                    "minimum": 1,
                    "type": "integer"
                  },
                  "requested_at": {
                    "oneOf": [
                      {
                        "additionalProperties": false,
                        "properties": {
                          "kind": {
                            "const": "unix_millis"
                          },
                          "value": {
                            "type": "integer"
                          }
                        },
                        "required": [
                          "kind",
                          "value"
                        ],
                        "type": "object"
                      },
                      {
                        "additionalProperties": false,
                        "properties": {
                          "kind": {
                            "const": "logical"
                          },
                          "value": {
                            "minimum": 0,
                            "type": "integer"
                          }
                        },
                        "required": [
                          "kind",
                          "value"
                        ],
                        "type": "object"
                      }
                    ]
                  },
                  "run_id": {
                    "description": "Run identifier.",
                    "type": "string"
                  },
                  "tenant_id": {
                    "description": "Tenant identifier.",
                    "minimum": 1,
                    "type": "integer"
                  }
                },
                "required": [
                  "tenant_id",
                  "namespace_id",
                  "run_id",
                  "requested_at"
                ],
                "type": "object"
              },
              "scenario_id": {
                "description": "Scenario identifier.",
                "type": "string"
              }
            },
            "required": [
              "scenario_id",
              "request"
            ],
            "type": "object"
          },
          "name": {
            "const": "scenario_status"
          }
        },
        "required": [
          "name",
          "arguments"
        ],
        "type": "object"
      },
      "ScenarioStatusToolCallResult": {
        "additionalProperties": false,
        "properties": {
          "content": {
            "items": {
              "additionalProperties": false,
              "properties": {
                "json": {
                  "additionalProperties": false,
                  "properties": {
                    "current_stage_id": {
                      "description": "Current stage identifier.",
                      "type": "string"
                    },
                    "issued_packet_ids": {
                      "items": {
                        "description": "Packet identifier.",
                        "type": "string"
                      },
                      "type": "array"
                    },
                    "last_decision": {
                      "oneOf": [
                        {
                          "type": "null"
                        },
                        {
                          "additionalProperties": false,
                          "properties": {
                            "correlation_id": {
                              "oneOf": [
                                {
                                  "type": "null"
                                },
                                {
                                  "description": "Correlation identifier.",
                                  "type": "string"
                                }
                              ]
                            },
                            "decided_at": {
                              "oneOf": [
                                {
                                  "additionalProperties": false,
                                  "properties": {
                                    "kind": {
                                      "const": "unix_millis"
                                    },
                                    "value": {
                                      "type": "integer"
                                    }
                                  },
                                  "required": [
                                    "kind",
                                    "value"
                                  ],
                                  "type": "object"
                                },
                                {
                                  "additionalProperties": false,
                                  "properties": {
                                    "kind": {
                                      "const": "logical"
                                    },
                                    "value": {
                                      "minimum": 0,
                                      "type": "integer"
                                    }
                                  },
                                  "required": [
                                    "kind",
                                    "value"
                                  ],
                                  "type": "object"
                                }
                              ]
                            },
                            "decision_id": {
                              "description": "Decision identifier.",
                              "type": "string"
                            },
                            "outcome": {
                              "oneOf": [
                                {
                                  "additionalProperties": false,
                                  "properties": {
                                    "kind": {
                                      "const": "start"
                                    },
                                    "stage_id": {
                                      "description": "Initial stage identifier.",
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "kind",
                                    "stage_id"
                                  ],
                                  "type": "object"
                                },
                                {
                                  "additionalProperties": false,
                                  "properties": {
                                    "kind": {
                                      "const": "complete"
                                    },
                                    "stage_id": {
                                      "description": "Terminal stage identifier.",
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "kind",
                                    "stage_id"
                                  ],
                                  "type": "object"
                                },
                                {
                                  "additionalProperties": false,
                                  "properties": {
                                    "from_stage": {
                                      "description": "Previous stage identifier.",
                                      "type": "string"
                                    },
                                    "kind": {
                                      "const": "advance"
                                    },
                                    "timeout": {
                                      "type": "boolean"
                                    },
                                    "to_stage": {
                                      "description": "Next stage identifier.",
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "kind",
                                    "from_stage",
                                    "to_stage",
                                    "timeout"
                                  ],
                                  "type": "object"
                                },
                                {
                                  "additionalProperties": false,
                                  "properties": {
                                    "kind": {
                                      "const": "hold"
                                    },
                                    "summary": {
                                      "additionalProperties": false,
                                      "properties": {
                                        "policy_tags": {
                                          "description": "Policy tags applied to the summary.",
                                          "items": {
                                            "type": "string"
                                          },
                                          "type": "array"
                                        },
                                        "retry_hint": {
                                          "oneOf": [
                                            {
                                              "type": "null"
                                            },
                                            {
                                              "description": "Optional retry hint.",
                                              "type": "string"
                                            }
                                          ]
                                        },
                                        "status": {
                                          "description": "Summary status.",
                                          "type": "string"
                                        },
                                        "unmet_gates": {
                                          "items": {
                                            "description": "Gate identifier.",
                                            "type": "string"
                                          },
                                          "type": "array"
                                        }
                                      },
                                      "required": [
                                        "status",
                                        "unmet_gates",
                                        "retry_hint",
                                        "policy_tags"
                                      ],
                                      "type": "object"
                                    }
                                  },
                                  "required": [
                                    "kind",
                                    "summary"
                                  ],
                                  "type": "object"
                                },
                                {
                                  "additionalProperties": false,
                                  "properties": {
                                    "kind": {
                                      "const": "fail"
                                    },
                                    "reason": {
                                      "description": "Failure reason.",
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "kind",
                                    "reason"
                                  ],
                                  "type": "object"
                                }
                              ]
                            },
                            "seq": {
                              "minimum": 0,
                              "type": "integer"
                            },
                            "stage_id": {
                              "description": "Stage identifier.",
                              "type": "string"
                            },
                            "trigger_id": {
                              "description": "Trigger identifier.",
                              "type": "string"
                            }
                          },
                          "required": [
                            "decision_id",
                            "seq",
                            "trigger_id",
                            "stage_id",
                            "decided_at",
                            "outcome",
                            "correlation_id"
                          ],
                          "type": "object"
                        }
                      ]
                    },
                    "namespace_id": {
                      "description": "Namespace identifier.",
                      "minimum": 1,
                      "type": "integer"
                    },
                    "run_id": {
                      "description": "Run identifier.",
                      "type": "string"
                    },
                    "safe_summary": {
                      "oneOf": [
                        {
                          "type": "null"
                        },
                        {
                          "additionalProperties": false,
                          "properties": {
                            "policy_tags": {
                              "description": "Policy tags applied to the summary.",
                              "items": {
                                "type": "string"
                              },
                              "type": "array"
                            },
                            "retry_hint": {
                              "oneOf": [
                                {
                                  "type": "null"
                                },
                                {
                                  "description": "Optional retry hint.",
                                  "type": "string"
                                }
                              ]
                            },
                            "status": {
                              "description": "Summary status.",
                              "type": "string"
                            },
                            "unmet_gates": {
                              "items": {
                                "description": "Gate identifier.",
                                "type": "string"
                              },
                              "type": "array"
                            }
                          },
                          "required": [
                            "status",
                            "unmet_gates",
                            "retry_hint",
                            "policy_tags"
                          ],
                          "type": "object"
                        }
                      ]
                    },
                    "scenario_id": {
                      "description": "Scenario identifier.",
                      "type": "string"
                    },
                    "status": {
                      "enum": [
                        "active",
                        "completed",
                        "failed"
                      ],
                      "type": "string"
                    }
                  },
                  "required": [
                    "run_id",
                    "scenario_id",
                    "current_stage_id",
                    "status",
                    "last_decision",
                    "issued_packet_ids",
                    "safe_summary"
                  ],
                  "type": "object"
                },
                "type": {
                  "const": "json"
                }
              },
              "required": [
                "type",
                "json"
              ],
              "type": "object"
            },
            "minItems": 1,
            "type": "array"
          }
        },
        "required": [
          "content"
        ],
        "type": "object"
      },
      "ScenarioSubmitToolCallParams": {
        "additionalProperties": false,
        "properties": {
          "arguments": {
            "$schema": "https://json-schema.org/draft/2020-12/schema",
            "additionalProperties": false,
            "properties": {
              "request": {
                "additionalProperties": false,
                "description": "Submission payload and metadata.",
                "properties": {
                  "content_type": {
                    "description": "Submission content type.",
                    "type": "string"
                  },
                  "correlation_id": {
                    "oneOf": [
                      {
                        "type": "null"
                      },
                      {
                        "description": "Correlation identifier.",
                        "type": "string"
                      }
                    ]
                  },
                  "namespace_id": {
                    "description": "Namespace identifier.",
                    "minimum": 1,
                    "type": "integer"
                  },
                  "payload": {
                    "oneOf": [
                      {
                        "additionalProperties": false,
                        "properties": {
                          "kind": {
                            "const": "json"
                          },
                          "value": {
                            "description": "Inline JSON payload.",
                            "type": [
                              "null",
                              "boolean",
                              "number",
                              "string",
                              "array",
                              "object"
                            ]
                          }
                        },
                        "required": [
                          "kind",
                          "value"
                        ],
                        "type": "object"
                      },
                      {
                        "additionalProperties": false,
                        "properties": {
                          "bytes": {
                            "items": {
                              "maximum": 255,
                              "minimum": 0,
                              "type": "integer"
                            },
                            "type": "array"
                          },
                          "kind": {
                            "const": "bytes"
                          }
                        },
                        "required": [
                          "kind",
                          "bytes"
                        ],
                        "type": "object"
                      },
                      {
                        "additionalProperties": false,
                        "properties": {
                          "content_ref": {
                            "additionalProperties": false,
                            "properties": {
                              "content_hash": {
                                "additionalProperties": false,
                                "properties": {
                                  "algorithm": {
                                    "enum": [
                                      "sha256"
                                    ],
                                    "type": "string"
                                  },
                                  "value": {
                                    "description": "Lowercase hex digest.",
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "algorithm",
                                  "value"
                                ],
                                "type": "object"
                              },
                              "encryption": {
                                "oneOf": [
                                  {
                                    "type": "null"
                                  },
                                  {
                                    "description": "Encryption metadata.",
                                    "type": "string"
                                  }
                                ]
                              },
                              "uri": {
                                "description": "Content URI.",
                                "type": "string"
                              }
                            },
                            "required": [
                              "uri",
                              "content_hash",
                              "encryption"
                            ],
                            "type": "object"
                          },
                          "kind": {
                            "const": "external"
                          }
                        },
                        "required": [
                          "kind",
                          "content_ref"
                        ],
                        "type": "object"
                      }
                    ]
                  },
                  "run_id": {
                    "description": "Run identifier.",
                    "type": "string"
                  },
                  "submission_id": {
                    "description": "Submission identifier.",
                    "type": "string"
                  },
                  "submitted_at": {
                    "oneOf": [
                      {
                        "additionalProperties": false,
                        "properties": {
                          "kind": {
                            "const": "unix_millis"
                          },
                          "value": {
                            "type": "integer"
                          }
                        },
                        "required": [
                          "kind",
                          "value"
                        ],
                        "type": "object"
                      },
                      {
                        "additionalProperties": false,
                        "properties": {
                          "kind": {
                            "const": "logical"
                          },
                          "value": {
                            "minimum": 0,
                            "type": "integer"
                          }
                        },
                        "required": [
                          "kind",
                          "value"
                        ],
                        "type": "object"
                      }
                    ]
                  },
                  "tenant_id": {
                    "description": "Tenant identifier.",
                    "minimum": 1,
                    "type": "integer"
                  }
                },
                "required": [
                  "tenant_id",
                  "namespace_id",
                  "run_id",
                  "submission_id",
                  "payload",
                  "content_type",
                  "submitted_at"
                ],
                "type": "object"
              },
              "scenario_id": {
                "description": "Scenario identifier.",
                "type": "string"
              }
            },
            "required": [
              "scenario_id",
              "request"
            ],
            "type": "object"
          },
          "name": {
            "const": "scenario_submit"
          }
        },
        "required": [
          "name",
          "arguments"
        ],
        "type": "object"
      },
      "ScenarioSubmitToolCallResult": {
        "additionalProperties": false,
        "properties": {
          "content": {
            "items": {
              "additionalProperties": false,
              "properties": {
                "json": {
                  "additionalProperties": false,
                  "properties": {
                    "record": {
                      "additionalProperties": false,
                      "properties": {
                        "content_hash": {
                          "additionalProperties": false,
                          "properties": {
                            "algorithm": {
                              "enum": [
                                "sha256"
                              ],
                              "type": "string"
                            },
                            "value": {
                              "description": "Lowercase hex digest.",
                              "type": "string"
                            }
                          },
                          "required": [
                            "algorithm",
                            "value"
                          ],
                          "type": "object"
                        },
                        "content_type": {
                          "description": "Submission content type.",
                          "type": "string"
                        },
                        "correlation_id": {
                          "oneOf": [
                            {
                              "type": "null"
                            },
                            {
                              "description": "Correlation identifier.",
                              "type": "string"
                            }
                          ]
                        },
                        "payload": {
                          "oneOf": [
                            {
                              "additionalProperties": false,
                              "properties": {
                                "kind": {
                                  "const": "json"
                                },
                                "value": {
                                  "description": "Inline JSON payload.",
                                  "type": [
                                    "null",
                                    "boolean",
                                    "number",
                                    "string",
                                    "array",
                                    "object"
                                  ]
                                }
                              },
                              "required": [
                                "kind",
                                "value"
                              ],
                              "type": "object"
                            },
                            {
                              "additionalProperties": false,
                              "properties": {
                                "bytes": {
                                  "items": {
                                    "maximum": 255,
                                    "minimum": 0,
                                    "type": "integer"
                                  },
                                  "type": "array"
                                },
                                "kind": {
                                  "const": "bytes"
                                }
                              },
                              "required": [
                                "kind",
                                "bytes"
                              ],
                              "type": "object"
                            },
                            {
                              "additionalProperties": false,
                              "properties": {
                                "content_ref": {
                                  "additionalProperties": false,
                                  "properties": {
                                    "content_hash": {
                                      "additionalProperties": false,
                                      "properties": {
                                        "algorithm": {
                                          "enum": [
                                            "sha256"
                                          ],
                                          "type": "string"
                                        },
                                        "value": {
                                          "description": "Lowercase hex digest.",
                                          "type": "string"
                                        }
                                      },
                                      "required": [
                                        "algorithm",
                                        "value"
                                      ],
                                      "type": "object"
                                    },
                                    "encryption": {
                                      "oneOf": [
                                        {
                                          "type": "null"
                                        },
                                        {
                                          "description": "Encryption metadata.",
                                          "type": "string"
                                        }
                                      ]
                                    },
                                    "uri": {
                                      "description": "Content URI.",
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "uri",
                                    "content_hash",
                                    "encryption"
                                  ],
                                  "type": "object"
                                },
                                "kind": {
                                  "const": "external"
                                }
                              },
                              "required": [
                                "kind",
                                "content_ref"
                              ],
                              "type": "object"
                            }
                          ]
                        },
                        "run_id": {
                          "description": "Run identifier.",
                          "type": "string"
                        },
                        "submission_id": {
                          "description": "Submission identifier.",
                          "type": "string"
                        },
                        "submitted_at": {
                          "oneOf": [
                            {
                              "additionalProperties": false,
                              "properties": {
                                "kind": {
                                  "const": "unix_millis"
                                },
                                "value": {
                                  "type": "integer"
                                }
                              },
                              "required": [
                                "kind",
                                "value"
                              ],
                              "type": "object"
                            },
                            {
                              "additionalProperties": false,
                              "properties": {
                                "kind": {
                                  "const": "logical"
                                },
                                "value": {
                                  "minimum": 0,
                                  "type": "integer"
                                }
                              },
                              "required": [
                                "kind",
                                "value"
                              ],
                              "type": "object"
                            }
                          ]
                        }
                      },
                      "required": [
                        "submission_id",
                        "run_id",
                        "payload",
                        "content_type",
                        "content_hash",
                        "submitted_at",
                        "correlation_id"
                      ],
                      "type": "object"
                    }
                  },
                  "required": [
                    "record"
                  ],
                  "type": "object"
                },
                "type": {
                  "const": "json"
                }
              },
              "required": [
                "type",
                "json"
              ],
              "type": "object"
            },
            "minItems": 1,
            "type": "array"
          }
        },
        "required": [
          "content"
        ],
        "type": "object"
      },
      "ScenarioTriggerToolCallParams": {
        "additionalProperties": false,
        "properties": {
          "arguments": {
            "$schema": "https://json-schema.org/draft/2020-12/schema",
            "additionalProperties": false,
            "properties": {
              "scenario_id": {
                "description": "Scenario identifier.",
                "type": "string"
              },
              "trigger": {
                "additionalProperties": false,
                "description": "Trigger event payload.",
                "properties": {
                  "correlation_id": {
                    "oneOf": [
                      {
                        "type": "null"
                      },
                      {
                        "description": "Correlation identifier.",
                        "type": "string"
                      }
                    ]
                  },
                  "kind": {
                    "enum": [
                      "agent_request_next",
                      "tick",
                      "external_event",
                      "backend_event"
                    ],
                    "type": "string"
                  },
                  "namespace_id": {
                    "description": "Namespace identifier.",
                    "minimum": 1,
                    "type": "integer"
                  },
                  "payload": {
                    "oneOf": [
                      {
                        "type": "null"
                      },
                      {
                        "oneOf": [
                          {
                            "additionalProperties": false,
                            "properties": {
                              "kind": {
                                "const": "json"
                              },
                              "value": {
                                "description": "Inline JSON payload.",
                                "type": [
                                  "null",
                                  "boolean",
                                  "number",
                                  "string",
                                  "array",
                                  "object"
                                ]
                              }
                            },
                            "required": [
                              "kind",
                              "value"
                            ],
                            "type": "object"
                          },
                          {
                            "additionalProperties": false,
                            "properties": {
                              "bytes": {
                                "items": {
                                  "maximum": 255,
                                  "minimum": 0,
                                  "type": "integer"
                                },
                                "type": "array"
                              },
                              "kind": {
                                "const": "bytes"
                              }
                            },
                            "required": [
                              "kind",
                              "bytes"
                            ],
                            "type": "object"
                          },
                          {
                            "additionalProperties": false,
                            "properties": {
                              "content_ref": {
                                "additionalProperties": false,
                                "properties": {
                                  "content_hash": {
                                    "additionalProperties": false,
                                    "properties": {
                                      "algorithm": {
                                        "enum": [
                                          "sha256"
                                        ],
                                        "type": "string"
                                      },
                                      "value": {
                                        "description": "Lowercase hex digest.",
                                        "type": "string"
                                      }
                                    },
                                    "required": [
                                      "algorithm",
                                      "value"
                                    ],
                                    "type": "object"
                                  },
                                  "encryption": {
                                    "oneOf": [
                                      {
                                        "type": "null"
                                      },
                                      {
                                        "description": "Encryption metadata.",
                                        "type": "string"
                                      }
                                    ]
                                  },
                                  "uri": {
                                    "description": "Content URI.",
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "uri",
                                  "content_hash",
                                  "encryption"
                                ],
                                "type": "object"
                              },
                              "kind": {
                                "const": "external"
                              }
                            },
                            "required": [
                              "kind",
                              "content_ref"
                            ],
                            "type": "object"
                          }
                        ]
                      }
                    ]
                  },
                  "run_id": {
                    "description": "Run identifier.",
                    "type": "string"
                  },
                  "source_id": {
                    "description": "Trigger source identifier.",
                    "type": "string"
                  },
                  "tenant_id": {
                    "description": "Tenant identifier.",
                    "minimum": 1,
                    "type": "integer"
                  },
                  "time": {
                    "oneOf": [
                      {
                        "additionalProperties": false,
                        "properties": {
                          "kind": {
                            "const": "unix_millis"
                          },
                          "value": {
                            "type": "integer"
                          }
                        },
                        "required": [
                          "kind",
                          "value"
                        ],
                        "type": "object"
                      },
                      {
                        "additionalProperties": false,
                        "properties": {
                          "kind": {
                            "const": "logical"
                          },
                          "value": {
                            "minimum": 0,
                            "type": "integer"
                          }
                        },
                        "required": [
                          "kind",
                          "value"
                        ],
                        "type": "object"
                      }
                    ]
                  },
                  "trigger_id": {
                    "description": "Trigger identifier.",
                    "type": "string"
                  }
                },
                "required": [
                  "trigger_id",
                  "tenant_id",
                  "namespace_id",
                  "run_id",
                  "kind",
                  "time",
                  "source_id"
                ],
                "type": "object"
              }
            },
            "required": [
              "scenario_id",
              "trigger"
            ],
            "type": "object"
          },
          "name": {
            "const": "scenario_trigger"
          }
        },
        "required": [
          "name",
          "arguments"
        ],
        "type": "object"
      },
      "ScenarioTriggerToolCallResult": {
        "additionalProperties": false,
        "properties": {
          "content": {
            "items": {
              "additionalProperties": false,
              "properties": {
                "json": {
                  "additionalProperties": false,
                  "properties": {
                    "decision": {
                      "additionalProperties": false,
                      "properties": {
                        "correlation_id": {
                          "oneOf": [
                            {
                              "type": "null"
                            },
                            {
                              "description": "Correlation identifier.",
                              "type": "string"
                            }
                          ]
                        },
                        "decided_at": {
                          "oneOf": [
                            {
                              "additionalProperties": false,
                              "properties": {
                                "kind": {
                                  "const": "unix_millis"
                                },
                                "value": {
                                  "type": "integer"
                                }
                              },
                              "required": [
                                "kind",
                                "value"
                              ],
                              "type": "object"
                            },
                            {
                              "additionalProperties": false,
                              "properties": {
                                "kind": {
                                  "const": "logical"
                                },
                                "value": {
                                  "minimum": 0,
                                  "type": "integer"
                                }
                              },
                              "required": [
                                "kind",
                                "value"
                              ],
                              "type": "object"
                            }
                          ]
                        },
                        "decision_id": {
                          "description": "Decision identifier.",
                          "type": "string"
                        },
                        "outcome": {
                          "oneOf": [
                            {
                              "additionalProperties": false,
                              "properties": {
                                "kind": {
                                  "const": "start"
                                },
                                "stage_id": {
                                  "description": "Initial stage identifier.",
                                  "type": "string"
                                }
                              },
                              "required": [
                                "kind",
                                "stage_id"
                              ],
                              "type": "object"
                            },
                            {
                              "additionalProperties": false,
                              "properties": {
                                "kind": {
                                  "const": "complete"
                                },
                                "stage_id": {
                                  "description": "Terminal stage identifier.",
                                  "type": "string"
                                }
                              },
                              "required": [
                                "kind",
                                "stage_id"
                              ],
                              "type": "object"
                            },
                            {
                              "additionalProperties": false,
                              "properties": {
                                "from_stage": {
                                  "description": "Previous stage identifier.",
                                  "type": "string"
                                },
                                "kind": {
                                  "const": "advance"
                                },
                                "timeout": {
                                  "type": "boolean"
                                },
                                "to_stage": {
                                  "description": "Next stage identifier.",
                                  "type": "string"
                                }
                              },
                              "required": [
                                "kind",
                                "from_stage",
                                "to_stage",
                                "timeout"
                              ],
                              "type": "object"
                            },
                            {
                              "additionalProperties": false,
                              "properties": {
                                "kind": {
                                  "const": "hold"
                                },
                                "summary": {
                                  "additionalProperties": false,
                                  "properties": {
                                    "policy_tags": {
                                      "description": "Policy tags applied to the summary.",
                                      "items": {
                                        "type": "string"
                                      },
                                      "type": "array"
                                    },
                                    "retry_hint": {
                                      "oneOf": [
                                        {
                                          "type": "null"
                                        },
                                        {
                                          "description": "Optional retry hint.",
                                          "type": "string"
                                        }
                                      ]
                                    },
                                    "status": {
                                      "description": "Summary status.",
                                      "type": "string"
                                    },
                                    "unmet_gates": {
                                      "items": {
                                        "description": "Gate identifier.",
                                        "type": "string"
                                      },
                                      "type": "array"
                                    }
                                  },
                                  "required": [
                                    "status",
                                    "unmet_gates",
                                    "retry_hint",
                                    "policy_tags"
                                  ],
                                  "type": "object"
                                }
                              },
                              "required": [
                                "kind",
                                "summary"
                              ],
                              "type": "object"
                            },
                            {
                              "additionalProperties": false,
                              "properties": {
                                "kind": {
                                  "const": "fail"
                                },
                                "reason": {
                                  "description": "Failure reason.",
                                  "type": "string"
                                }
                              },
                              "required": [
                                "kind",
                                "reason"
                              ],
                              "type": "object"
                            }
                          ]
                        },
                        "seq": {
                          "minimum": 0,
                          "type": "integer"
                        },
                        "stage_id": {
                          "description": "Stage identifier.",
                          "type": "string"
                        },
                        "trigger_id": {
                          "description": "Trigger identifier.",
                          "type": "string"
                        }
                      },
                      "required": [
                        "decision_id",
                        "seq",
                        "trigger_id",
                        "stage_id",
                        "decided_at",
                        "outcome",
                        "correlation_id"
                      ],
                      "type": "object"
                    },
                    "packets": {
                      "items": {
                        "additionalProperties": false,
                        "properties": {
                          "decision_id": {
                            "description": "Decision identifier.",
                            "type": "string"
                          },
                          "envelope": {
                            "additionalProperties": false,
                            "properties": {
                              "content_hash": {
                                "additionalProperties": false,
                                "properties": {
                                  "algorithm": {
                                    "enum": [
                                      "sha256"
                                    ],
                                    "type": "string"
                                  },
                                  "value": {
                                    "description": "Lowercase hex digest.",
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "algorithm",
                                  "value"
                                ],
                                "type": "object"
                              },
                              "content_type": {
                                "description": "Packet content type.",
                                "type": "string"
                              },
                              "correlation_id": {
                                "oneOf": [
                                  {
                                    "type": "null"
                                  },
                                  {
                                    "description": "Correlation identifier.",
                                    "type": "string"
                                  }
                                ]
                              },
                              "expiry": {
                                "oneOf": [
                                  {
                                    "type": "null"
                                  },
                                  {
                                    "oneOf": [
                                      {
                                        "additionalProperties": false,
                                        "properties": {
                                          "kind": {
                                            "const": "unix_millis"
                                          },
                                          "value": {
                                            "type": "integer"
                                          }
                                        },
                                        "required": [
                                          "kind",
                                          "value"
                                        ],
                                        "type": "object"
                                      },
                                      {
                                        "additionalProperties": false,
                                        "properties": {
                                          "kind": {
                                            "const": "logical"
                                          },
                                          "value": {
                                            "minimum": 0,
                                            "type": "integer"
                                          }
                                        },
                                        "required": [
                                          "kind",
                                          "value"
                                        ],
                                        "type": "object"
                                      }
                                    ]
                                  }
                                ]
                              },
                              "issued_at": {
                                "oneOf": [
                                  {
                                    "additionalProperties": false,
                                    "properties": {
                                      "kind": {
                                        "const": "unix_millis"
                                      },
                                      "value": {
                                        "type": "integer"
                                      }
                                    },
                                    "required": [
                                      "kind",
                                      "value"
                                    ],
                                    "type": "object"
                                  },
                                  {
                                    "additionalProperties": false,
                                    "properties": {
                                      "kind": {
                                        "const": "logical"
                                      },
                                      "value": {
                                        "minimum": 0,
                                        "type": "integer"
                                      }
                                    },
                                    "required": [
                                      "kind",
                                      "value"
                                    ],
                                    "type": "object"
                                  }
                                ]
                              },
                              "packet_id": {
                                "description": "Packet identifier.",
                                "type": "string"
                              },
                              "run_id": {
                                "description": "Run identifier.",
                                "type": "string"
                              },
                              "scenario_id": {
                                "description": "Scenario identifier.",
                                "type": "string"
                              },
                              "schema_id": {
                                "description": "Schema identifier.",
                                "type": "string"
                              },
                              "stage_id": {
                                "description": "Stage identifier.",
                                "type": "string"
                              },
                              "visibility": {
                                "additionalProperties": false,
                                "properties": {
                                  "labels": {
                                    "description": "Visibility labels.",
                                    "items": {
                                      "type": "string"
                                    },
                                    "type": "array"
                                  },
                                  "policy_tags": {
                                    "description": "Policy tags.",
                                    "items": {
                                      "type": "string"
                                    },
                                    "type": "array"
                                  }
                                },
                                "required": [
                                  "labels",
                                  "policy_tags"
                                ],
                                "type": "object"
                              }
                            },
                            "required": [
                              "scenario_id",
                              "run_id",
                              "stage_id",
                              "packet_id",
                              "schema_id",
                              "content_type",
                              "content_hash",
                              "visibility",
                              "expiry",
                              "correlation_id",
                              "issued_at"
                            ],
                            "type": "object"
                          },
                          "payload": {
                            "oneOf": [
                              {
                                "additionalProperties": false,
                                "properties": {
                                  "kind": {
                                    "const": "json"
                                  },
                                  "value": {
                                    "description": "Inline JSON payload.",
                                    "type": [
                                      "null",
                                      "boolean",
                                      "number",
                                      "string",
                                      "array",
                                      "object"
                                    ]
                                  }
                                },
                                "required": [
                                  "kind",
                                  "value"
                                ],
                                "type": "object"
                              },
                              {
                                "additionalProperties": false,
                                "properties": {
                                  "bytes": {
                                    "items": {
                                      "maximum": 255,
                                      "minimum": 0,
                                      "type": "integer"
                                    },
                                    "type": "array"
                                  },
                                  "kind": {
                                    "const": "bytes"
                                  }
                                },
                                "required": [
                                  "kind",
                                  "bytes"
                                ],
                                "type": "object"
                              },
                              {
                                "additionalProperties": false,
                                "properties": {
                                  "content_ref": {
                                    "additionalProperties": false,
                                    "properties": {
                                      "content_hash": {
                                        "additionalProperties": false,
                                        "properties": {
                                          "algorithm": {
                                            "enum": [
                                              "sha256"
                                            ],
                                            "type": "string"
                                          },
                                          "value": {
                                            "description": "Lowercase hex digest.",
                                            "type": "string"
                                          }
                                        },
                                        "required": [
                                          "algorithm",
                                          "value"
                                        ],
                                        "type": "object"
                                      },
                                      "encryption": {
                                        "oneOf": [
                                          {
                                            "type": "null"
                                          },
                                          {
                                            "description": "Encryption metadata.",
                                            "type": "string"
                                          }
                                        ]
                                      },
                                      "uri": {
                                        "description": "Content URI.",
                                        "type": "string"
                                      }
                                    },
                                    "required": [
                                      "uri",
                                      "content_hash",
                                      "encryption"
                                    ],
                                    "type": "object"
                                  },
                                  "kind": {
                                    "const": "external"
                                  }
                                },
                                "required": [
                                  "kind",
                                  "content_ref"
                                ],
                                "type": "object"
                              }
                            ]
                          },
                          "receipts": {
                            "items": {
                              "additionalProperties": false,
                              "properties": {
                                "dispatch_id": {
                                  "description": "Dispatch identifier.",
                                  "type": "string"
                                },
                                "dispatched_at": {
                                  "oneOf": [
                                    {
                                      "additionalProperties": false,
                                      "properties": {
                                        "kind": {
                                          "const": "unix_millis"
                                        },
                                        "value": {
                                          "type": "integer"
                                        }
                                      },
                                      "required": [
                                        "kind",
                                        "value"
                                      ],
                                      "type": "object"
                                    },
                                    {
                                      "additionalProperties": false,
                                      "properties": {
                                        "kind": {
                                          "const": "logical"
                                        },
                                        "value": {
                                          "minimum": 0,
                                          "type": "integer"
                                        }
                                      },
                                      "required": [
                                        "kind",
                                        "value"
                                      ],
                                      "type": "object"
                                    }
                                  ]
                                },
                                "dispatcher": {
                                  "description": "Dispatcher identifier.",
                                  "type": "string"
                                },
                                "receipt_hash": {
                                  "additionalProperties": false,
                                  "properties": {
                                    "algorithm": {
                                      "enum": [
                                        "sha256"
                                      ],
                                      "type": "string"
                                    },
                                    "value": {
                                      "description": "Lowercase hex digest.",
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "algorithm",
                                    "value"
                                  ],
                                  "type": "object"
                                },
                                "target": {
                                  "oneOf": [
                                    {
                                      "additionalProperties": false,
                                      "properties": {
                                        "agent_id": {
                                          "description": "Agent identifier.",
                                          "type": "string"
                                        },
                                        "kind": {
                                          "const": "agent"
                                        }
                                      },
                                      "required": [
                                        "kind",
                                        "agent_id"
                                      ],
                                      "type": "object"
                                    },
                                    {
                                      "additionalProperties": false,
                                      "properties": {
                                        "kind": {
                                          "const": "session"
                                        },
                                        "session_id": {
                                          "description": "Session identifier.",
                                          "type": "string"
                                        }
                                      },
                                      "required": [
                                        "kind",
                                        "session_id"
                                      ],
                                      "type": "object"
                                    },
                                    {
                                      "additionalProperties": false,
                                      "properties": {
                                        "kind": {
                                          "const": "external"
                                        },
                                        "system": {
                                          "description": "External system name.",
                                          "type": "string"
                                        },
                                        "target": {
                                          "description": "External system target.",
                                          "type": "string"
                                        }
                                      },
                                      "required": [
                                        "kind",
                                        "system",
                                        "target"
                                      ],
                                      "type": "object"
                                    },
                                    {
                                      "additionalProperties": false,
                                      "properties": {
                                        "channel": {
                                          "description": "Broadcast channel identifier.",
                                          "type": "string"
                                        },
                                        "kind": {
                                          "const": "channel"
                                        }
                                      },
                                      "required": [
                                        "kind",
                                        "channel"
                                      ],
                                      "type": "object"
                                    }
                                  ]
                                }
                              },
                              "required": [
                                "dispatch_id",
                                "target",
                                "receipt_hash",
                                "dispatched_at",
                                "dispatcher"
                              ],
                              "type": "object"
                            },
                            "type": "array"
                          }
                        },
                        "required": [
                          "envelope",
                          "payload",
                          "receipts",
                          "decision_id"
                        ],
                        "type": "object"
                      },
                      "type": "array"
                    },
                    "status": {
                      "enum": [
                        "active",
                        "completed",
                        "failed"
                      ],
                      "type": "string"
                    }
                  },
                  "required": [
                    "decision",
                    "packets",
                    "status"
                  ],
                  "type": "object"
                },
                "type": {
                  "const": "json"
                }
              },
              "required": [
                "type",
                "json"
              ],
              "type": "object"
            },
            "minItems": 1,
            "type": "array"
          }
        },
        "required": [
          "content"
        ],
        "type": "object"
      },
      "ScenariosListToolCallParams": {
        "additionalProperties": false,
        "properties": {
          "arguments": {
            "$schema": "https://json-schema.org/draft/2020-12/schema",
            "additionalProperties": false,
            "properties": {
              "cursor": {
                "oneOf": [
                  {
                    "type": "null"
                  },
                  {
                    "description": "Pagination cursor.",
                    "type": "string"
                  }
                ]
              },
              "limit": {
                "description": "Maximum number of records to return.",
                "maximum": 1000,
                "minimum": 1,
                "type": "integer"
              },
              "namespace_id": {
                "description": "Namespace identifier.",
                "minimum": 1,
                "type": "integer"
              },
              "tenant_id": {
                "description": "Tenant identifier.",
                "minimum": 1,
                "type": "integer"
              }
            },
            "required": [
              "tenant_id",
              "namespace_id"
            ],
            "type": "object"
          },
          "name": {
            "const": "scenarios_list"
          }
        },
        "required": [
          "name",
          "arguments"
        ],
        "type": "object"
      },
      "ScenariosListToolCallResult": {
        "additionalProperties": false,
        "properties": {
          "content": {
            "items": {
              "additionalProperties": false,
              "properties": {
                "json": {
                  "$schema": "https://json-schema.org/draft/2020-12/schema",
                  "additionalProperties": false,
                  "properties": {
                    "items": {
                      "items": {
                        "additionalProperties": false,
                        "properties": {
                          "namespace_id": {
                            "description": "Namespace identifier.",
                            "minimum": 1,
                            "type": "integer"
                          },
                          "scenario_id": {
                            "description": "Scenario identifier.",
                            "type": "string"
                          },
                          "spec_hash": {
                            "additionalProperties": false,
                            "properties": {
                              "algorithm": {
                                "enum": [
                                  "sha256"
                                ],
                                "type": "string"
                              },
                              "value": {
                                "description": "Lowercase hex digest.",
                                "type": "string"
                              }
                            },
                            "required": [
                              "algorithm",
                              "value"
                            ],
                            "type": "object"
                          }
                        },
                        "required": [
                          "scenario_id",
                          "namespace_id",
                          "spec_hash"
                        ],
                        "type": "object"
                      },
                      "type": "array"
                    },
                    "next_token": {
                      "oneOf": [
                        {
                          "type": "null"
                        },
                        {
                          "description": "Pagination token for the next page.",
                          "type": "string"
                        }
                      ]
                    }
                  },
                  "required": [
                    "items",
                    "next_token"
                  ],
                  "type": "object"
                },
                "type": {
                  "const": "json"
                }
              },
              "required": [
                "type",
                "json"
              ],
              "type": "object"
            },
            "minItems": 1,
            "type": "array"
          }
        },
        "required": [
          "content"
        ],
        "type": "object"
      },
      "SchemasGetToolCallParams": {
        "additionalProperties": false,
        "properties": {
          "arguments": {
            "$schema": "https://json-schema.org/draft/2020-12/schema",
            "additionalProperties": false,
            "properties": {
              "namespace_id": {
                "description": "Namespace identifier.",
                "minimum": 1,
                "type": "integer"
              },
              "schema_id": {
                "description": "Data shape identifier.",
                "type": "string"
              },
              "tenant_id": {
                "description": "Tenant identifier.",
                "minimum": 1,
                "type": "integer"
              },
              "version": {
                "description": "Data shape version identifier.",
                "type": "string"
              }
            },
            "required": [
              "tenant_id",
              "namespace_id",
              "schema_id",
              "version"
            ],
            "type": "object"
          },
          "name": {
            "const": "schemas_get"
          }
        },
        "required": [
          "name",
          "arguments"
        ],
        "type": "object"
      },
      "SchemasGetToolCallResult": {
        "additionalProperties": false,
        "properties": {
          "content": {
            "items": {
              "additionalProperties": false,
              "properties": {
                "json": {
                  "$schema": "https://json-schema.org/draft/2020-12/schema",
                  "additionalProperties": false,
                  "properties": {
                    "record": {
                      "additionalProperties": false,
                      "properties": {
                        "created_at": {
                          "oneOf": [
                            {
                              "additionalProperties": false,
                              "properties": {
                                "kind": {
                                  "const": "unix_millis"
                                },
                                "value": {
                                  "type": "integer"
                                }
                              },
                              "required": [
                                "kind",
                                "value"
                              ],
                              "type": "object"
                            },
                            {
                              "additionalProperties": false,
                              "properties": {
                                "kind": {
                                  "const": "logical"
                                },
                                "value": {
                                  "minimum": 0,
                                  "type": "integer"
                                }
                              },
                              "required": [
                                "kind",
                                "value"
                              ],
                              "type": "object"
                            }
                          ]
                        },
                        "description": {
                          "oneOf": [
                            {
                              "type": "null"
                            },
                            {
                              "description": "Optional schema description.",
                              "type": "string"
                            }
                          ]
                        },
                        "namespace_id": {
                          "description": "Namespace identifier.",
                          "minimum": 1,
                          "type": "integer"
                        },
                        "schema": {
                          "description": "JSON Schema payload.",
                          "type": [
                            "null",
                            "boolean",
                            "number",
                            "string",
                            "array",
                            "object"
                          ]
                        },
                        "schema_id": {
                          "description": "Data shape identifier.",
                          "type": "string"
                        },
                        "signing": {
                          "additionalProperties": false,
                          "properties": {
                            "algorithm": {
                              "default": null,
                              "oneOf": [
                                {
                                  "type": "null"
                                },
                                {
                                  "description": "Signature algorithm label.",
                                  "type": "string"
                                }
                              ]
                            },
                            "key_id": {
                              "description": "Signing key identifier.",
                              "type": "string"
                            },
                            "signature": {
                              "description": "Schema signature string.",
                              "type": "string"
                            }
                          },
                          "required": [
                            "key_id",
                            "signature"
                          ],
                          "type": "object"
                        },
                        "tenant_id": {
                          "description": "Tenant identifier.",
                          "minimum": 1,
                          "type": "integer"
                        },
                        "version": {
                          "description": "Data shape version identifier.",
                          "type": "string"
                        }
                      },
                      "required": [
                        "tenant_id",
                        "namespace_id",
                        "schema_id",
                        "version",
                        "schema",
                        "description",
                        "created_at"
                      ],
                      "type": "object"
                    }
                  },
                  "required": [
                    "record"
                  ],
                  "type": "object"
                },
                "type": {
                  "const": "json"
                }
              },
              "required": [
                "type",
                "json"
              ],
              "type": "object"
            },
            "minItems": 1,
            "type": "array"
          }
        },
        "required": [
          "content"
        ],
        "type": "object"
      },
      "SchemasListToolCallParams": {
        "additionalProperties": false,
        "properties": {
          "arguments": {
            "$schema": "https://json-schema.org/draft/2020-12/schema",
            "additionalProperties": false,
            "properties": {
              "cursor": {
                "oneOf": [
                  {
                    "type": "null"
                  },
                  {
                    "description": "Pagination cursor.",
                    "type": "string"
                  }
                ]
              },
              "limit": {
                "description": "Maximum number of records to return.",
                "maximum": 1000,
                "minimum": 1,
                "type": "integer"
              },
              "namespace_id": {
                "description": "Namespace identifier.",
                "minimum": 1,
                "type": "integer"
              },
              "tenant_id": {
                "description": "Tenant identifier.",
                "minimum": 1,
                "type": "integer"
              }
            },
            "required": [
              "tenant_id",
              "namespace_id"
            ],
            "type": "object"
          },
          "name": {
            "const": "schemas_list"
          }
        },
        "required": [
          "name",
          "arguments"
        ],
        "type": "object"
      },
      "SchemasListToolCallResult": {
        "additionalProperties": false,
        "properties": {
          "content": {
            "items": {
              "additionalProperties": false,
              "properties": {
                "json": {
                  "$schema": "https://json-schema.org/draft/2020-12/schema",
                  "additionalProperties": false,
                  "properties": {
                    "items": {
                      "items": {
                        "additionalProperties": false,
                        "properties": {
                          "created_at": {
                            "oneOf": [
                              {
                                "additionalProperties": false,
                                "properties": {
                                  "kind": {
                                    "const": "unix_millis"
                                  },
                                  "value": {
                                    "type": "integer"
                                  }
                                },
                                "required": [
                                  "kind",
                                  "value"
                                ],
                                "type": "object"
                              },
                              {
                                "additionalProperties": false,
                                "properties": {
                                  "kind": {
                                    "const": "logical"
                                  },
                                  "value": {
                                    "minimum": 0,
                                    "type": "integer"
                                  }
                                },
                                "required": [
                                  "kind",
                                  "value"
                                ],
                                "type": "object"
                              }
                            ]
                          },
                          "description": {
                            "oneOf": [
                              {
                                "type": "null"
                              },
                              {
                                "description": "Optional schema description.",
                                "type": "string"
                              }
                            ]
                          },
                          "namespace_id": {
                            "description": "Namespace identifier.",
                            "minimum": 1,
                            "type": "integer"
                          },
                          "schema": {
                            "description": "JSON Schema payload.",
                            "type": [
                              "null",
                              "boolean",
                              "number",
                              "string",
                              "array",
                              "object"
                            ]
                          },
                          "schema_id": {
                            "description": "Data shape identifier.",
                            "type": "string"
                          },
                          "signing": {
                            "additionalProperties": false,
                            "properties": {
                              "algorithm": {
                                "default": null,
                                "oneOf": [
                                  {
                                    "type": "null"
                                  },
                                  {
                                    "description": "Signature algorithm label.",
                                    "type": "string"
                                  }
                                ]
                              },
                              "key_id": {
                                "description": "Signing key identifier.",
                                "type": "string"
                              },
                              "signature": {
                                "description": "Schema signature string.",
                                "type": "string"
                              }
                            },
                            "required": [
                              "key_id",
                              "signature"
                            ],
                            "type": "object"
                          },
                          "tenant_id": {
                            "description": "Tenant identifier.",
                            "minimum": 1,
                            "type": "integer"
                          },
                          "version": {
                            "description": "Data shape version identifier.",
                            "type": "string"
                          }
                        },
                        "required": [
                          "tenant_id",
                          "namespace_id",
                          "schema_id",
                          "version",
                          "schema",
                          "description",
                          "created_at"
                        ],
                        "type": "object"
                      },
                      "type": "array"
                    },
                    "next_token": {
                      "oneOf": [
                        {
                          "type": "null"
                        },
                        {
                          "description": "Pagination token for the next page.",
                          "type": "string"
                        }
                      ]
                    }
                  },
                  "required": [
                    "items",
                    "next_token"
                  ],
                  "type": "object"
                },
                "type": {
                  "const": "json"
                }
              },
              "required": [
                "type",
                "json"
              ],
              "type": "object"
            },
            "minItems": 1,
            "type": "array"
          }
        },
        "required": [
          "content"
        ],
        "type": "object"
      },
      "SchemasRegisterToolCallParams": {
        "additionalProperties": false,
        "properties": {
          "arguments": {
            "$schema": "https://json-schema.org/draft/2020-12/schema",
            "additionalProperties": false,
            "properties": {
              "record": {
                "additionalProperties": false,
                "properties": {
                  "created_at": {
                    "oneOf": [
                      {
                        "additionalProperties": false,
                        "properties": {
                          "kind": {
                            "const": "unix_millis"
                          },
                          "value": {
                            "type": "integer"
                          }
                        },
                        "required": [
                          "kind",
                          "value"
                        ],
                        "type": "object"
                      },
                      {
                        "additionalProperties": false,
                        "properties": {
                          "kind": {
                            "const": "logical"
                          },
                          "value": {
                            "minimum": 0,
                            "type": "integer"
                          }
                        },
                        "required": [
                          "kind",
                          "value"
                        ],
                        "type": "object"
                      }
                    ]
                  },
                  "description": {
                    "oneOf": [
                      {
                        "type": "null"
                      },
                      {
                        "description": "Optional schema description.",
                        "type": "string"
                      }
                    ]
                  },
                  "namespace_id": {
                    "description": "Namespace identifier.",
                    "minimum": 1,
                    "type": "integer"
                  },
                  "schema": {
                    "description": "JSON Schema payload.",
                    "type": [
                      "null",
                      "boolean",
                      "number",
                      "string",
                      "array",
                      "object"
                    ]
                  },
                  "schema_id": {
                    "description": "Data shape identifier.",
                    "type": "string"
                  },
                  "signing": {
                    "additionalProperties": false,
                    "properties": {
                      "algorithm": {
                        "default": null,
                        "oneOf": [
                          {
                            "type": "null"
                          },
                          {
                            "description": "Signature algorithm label.",
                            "type": "string"
                          }
                        ]
                      },
                      "key_id": {
                        "description": "Signing key identifier.",
                        "type": "string"
                      },
                      "signature": {
                        "description": "Schema signature string.",
                        "type": "string"
                      }
                    },
                    "required": [
                      "key_id",
                      "signature"
                    ],
                    "type": "object"
                  },
                  "tenant_id": {
                    "description": "Tenant identifier.",
                    "minimum": 1,
                    "type": "integer"
                  },
                  "version": {
                    "description": "Data shape version identifier.",
                    "type": "string"
                  }
                },
                "required": [
                  "tenant_id",
                  "namespace_id",
                  "schema_id",
                  "version",
                  "schema",
                  "description",
                  "created_at"
                ],
                "type": "object"
              }
            },
            "required": [
              "record"
            ],
            "type": "object"
          },
          "name": {
            "const": "schemas_register"
          }
        },
        "required": [
          "name",
          "arguments"
        ],
        "type": "object"
      },
      "SchemasRegisterToolCallResult": {
        "additionalProperties": false,
        "properties": {
          "content": {
            "items": {
              "additionalProperties": false,
              "properties": {
                "json": {
                  "$schema": "https://json-schema.org/draft/2020-12/schema",
                  "additionalProperties": false,
                  "properties": {
                    "record": {
                      "additionalProperties": false,
                      "properties": {
                        "created_at": {
                          "oneOf": [
                            {
                              "additionalProperties": false,
                              "properties": {
                                "kind": {
                                  "const": "unix_millis"
                                },
                                "value": {
                                  "type": "integer"
                                }
                              },
                              "required": [
                                "kind",
                                "value"
                              ],
                              "type": "object"
                            },
                            {
                              "additionalProperties": false,
                              "properties": {
                                "kind": {
                                  "const": "logical"
                                },
                                "value": {
                                  "minimum": 0,
                                  "type": "integer"
                                }
                              },
                              "required": [
                                "kind",
                                "value"
                              ],
                              "type": "object"
                            }
                          ]
                        },
                        "description": {
                          "oneOf": [
                            {
                              "type": "null"
                            },
                            {
                              "description": "Optional schema description.",
                              "type": "string"
                            }
                          ]
                        },
                        "namespace_id": {
                          "description": "Namespace identifier.",
                          "minimum": 1,
                          "type": "integer"
                        },
                        "schema": {
                          "description": "JSON Schema payload.",
                          "type": [
                            "null",
                            "boolean",
                            "number",
                            "string",
                            "array",
                            "object"
                          ]
                        },
                        "schema_id": {
                          "description": "Data shape identifier.",
                          "type": "string"
                        },
                        "signing": {
                          "additionalProperties": false,
                          "properties": {
                            "algorithm": {
                              "default": null,
                              "oneOf": [
                                {
                                  "type": "null"
                                },
                                {
                                  "description": "Signature algorithm label.",
                                  "type": "string"
                                }
                              ]
                            },
                            "key_id": {
                              "description": "Signing key identifier.",
                              "type": "string"
                            },
                            "signature": {
                              "description": "Schema signature string.",
                              "type": "string"
                            }
                          },
                          "required": [
                            "key_id",
                            "signature"
                          ],
                          "type": "object"
                        },
                        "tenant_id": {
                          "description": "Tenant identifier.",
                          "minimum": 1,
                          "type": "integer"
                        },
                        "version": {
                          "description": "Data shape version identifier.",
                          "type": "string"
                        }
                      },
                      "required": [
                        "tenant_id",
                        "namespace_id",
                        "schema_id",
                        "version",
                        "schema",
                        "description",
                        "created_at"
                      ],
                      "type": "object"
                    }
                  },
                  "required": [
                    "record"
                  ],
                  "type": "object"
                },
                "type": {
                  "const": "json"
                }
              },
              "required": [
                "type",
                "json"
              ],
              "type": "object"
            },
            "minItems": 1,
            "type": "array"
          }
        },
        "required": [
          "content"
        ],
        "type": "object"
      },
      "ToolCallParams": {
        "oneOf": [
          {
            "$ref": "#/components/schemas/ScenarioDefineToolCallParams"
          },
          {
            "$ref": "#/components/schemas/ScenarioStartToolCallParams"
          },
          {
            "$ref": "#/components/schemas/ScenarioStatusToolCallParams"
          },
          {
            "$ref": "#/components/schemas/ScenarioNextToolCallParams"
          },
          {
            "$ref": "#/components/schemas/ScenarioSubmitToolCallParams"
          },
          {
            "$ref": "#/components/schemas/ScenarioTriggerToolCallParams"
          },
          {
            "$ref": "#/components/schemas/EvidenceQueryToolCallParams"
          },
          {
            "$ref": "#/components/schemas/RunpackExportToolCallParams"
          },
          {
            "$ref": "#/components/schemas/RunpackVerifyToolCallParams"
          },
          {
            "$ref": "#/components/schemas/ProvidersListToolCallParams"
          },
          {
            "$ref": "#/components/schemas/ProviderContractGetToolCallParams"
          },
          {
            "$ref": "#/components/schemas/ProviderCheckSchemaGetToolCallParams"
          },
          {
            "$ref": "#/components/schemas/SchemasRegisterToolCallParams"
          },
          {
            "$ref": "#/components/schemas/SchemasListToolCallParams"
          },
          {
            "$ref": "#/components/schemas/SchemasGetToolCallParams"
          },
          {
            "$ref": "#/components/schemas/ScenariosListToolCallParams"
          },
          {
            "$ref": "#/components/schemas/PrecheckToolCallParams"
          },
          {
            "$ref": "#/components/schemas/DecisionGateDocsSearchToolCallParams"
          }
        ]
      },
      "ToolCallRequest": {
        "additionalProperties": false,
        "properties": {
          "id": {
            "oneOf": [
              {
                "type": "string"
              },
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ]
          },
          "jsonrpc": {
            "const": "2.0"
          },
          "method": {
            "const": "tools/call"
          },
          "params": {
            "$ref": "#/components/schemas/ToolCallParams"
          }
        },
        "required": [
          "jsonrpc",
          "id",
          "method",
          "params"
        ],
        "type": "object"
      },
      "ToolCallResponse": {
        "additionalProperties": false,
        "properties": {
          "error": {
            "$ref": "#/components/schemas/JsonRpcError"
          },
          "id": {
            "oneOf": [
              {
                "type": "string"
              },
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ]
          },
          "jsonrpc": {
            "const": "2.0"
          },
          "result": {
            "$ref": "#/components/schemas/ToolCallResult"
          }
        },
        "required": [
          "jsonrpc",
          "id"
        ],
        "type": "object"
      },
      "ToolCallResult": {
        "oneOf": [
          {
            "$ref": "#/components/schemas/ScenarioDefineToolCallResult"
          },
          {
            "$ref": "#/components/schemas/ScenarioStartToolCallResult"
          },
          {
            "$ref": "#/components/schemas/ScenarioStatusToolCallResult"
          },
          {
            "$ref": "#/components/schemas/ScenarioNextToolCallResult"
          },
          {
            "$ref": "#/components/schemas/ScenarioSubmitToolCallResult"
          },
          {
            "$ref": "#/components/schemas/ScenarioTriggerToolCallResult"
          },
          {
            "$ref": "#/components/schemas/EvidenceQueryToolCallResult"
          },
          {
            "$ref": "#/components/schemas/RunpackExportToolCallResult"
          },
          {
            "$ref": "#/components/schemas/RunpackVerifyToolCallResult"
          },
          {
            "$ref": "#/components/schemas/ProvidersListToolCallResult"
          },
          {
            "$ref": "#/components/schemas/ProviderContractGetToolCallResult"
          },
          {
            "$ref": "#/components/schemas/ProviderCheckSchemaGetToolCallResult"
          },
          {
            "$ref": "#/components/schemas/SchemasRegisterToolCallResult"
          },
          {
            "$ref": "#/components/schemas/SchemasListToolCallResult"
          },
          {
            "$ref": "#/components/schemas/SchemasGetToolCallResult"
          },
          {
            "$ref": "#/components/schemas/ScenariosListToolCallResult"
          },
          {
            "$ref": "#/components/schemas/PrecheckToolCallResult"
          },
          {
            "$ref": "#/components/schemas/DecisionGateDocsSearchToolCallResult"
          }
        ]
      }
    }
  },
  "info": {
    "description": "Generated OpenAPI view of the Decision Gate tools/call JSON-RPC surface.",
    "title": "Decision Gate MCP JSON-RPC",
    "version": "0.1.0"
  },
  "jsonSchemaDialect": "https://json-schema.org/draft/2020-12/schema",
  "openapi": "3.1.0",
  "paths": {
    "/rpc": {
      "post": {
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ToolCallRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ToolCallResponse"
                }
              }
            },
            "description": "JSON-RPC tool response."
          }
        },
        "summary": "Invoke a Decision Gate tool via JSON-RPC."
      }
    }
  }
}